## A - Códigos de estado adicionales

**Definición:**  
Por defecto, FastAPI devuelve respuestas en formato JSON con un código de estado predeterminado o el que especifiques en tu operación de ruta. Sin embargo, puedes devolver códigos de estado adicionales devolviendo directamente una `Response`, como `JSONResponse`, y estableciendo el código de estado que desees.

**Ejemplo:**

```python
from fastapi import FastAPI, status
from fastapi.responses import JSONResponse

app = FastAPI()

items = {"foo": {"name": "Fighters", "size": 6}, "bar": {"name": "Tenders", "size": 3}}

@app.put("/items/{item_id}")
async def upsert_item(item_id: str, name: str | None = None, size: int | None = None):
    if item_id in items:
        item = items[item_id]
        item["name"] = name
        item["size"] = size
        return item
    else:
        item = {"name": name, "size": size}
        items[item_id] = item
        return JSONResponse(status_code=status.HTTP_201_CREATED, content=item)
```

**Descripción del ejemplo:**  
Este código permite actualizar un ítem existente (devolviendo un código de estado 200 "OK") o crear un nuevo ítem si no existe (devolviendo un código de estado 201 "Created"). Para el caso de creación, se devuelve un `JSONResponse` con el código de estado 201.

---

## B - Respuestas directas y serialización

**Definición:**  
Cuando devuelves una `Response` directamente (como `JSONResponse`), FastAPI no serializa la respuesta con un modelo Pydantic. Asegúrate de que los datos que devuelves estén en el formato correcto (por ejemplo, JSON válido si usas `JSONResponse`).

**Advertencia:**  
Si devuelves una `Response` directamente, FastAPI no puede inferir el esquema OpenAPI para esa respuesta, por lo que no aparecerá en la documentación automática.

---

## C - Documentación de respuestas adicionales

**Definición:**  
Si deseas documentar respuestas adicionales en OpenAPI (por ejemplo, códigos de estado personalizados), puedes usar la funcionalidad de **Respuestas Adicionales** de FastAPI. Esto te permite especificar manualmente los códigos de estado y los esquemas de respuesta que no pueden ser inferidos automáticamente.

**Ejemplo:**  
(No se proporciona un ejemplo en el texto, pero puedes consultar la documentación de FastAPI sobre "Respuestas Adicionales").

---

## D - Importación de `JSONResponse` y `status`

**Definición:**  
Puedes importar `JSONResponse` y `status` desde `fastapi.responses` y `fastapi`, respectivamente. FastAPI proporciona estas importaciones como una conveniencia, pero en realidad vienen de Starlette, el framework subyacente.

**Ejemplo:**

```python
from fastapi import FastAPI, status
from fastapi.responses import JSONResponse

app = FastAPI()

@app.get("/custom-response")
async def custom_response():
    return JSONResponse(status_code=status.HTTP_202_ACCEPTED, content={"message": "Accepted"})
```

**Descripción del ejemplo:**  
Aquí se devuelve una respuesta personalizada con un código de estado 202 "Accepted".

---

## E - Limitaciones de OpenAPI con respuestas directas

**Definición:**  
Si devuelves respuestas directamente (como `JSONResponse`), FastAPI no puede incluirlas automáticamente en el esquema OpenAPI. Esto significa que no aparecerán en la documentación automática. Para solucionar esto, debes documentar manualmente las respuestas adicionales.
