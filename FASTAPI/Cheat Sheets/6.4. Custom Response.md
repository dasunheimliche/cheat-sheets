## A - Respuestas personalizadas en FastAPI

**Definición:**  
Por defecto, FastAPI devuelve respuestas en formato JSON usando `JSONResponse`. Sin embargo, puedes personalizar el tipo de respuesta que deseas devolver, como HTML, archivos, streams, o incluso crear tus propias respuestas personalizadas. Esto se hace utilizando el parámetro `response_class` en el decorador de la operación de ruta o devolviendo directamente un objeto `Response`.

**Ejemplo básico de `JSONResponse` (por defecto):**

```python
from fastapi import FastAPI

app = FastAPI()

@app.get("/items/")
async def read_items():
    return {"item_id": "Foo"}
```

(Descripción: Este es el comportamiento predeterminado de FastAPI, donde la respuesta se devuelve en formato JSON).

---

## B - Uso de `ORJSONResponse`

**Definición:**  
`ORJSONResponse` es una alternativa más rápida para devolver respuestas JSON, utilizando la librería `orjson`. Es útil cuando se necesita mejorar el rendimiento, especialmente con respuestas grandes.

**Ejemplo:**

```python
from fastapi import FastAPI
from fastapi.responses import ORJSONResponse

app = FastAPI()

@app.get("/items/", response_class=ORJSONResponse)
async def read_items():
    return [{"item_id": "Foo"}]
```

(Descripción: Aquí se usa `ORJSONResponse` para devolver una lista de ítems en formato JSON de manera más eficiente).

---

## C - Respuesta HTML

**Definición:**  
Para devolver una respuesta con contenido HTML, se utiliza `HTMLResponse`. Esto es útil cuando necesitas servir páginas web directamente desde tu API.

**Ejemplo:**

```python
from fastapi import FastAPI
from fastapi.responses import HTMLResponse

app = FastAPI()

@app.get("/items/", response_class=HTMLResponse)
async def read_items():
    return """
    <html>
        <head><title>Some HTML</title></head>
        <body><h1>Look ma! HTML!</h1></body>
    </html>
    """
```

(Descripción: Este código devuelve una página HTML simple cuando se accede a la ruta `/items/`).

---

## D - Devolver una `Response` directamente

**Definición:**  
Puedes devolver un objeto `Response` directamente desde tu función de operación de ruta. Esto te da control total sobre la respuesta, pero no se documentará automáticamente en OpenAPI.

**Ejemplo:**

```python
from fastapi import FastAPI
from fastapi.responses import HTMLResponse

app = FastAPI()

@app.get("/items/")
async def read_items():
    html_content = """
    <html>
        <head><title>Some HTML</title></head>
        <body><h1>Look ma! HTML!</h1></body>
    </html>
    """
    return HTMLResponse(content=html_content, status_code=200)
```

(Descripción: Aquí se devuelve una respuesta HTML directamente, sin usar `response_class`).

---

## E - `StreamingResponse`

**Definición:**  
`StreamingResponse` se utiliza para devolver una respuesta en forma de flujo (stream), lo que es útil para archivos grandes o datos generados dinámicamente. Puedes usarlo con generadores asíncronos o normales.

**Ejemplo:**

```python
from fastapi import FastAPI
from fastapi.responses import StreamingResponse

app = FastAPI()

async def fake_video_streamer():
    for i in range(10):
        yield b"some fake video bytes"

@app.get("/")
async def main():
    return StreamingResponse(fake_video_streamer())

(Descripción: Este código simula la transmisión de un video en partes pequeñas).
```

---

## F - `FileResponse`

**Definición:**  
`FileResponse` se utiliza para devolver un archivo como respuesta. Es ideal para servir archivos grandes, como videos o documentos, sin cargarlos completamente en memoria.

**Ejemplo:**

```python
from fastapi import FastAPI
from fastapi.responses import FileResponse

app = FastAPI()

@app.get("/video/")
async def main():
    return FileResponse("large-video-file.mp4", media_type="video/mp4")
```

(Descripción: Este código sirve un archivo de video directamente desde el servidor).

---

## G - Crear una respuesta personalizada

**Definición:**  
Puedes crear tus propias clases de respuesta personalizadas heredando de `Response`. Esto es útil cuando necesitas un comportamiento específico, como formatear JSON de una manera particular.

**Ejemplo:**

```python
from fastapi import FastAPI, Response
import orjson

app = FastAPI()

class CustomORJSONResponse(Response):
    media_type = "application/json"

    def render(self, content: Any) -> bytes:
        return orjson.dumps(content, option=orjson.OPT_INDENT_2)

@app.get("/", response_class=CustomORJSONResponse)
async def main():
    return {"message": "Hello World"}
```

(Descripción: Este código crea una respuesta JSON personalizada que devuelve el contenido formateado con indentación).

---

## H - Cambiar la clase de respuesta predeterminada

**Definición:**  
Puedes cambiar la clase de respuesta predeterminada para toda tu aplicación o para un `APIRouter` específico usando el parámetro `default_response_class`.

**Ejemplo:**

```python
from fastapi import FastAPI
from fastapi.responses import ORJSONResponse

app = FastAPI(default_response_class=ORJSONResponse)

@app.get("/items/")
async def read_items():
    return [{"item_id": "Foo"}]
```

(Descripción: Aquí se configura `ORJSONResponse` como la clase de respuesta predeterminada para toda la aplicación).
