## A - Estructura de Archivos

**Definición:** La estructura de archivos en una aplicación FastAPI más grande organiza el código en diferentes módulos y submódulos para mantenerlo limpio y manejable.

**Ejemplo:**

```plaintext
.
├── app
│   ├── __init__.py
│   ├── main.py
│   ├── dependencies.py
│   ├── routers
│   │   ├── __init__.py
│   │   ├── items.py
│   │   └── users.py
│   └── internal
│       ├── __init__.py
│       └── admin.py
```

En este ejemplo, la carpeta app contiene todos los archivos y subcarpetas necesarios para la aplicación.

## B - APIRouter

**Definición:** APIRouter es una clase en FastAPI que permite crear rutas de manera modular y reutilizable.

**Ejemplo:**

```python
from fastapi import APIRouter

router = APIRouter()

@router.get("/users/", tags=["users"])
async def read_users():
    return [{"username": "Rick"}, {"username": "Morty"}]
```

En este ejemplo, se crea un APIRouter para manejar las rutas relacionadas con los usuarios.

## C - Dependencias

**Definición:** Las dependencias en FastAPI son funciones que pueden ser inyectadas en otras funciones para compartir lógica común, como la autenticación.

**Ejemplo:**

```python
from fastapi import Header, HTTPException

async def get_token_header(x_token: str = Header()):
    if x_token != "fake-super-secret-token":
        raise HTTPException(status_code=400, detail="X-Token header invalid")
```

En este ejemplo, get_token_header verifica un encabezado personalizado X-Token.

## D - Importar Dependencias

**Definición:** Las dependencias se pueden importar y utilizar en diferentes módulos para mantener el código organizado.

**Ejemplo:**

```python
from fastapi import APIRouter, Depends, HTTPException
from ..dependencies import get_token_header

router = APIRouter(
    prefix="/items",
    tags=["items"],
    dependencies=[Depends(get_token_header)],
    responses={404: {"description": "Not found"}},
)

@router.get("/")
async def read_items():
    return {"items": ["item1", "item2"]}
```

En este ejemplo, se importa y utiliza la dependencia get_token_header en el módulo items.

## E - Incluir APIRouter en FastAPI

**Definición:** Los APIRouter se pueden incluir en la aplicación principal de FastAPI para organizar las rutas.

**Ejemplo:**

```python
from fastapi import FastAPI
from .routers import items, users

app = FastAPI()

app.include_router(users.router)
app.include_router(items.router)
```

En este ejemplo, se incluyen los routers users e items en la aplicación principal.

## F - Prefijos y Dependencias Personalizadas

**Definición:** Se pueden agregar prefijos, dependencias y respuestas personalizadas al incluir un APIRouter.

**Ejemplo:**

```python
app.include_router(
    admin.router,
    prefix="/admin",
    tags=["admin"],
    dependencies=[Depends(get_token_header)],
    responses={418: {"description": "I'm a teapot"}},
)
```

En este ejemplo, se incluye el router admin con un prefijo, etiquetas y dependencias personalizadas.

## G - Documentación Automática

**Definición:** FastAPI genera automáticamente documentación interactiva para tu API utilizando OpenAPI y Swagger UI.

**Ejemplo:** Después de ejecutar tu aplicación FastAPI, puedes acceder a la documentación interactiva en http://127.0.0.1:8000/docs. Aquí puedes probar tus endpoints y ver la documentación generada automáticamente.
