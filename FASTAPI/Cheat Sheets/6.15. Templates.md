## A - Motores de plantillas (Template Engines)

**Definición:** Herramientas que permiten generar contenido dinámico (HTML, XML, etc.) a partir de una plantilla base y datos proporcionados. Permiten separar la lógica de la presentación de la información.

**Ejemplo:** Jinja2 es un ejemplo común.

(Similar a los template engines de otros frameworks como Django o Flask).

## B - Jinja2Templates

**Definición:** Clase de fastapi.templating (o starlette.templating) que facilita la integración de Jinja2 con FastAPI. Se encarga de encontrar plantillas en un directorio específico y renderizarlas.

**Ejemplo:**

```Python
from fastapi.templating import Jinja2Templates

templates = Jinja2Templates(directory="templates")
```

(Crea un objeto que buscará plantillas en la carpeta templates del proyecto).

## C - TemplateResponse

**Definición:** Una respuesta HTTP específica para enviar contenido renderizado con un motor de plantillas. Acepta el objeto request, el nombre de la plantilla y un diccionario de contexto (datos para la plantilla).

**Ejemplo:**

```Python
from fastapi import Request
from fastapi.responses import HTMLResponse
from fastapi.templating import Jinja2Templates

templates = Jinja2Templates(directory="templates")

@app.get("/items/{id}", response_class=HTMLResponse)
async def read_item(request: Request, id: str):
    return templates.TemplateResponse(
        name="item.html", request=request, context={"id": id}
    )
```

(Renderiza la plantilla item.html usando el contexto {"id": id} y lo envía como respuesta HTML).

## D - Directorio de Plantillas

**Definición:** La carpeta donde se guardan las plantillas HTML (o en otro formato) que serán renderizadas por FastAPI. Se especifica en la inicialización de Jinja2Templates.

**Ejemplo:**

```
mi_proyecto/
├── main.py
└── templates/
    └── item.html
```

(En este ejemplo templates sería el directorio de plantillas.)

## E - Contexto (Context)

**Definición:** Un diccionario de Python que se pasa a la plantilla. Contiene los datos que se mostrarán dinámicamente en la plantilla. Las claves del diccionario se pueden usar dentro de la plantilla con la sintaxis {{ clave }}.

**Ejemplo:**

```Python
# En Python:
context = {"id": "42", "nombre": "Producto"}

# En la plantilla:
# Item ID: {{ id }}
# Nombre: {{ nombre }}
```

(En el HTML resultante se reemplazará {{ id }} por "42" y {{ nombre }} por "Producto").

## F - url_for() en Plantillas

**Definición:** Función que se utiliza dentro de una plantilla para generar URLs dinámicamente, basándose en el nombre de la ruta y los parámetros. Es la misma que usa FastAPI para generar urls y la documentación.

**Ejemplo:**

```Html
<a href="{{ url_for('read_item', id=id) }}">Enlace al item</a>
```

(Genera un enlace a la ruta que maneja la función read_item, usando el valor de id que está en el contexto de la plantilla).

## G - StaticFiles y Plantillas

**Definición:** Se pueden utilizar StaticFiles para servir archivos estáticos (CSS, imágenes, JS) y luego utilizar url_for() en las plantillas para generar las URLs correctas a estos recursos.

**Ejemplo:**

```Python
from fastapi import FastAPI
from fastapi.staticfiles import StaticFiles

app = FastAPI()

app.mount("/static", StaticFiles(directory="static"), name="static")
```

```Html
<link href="{{ url_for('static', path='/styles.css') }}" rel="stylesheet">
```

(La plantilla enlaza a un archivo CSS ubicado en /static/styles.css, que es servido por StaticFiles)

## H - response_class=HTMLResponse

**Definición:** Se utiliza para indicar a FastAPI (y a la documentación de la API) que una ruta específica devuelve una respuesta HTML. Es opcional pero permite que la documentación de la API sea mas precisa.

**Ejemplo:**

```Python
@app.get("/items/{id}", response_class=HTMLResponse)
async def read_item(request: Request, id: str):
  return templates.TemplateResponse(
      name="item.html", request=request, context={"id": id}
  )
```

(Indica que la respuesta de /items/{id} será HTML.)
