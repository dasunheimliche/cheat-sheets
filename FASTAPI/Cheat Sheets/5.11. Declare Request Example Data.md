### **Paso 0: El Mapa del Tesoro (√çndice de Conceptos)**

Antes de sumergirnos, quiero que veas el plan de ataque. He analizado el texto y he identificado cada pieza del rompecabezas que vamos a armar. ¬°Ni una m√°s, ni una menos! Esta es nuestra hoja de ruta para que no te pierdas y veas que cubriremos absolutamente todo.

1.  **A√±adir Ejemplos en Modelos Pydantic (Visi√≥n General)**: La idea principal de c√≥mo "incrustar" ejemplos de datos directamente en tus "moldes" de datos (los modelos Pydantic).
2.  **`model_config` y `json_schema_extra` (Pydantic v2)**: El m√©todo moderno y recomendado para a√±adir ejemplos a tus modelos Pydantic. ¬°Es el que probablemente usar√°s!
3.  **`Config` y `schema_extra` (Pydantic v1)**: El m√©todo "cl√°sico" o antiguo. Es crucial que lo conozcas por si te encuentras con c√≥digo m√°s viejo, pero hoy en d√≠a preferimos el m√©todo nuevo.
4.  **A√±adir Ejemplos con `Field()`**: Una forma s√∫per espec√≠fica de poner ejemplos, no para todo el "molde", sino para cada "ingrediente" (campo) por separado.
5.  **A√±adir Ejemplos en Par√°metros de Operaci√≥n (con `Body`)**: C√≥mo proporcionar ejemplos directamente en la "puerta" de tu API (el endpoint), en lugar de en el "molde" de datos.
6.  **El Par√°metro `openapi_examples` (El As Bajo la Manga)**: La herramienta secreta para mostrar m√∫ltiples ejemplos s√∫per detallados en tu documentaci√≥n, resolviendo una limitaci√≥n com√∫n de las herramientas de documentaci√≥n.
7.  **Diferencia Clave: `examples` vs. `openapi_examples` (La Gran Batalla)**: Aqu√≠ es donde te volar√© la cabeza con la claridad. Pondremos a estos dos conceptos uno frente al otro y no quedar√° ni la m√°s m√≠nima sombra de duda sobre cu√°l, cu√°ndo y por qu√© usar.
8.  **Detalles T√©cnicos e Hist√≥ricos (La Lecci√≥n de Historia)**: Un peque√±o viaje en el tiempo para entender por qu√© existen estas diferentes formas. No es vital para programar hoy, pero te dar√° el contexto para sentirte como un verdadero experto.

¬°Listo! Ese es nuestro plan. Ahora, ¬°al ataque!

---

## A - A√±adir Ejemplos en Modelos Pydantic: "Incrustando la chuleta en el molde" üü°

#### 1. **Introducci√≥n:**

Esta t√©cnica consiste en definir los datos de ejemplo directamente dentro de la clase del modelo Pydantic, como si le pusieras una etiqueta con una foto del resultado final a un molde para pasteles.

#### 2. **Ejemplo (El m√©todo moderno con Pydantic v2):**

```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    name: str
    description: str | None = None
    price: float
    tax: float | None = None

    # ¬°AQU√ç EST√Å LA MAGIA!
    model_config = {
        "json_schema_extra": {
            "examples": [
                {
                    "name": "Laptop Gamer",
                    "description": "Una laptop incre√≠ble para jugar sin parar.",
                    "price": 1500.50,
                    "tax": 150.05,
                }
            ]
        }
    }

@app.put("/items/{item_id}")
async def update_item(item_id: int, item: Item):
    results = {"item_id": item_id, "item": item}
    return results
```

**Explicaci√≥n del ejemplo:**
F√≠jate bien. Dentro de la clase `Item`, hemos a√±adido un diccionario llamado `model_config`. Dentro de √©l, hay otra clave `"json_schema_extra"`, y finalmente `"examples"`. Esto le dice a FastAPI: "Oye, cuando generes la documentaci√≥n para cualquier endpoint que use este modelo `Item`, por favor, muestra este ejemplo que te estoy dando". Es una forma de hacer tu modelo auto-documentado.

#### 3. **Desarrollo**:

Cuando FastAPI crea la documentaci√≥n de tu API, genera algo llamado "JSON Schema", que es como el DNI o la c√©dula de identidad de tus datos. Describe qu√© campos tiene, de qu√© tipo son, etc. Al usar `model_config` (o `schema_extra` en versiones antiguas de Pydantic), est√°s a√±adiendo informaci√≥n extra a ese "DNI".

La documentaci√≥n autom√°tica (como Swagger UI) lee ese DNI enriquecido y muestra los ejemplos que pusiste, haciendo que sea s√∫per f√°cil para otros desarrolladores (¬°o para tu yo del futuro!) entender qu√© tipo de datos se esperan.

Existen dos formas principales de hacerlo, dependiendo de la versi√≥n de Pydantic que uses. Te las presento a continuaci√≥n.

üü° **Importante**: Es una pr√°ctica muy com√∫n y recomendada. Ayuda a que tu API sea mucho m√°s clara y f√°cil de usar desde el primer momento, ya que los ejemplos aparecen directamente en la documentaci√≥n interactiva.

---

## B - `model_config` vs `Config`: "Lo Nuevo vs. lo Cl√°sico para Pydantic" üü°

¬°Atenci√≥n, m√°xima concentraci√≥n aqu√≠! Esta es una de esas cosas que confunde a la gente, pero t√∫ no caer√°s en la trampa. La forma de a√±adir ejemplos al modelo cambi√≥ entre la versi√≥n 1 y la versi√≥n 2 de Pydantic. Es la misma idea, pero con un nombre diferente.

### `model_config` y `json_schema_extra` (Pydantic v2 - El m√©todo moderno)

#### 1. **Introducci√≥n:**

En Pydantic v2 y versiones m√°s recientes, usas un diccionario llamado `model_config` para a√±adir metadatos, incluyendo los ejemplos.

#### 2. **Ejemplo:**

```python
class Item(BaseModel):
    name: str
    price: float

    # El m√©todo moderno y actual
    model_config = {
        "json_schema_extra": {
            "examples": [
                {
                    "name": "Teclado Mec√°nico",
                    "price": 99.99,
                }
            ]
        }
    }
```

**Explicaci√≥n del ejemplo:**
Simple y directo. `model_config` es un atributo de la clase. Le pasas un diccionario y, a trav√©s de la clave `"json_schema_extra"`, puedes inyectar lo que quieras en el esquema JSON generado, en este caso, una lista de `examples`.

### `Config` y `schema_extra` (Pydantic v1 - El m√©todo antiguo)

#### 1. **Introducci√≥n:**

En Pydantic v1, se usaba una clase anidada (una clase dentro de otra) llamada `Config` y un atributo llamado `schema_extra`.

#### 2. **Ejemplo:**

```python
class Item(BaseModel):
    name: str
    price: float

    # El m√©todo antiguo (legacy)
    class Config:
        schema_extra = {
            "examples": [
                {
                    "name": "Teclado Mec√°nico",
                    "price": 99.99,
                }
            ]
        }
```

**Explicaci√≥n del ejemplo:**
¬øVes la diferencia? En lugar de un diccionario, aqu√≠ creamos una `class Config` dentro de `Item`. El resultado final en la documentaci√≥n es el mismo, pero la sintaxis es distinta.

#### 3. **Desarrollo y Conclusi√≥n Paranoica:**

**¬øPor qu√© te explico ambos?** Porque en el mundo real, te encontrar√°s con proyectos que usan versiones m√°s antiguas de Pydantic. Si solo conoces `model_config` y ves `class Config`, podr√≠as pensar que es un error o algo completamente diferente. ¬°Pero no! Ahora sabes que son simplemente dos dialectos del mismo idioma.

**Regla de oro:** Si est√°s empezando un proyecto nuevo, **usa `model_config`**. Si est√°s trabajando en un proyecto existente, revisa la versi√≥n de Pydantic y usa el m√©todo que corresponda. ¬°As√≠ de f√°cil! ¬°Cero confusi√≥n!

üü° **Importante**: Conocer ambas formas te convierte en un desarrollador m√°s vers√°til y te evita dolores de cabeza al leer c√≥digo ajeno o antiguo.

---

## C - A√±adir Ejemplos con `Field()`: "Etiquetando cada ingrediente por separado" üü°

#### 1. **Introducci√≥n:**

En lugar de dar un ejemplo del "pastel" completo, esta t√©cnica te permite dar un ejemplo para cada "ingrediente" (campo) de forma individual.

#### 2. **Ejemplo:**

```python
from fastapi import FastAPI
from pydantic import BaseModel, Field

app = FastAPI()

class Item(BaseModel):
    # Ejemplo solo para el campo 'name'
    name: str = Field(examples=["Pelota de F√∫tbol"])

    # Ejemplo solo para el campo 'description'
    description: str | None = Field(default=None, examples=["Una pelota oficial del mundial"])

    # Ejemplo solo para el campo 'price'
    price: float = Field(examples=[25.00])

    tax: float | None = Field(default=None, examples=[2.50])

@app.put("/items/{item_id}")
async def update_item(item_id: int, item: Item):
    results = {"item_id": item_id, "item": item}
    return results
```

**Explicaci√≥n del ejemplo:**
Aqu√≠ no usamos `model_config`. En su lugar, para cada atributo de la clase (`name`, `description`, etc.), usamos `Field()`. Dentro de `Field()`, pasamos el argumento `examples` con una lista que contiene... ¬°el ejemplo para ese campo espec√≠fico! Es como poner una peque√±a nota adhesiva en cada frasco de tu cocina.

#### 3. **Desarrollo**:

Esto es √∫til cuando los campos individuales pueden no ser obvios. Por ejemplo, si tienes un campo `user_id`, un ejemplo como `examples=["USR-123-ABC"]` es mucho m√°s √∫til que solo saber que es un `string`.

**¬°Cuidado con la posible confusi√≥n!** Esto NO crea un ejemplo completo del objeto `Item` en la documentaci√≥n. Simplemente anota cada campo con su propio ejemplo. Si quieres mostrar un objeto `Item` completo y coherente, el m√©todo de `model_config` (ver concepto **A** y **B**) es mejor. Puedes combinar ambos, pero s√© consciente de lo que hace cada uno.

üü° **Importante**: Es una herramienta muy √∫til para mejorar la claridad de modelos complejos. No siempre es necesario, pero cuando un campo tiene un formato espec√≠fico o un valor no tan obvio, usar `Field` con `examples` es una excelente pr√°ctica.

---

## D - A√±adir Ejemplos en `Body()`: "Poniendo la chuleta en la puerta del club" üü°

#### 1. **Introducci√≥n:**

Este m√©todo cambia el lugar donde defines el ejemplo: en lugar de ponerlo en el "molde" (`Item`), lo pones en la "puerta" de entrada de tu API (el endpoint, usando `Body()`).

#### 2. **Ejemplo:**

```python
from typing import Annotated
from fastapi import Body, FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    name: str
    description: str | None = None
    price: float
    tax: float | None = None

@app.put("/items/{item_id}")
async def update_item(
    item_id: int,
    item: Annotated[
        Item,
        Body(  # ¬°AQU√ç EST√Å LA ACCI√ìN!
            examples=[
                {
                    "name": "Silla de Oficina",
                    "description": "Ergon√≥mica y c√≥moda.",
                    "price": 120.0,
                    "tax": 12.0,
                }
            ],
        ),
    ],
):
    results = {"item_id": item_id, "item": item}
    return results
```

**Explicaci√≥n del ejemplo:**
Observa la funci√≥n `update_item`. El par√°metro `item` ahora es de tipo `Annotated`. Esto nos permite "anotar" el tipo `Item` con informaci√≥n extra. En este caso, la informaci√≥n extra es `Body()`, y dentro de `Body()` pasamos el par√°metro `examples`.

El resultado en la documentaci√≥n es muy similar a poner el ejemplo en el modelo, pero la definici√≥n vive junto al endpoint.

#### 3. **Desarrollo**:

**¬øPor qu√© har√≠as esto?** Imagina que el mismo modelo `Item` se usa en 5 endpoints diferentes, pero en cada uno, el "ejemplo t√≠pico" es distinto.

- En `POST /items/` (crear), un buen ejemplo podr√≠a no tener `tax`.
- En `PUT /items/{item_id}` (actualizar), un buen ejemplo podr√≠a tener todos los campos.
- En `PATCH /items/{item_id}/inventory` (actualizar inventario), el ejemplo relevante solo necesitar√≠a `price`.

Definir el ejemplo en `Body()` te da esa flexibilidad contextual. El ejemplo est√° ligado al _uso_ del modelo en ese endpoint espec√≠fico, no al modelo en s√≠ mismo.

As√≠ se ve en la documentaci√≥n, ¬°s√∫per √∫til!
![Ejemplo en la UI de la documentaci√≥n](https://fastapi.tiangolo.com/img/tutorial/body-fields/image01.png)

üü° **Importante**: Es la forma de proveer ejemplos cuando el contexto del endpoint importa. Te da m√°s control y flexibilidad que poner el ejemplo directamente en el modelo Pydantic.

---

## E - El Par√°metro `openapi_examples`: "El Men√∫ Degustaci√≥n para tu API" üîµ

#### 1. **Introducci√≥n:**

Este es el "modo experto". Mientras que `examples` te da _un_ ejemplo, `openapi_examples` te permite ofrecer un men√∫ completo de ejemplos, cada uno con su propio nombre, descripci√≥n y, por supuesto, el valor.

#### 2. **Ejemplo:**

```python
from typing import Annotated
from fastapi import Body, FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    name: str
    description: str | None = None
    price: float
    tax: float | None = None

@app.put("/items/{item_id}")
async def update_item(
    *,
    item_id: int,
    item: Annotated[
        Item,
        Body(
            # ¬°ESTA ES LA HERRAMIENTA SECRETA!
            openapi_examples={
                "normal": {
                    "summary": "Un ejemplo normal y corriente",
                    "description": "As√≠ se ve un item **completo** y correcto.",
                    "value": {
                        "name": "Foo",
                        "description": "A very nice Item",
                        "price": 35.4,
                        "tax": 3.2,
                    },
                },
                "convertido": {
                    "summary": "Un ejemplo con conversi√≥n",
                    "description": "FastAPI convierte strings a n√∫meros m√°gicamente.",
                    "value": {"name": "Bar", "price": "35.4"},
                },
                "invalido": {
                    "summary": "Ejemplo de dato inv√°lido",
                    "description": "Esto dar√≠a un error de validaci√≥n.",
                    "value": {"name": "Baz", "price": "treinta y cinco"},
                },
            },
        ),
    ],
):
    results = {"item_id": item_id, "item": item}
    return results
```

**Explicaci√≥n del ejemplo:**
¬°Mira qu√© maravilla! En lugar de `examples=[...]` (una lista), ahora usamos `openapi_examples={...}` (un diccionario).

- Cada **clave** del diccionario ("normal", "convertido", "invalido") es el nombre de un ejemplo.
- Cada **valor** es otro diccionario con `summary`, `description` (¬°soporta Markdown!) y `value` (el dato de ejemplo en s√≠).

Esto crea un men√∫ desplegable en la documentaci√≥n para que el usuario pueda elegir qu√© escenario quiere ver.

![M√∫ltiples ejemplos en la UI de la documentaci√≥n](https://fastapi.tiangolo.com/img/tutorial/body-fields/image02.png)

#### 3. **Desarrollo**:

Esta es la soluci√≥n a un problema hist√≥rico: la herramienta de documentaci√≥n (Swagger UI) no mostraba bien m√∫ltiples ejemplos definidos con el par√°metro `examples` est√°ndar. FastAPI introdujo `openapi_examples` para usar una caracter√≠stica espec√≠fica de OpenAPI (el est√°ndar detr√°s de todo esto) que Swagger UI s√≠ entiende a la perfecci√≥n.

Usa esto cuando quieras ilustrar diferentes casos de uso: el caso feliz, el caso donde falta un dato, el caso con un formato especial, el caso que provocar√≠a un error, etc. Es como darle al usuario de tu API un tutorial interactivo.

üîµ **Espec√≠fico**: No lo usar√°s todos los d√≠as, pero cuando necesites mostrar m√∫ltiples escenarios o casos l√≠mite en tu documentaci√≥n, esta es la herramienta perfecta. Conocerla te distingue de un programador novato.

---

## F - `examples` vs. `openapi_examples`: "La Batalla Final por la Claridad" üî¥

¬°Llegamos al punto m√°s importante! Si entiendes esto, lo has entendido todo. Te prometo que despu√©s de esta explicaci√≥n, jam√°s volver√°s a dudar.

Imagina que est√°s construyendo una casa.

- El **Modelo Pydantic** (`class Item`) es el **plano arquitect√≥nico** de una habitaci√≥n. Define que debe tener "una puerta", "una ventana", "un suelo".
- El **Endpoint** (`@app.put(...)`) es la **puerta de entrada** a esa habitaci√≥n desde el exterior.

Ahora, veamos c√≥mo encajan nuestros dos conceptos:

### `examples` (El Est√°ndar del Plano)

- **Qu√© es:** Es un par√°metro que a√±ade ejemplos **al esquema JSON**.
- **Analog√≠a:** Es como a√±adir una nota **directamente en el plano arquitect√≥nico** que dice: "Ejemplo de habitaci√≥n: una con paredes blancas y suelo de madera".
- **D√≥nde va:** Se a√±ade al "plano" (el esquema). Puedes hacerlo en el modelo Pydantic (`model_config`) o en el `Body()` (que tambi√©n afecta al esquema de esa operaci√≥n).
- **Formato:** Una **lista** de ejemplos. `examples = [ {...}, {...} ]`
- **Problema:** Aunque el est√°ndar moderno (JSON Schema) lo soporta, la herramienta m√°s popular para ver la documentaci√≥n (Swagger UI) hist√≥ricamente **no mostraba bien esta lista**. Pod√≠a mostrar solo el primero o ninguno.

### `openapi_examples` (La Decoraci√≥n de la Puerta)

- **Qu√© es:** Es un par√°metro espec√≠fico de OpenAPI para a√±adir ejemplos **a la operaci√≥n de la ruta** (al endpoint).
- **Analog√≠a:** No modifica el plano. En su lugar, cuelga un **cat√°logo de fotos al lado de la puerta de entrada** que dice: "As√≠ podr√≠a verse esta habitaci√≥n: Opci√≥n A (estilo r√∫stico), Opci√≥n B (estilo moderno), Opci√≥n C (vac√≠a)".
- **D√≥nde va:** Se a√±ade a la "puerta" (`Body()`, `Query()`, etc.). No toca el "plano" (el esquema JSON) directamente.
- **Formato:** Un **diccionario** de ejemplos, donde cada uno tiene nombre, descripci√≥n y valor. `openapi_examples = { "rustico": {...}, "moderno": {...} }`
- **Ventaja:** Swagger UI **lo entiende a la perfecci√≥n** y crea un men√∫ desplegable interactivo para que el usuario elija qu√© "foto" del cat√°logo quiere ver.

### **Tabla Comparativa Definitiva (¬°Para que no haya escapatoria!)**

| Caracter√≠stica         | `examples`                                        | `openapi_examples`                                                                             |
| :--------------------- | :------------------------------------------------ | :--------------------------------------------------------------------------------------------- |
| **Prop√≥sito**          | A√±adir ejemplos al **esquema JSON** (el "plano"). | A√±adir ejemplos a la **operaci√≥n de la ruta** (la "puerta").                                   |
| **Formato**            | `list` de diccionarios.                           | `dict` de diccionarios (con `summary`, `value`, etc.).                                         |
| **Soporte en Docs UI** | Limitado (puede que solo se vea uno).             | **Excelente** (crea un men√∫ desplegable).                                                      |
| **¬øCu√°ndo usarlo?**    | Para un √∫nico ejemplo sencillo y est√°ndar.        | **Para mostrar m√∫ltiples escenarios, casos de uso o ejemplos detallados en la documentaci√≥n.** |

**Conclusi√≥n Paranoica:** Si solo necesitas un ejemplo r√°pido, `examples` est√° bien. Pero si de verdad quieres que tu documentaci√≥n sea una obra de arte y guiar al usuario a trav√©s de diferentes posibilidades, **`openapi_examples` es tu mejor amigo**. Es la soluci√≥n pragm√°tica y poderosa para una limitaci√≥n del mundo real. ¬°Ahora ya lo sabes!

üî¥ **Fundamental**: Entender esta diferencia es clave para crear documentaci√≥n de API que no solo sea correcta, sino genuinamente √∫til y profesional. Separa a los que simplemente "usan el framework" de los que "dominan la herramienta".

---

## G - La Lecci√≥n de Historia: "¬øPor qu√© tanta complicaci√≥n?" üîµ

#### 1. **Introducci√≥n:**

Quiz√°s te preguntes: "¬øPor qu√© existen `example`, `examples` y `openapi_examples`? ¬øNo pod√≠an decidirse por uno?". La respuesta es: evoluci√≥n.

#### 2. **Desarrollo**:

1.  **El Principio (OpenAPI v2):** Al principio, solo exist√≠a `example` (en singular). Pod√≠as poner un solo ejemplo. Simple, pero limitado.
2.  **La Transici√≥n (OpenAPI v3.0):** OpenAPI (el est√°ndar) se dio cuenta de que un solo ejemplo no era suficiente. As√≠ que a√±adieron `examples` (en plural y con el formato de diccionario que ahora usa `openapi_examples`) para las operaciones de ruta. PERO, el est√°ndar subyacente para describir los datos (JSON Schema) todav√≠a no ten√≠a un campo para ejemplos.
3.  **La Convergencia (JSON Schema 2019-09):** ¬°Finalmente! El est√°ndar JSON Schema a√±adi√≥ su propio campo `examples` (en plural, pero como una lista simple).
4.  **El Presente (OpenAPI v3.1.0 y FastAPI moderno):** La √∫ltima versi√≥n de OpenAPI se alinea con la √∫ltima de JSON Schema. Ahora, el campo `examples` (la lista) es la forma "oficial" dentro del esquema. El otro `examples` (el diccionario) sigue existiendo en la operaci√≥n de la ruta por retrocompatibilidad y porque es muy √∫til.

**¬øY FastAPI c√≥mo encaja en todo esto?**

- FastAPI, en su infinita sabidur√≠a, te da acceso a ambos mundos.
- El par√°metro `examples` en `Body()` o `model_config` corresponde al `examples` del **JSON Schema** (la lista).
- Para evitar confusiones, FastAPI renombr√≥ el par√°metro para el `examples` espec√≠fico de la operaci√≥n de ruta a **`openapi_examples`** (el diccionario).

**En resumen:** No es que alguien quisiera complicarte la vida. Es el resultado de est√°ndares que evolucionan y de FastAPI d√°ndote las herramientas para usar tanto las caracter√≠sticas m√°s modernas como las m√°s compatibles con las herramientas de visualizaci√≥n.

üîµ **Espec√≠fico**: No necesitas memorizar las versiones. Solo entiende que la existencia de m√∫ltiples opciones es por la historia y la evoluci√≥n de los est√°ndares. Saber esto te da contexto y te ayuda a entender por qu√© las cosas son como son.

---

### **Checklist de Completitud**

¬°Misi√≥n cumplida! He rele√≠do meticulosamente el texto original y puedo confirmar con una certeza paranoica que cada concepto, sub-secci√≥n y detalle ha sido cubierto en esta cheat sheet. Desde la diferencia entre Pydantic v1 y v2, el uso de `Field`, `Body`, la crucial batalla entre `examples` y `openapi_examples`, hasta la lecci√≥n de historia final. No necesitas volver al texto original, ¬°todo est√° aqu√≠, explicado de la forma m√°s clara posible! ¬°Ahora a construir APIs incre√≠blemente bien documentadas
