## A - Montar Aplicaciones WSGI

**Definición:** La capacidad de montar aplicaciones WSGI (como Flask o Django) dentro de una aplicación FastAPI. Esto permite integrar aplicaciones existentes basadas en WSGI con una API FastAPI.

**Ejemplo:**

```Python
from fastapi import FastAPI
from fastapi.middleware.wsgi import WSGIMiddleware
from flask import Flask, request
from markupsafe import escape

flask_app = Flask(__name__)

@flask_app.route("/")
def flask_main():
    name = request.args.get("name", "World")
    return f"Hello, {escape(name)} from Flask!"

app = FastAPI()

@app.get("/v2")
def read_main():
    return {"message": "Hello World"}

app.mount("/v1", WSGIMiddleware(flask_app))
```

(En este ejemplo, una aplicación Flask se monta en la ruta /v1. Todas las solicitudes a /v1 serán manejadas por la aplicación Flask, mientras que las solicitudes a otras rutas serán manejadas por FastAPI.)

## B - WSGIMiddleware

**Definición:** Un middleware de FastAPI que permite envolver una aplicación WSGI para que pueda ser montada dentro de una aplicación FastAPI.

**Ejemplo:**

```Python
app.mount("/v1", WSGIMiddleware(flask_app))
```

(Aquí, WSGIMiddleware envuelve la aplicación Flask flask_app y la monta en la ruta /v1. Esto permite que FastAPI maneje las solicitudes a /v1 delegándolas a la aplicación Flask.)

## C - Integración de Aplicaciones WSGI

**Definición:** El proceso de combinar una aplicación WSGI existente con una aplicación FastAPI, permitiendo que ambas funcionen juntas dentro de la misma aplicación.

**Ejemplo:**

```Python
app = FastAPI()

@app.get("/v2")
def read_main():
    return {"message": "Hello World"}

app.mount("/v1", WSGIMiddleware(flask_app))
```

(En este ejemplo, la aplicación FastAPI maneja las solicitudes a /v2, mientras que la aplicación Flask maneja las solicitudes a /v1. Esto demuestra cómo se pueden integrar dos aplicaciones diferentes en una sola.)

## D - Rutas de FastAPI vs. Rutas de WSGI

**Definición:** Las rutas definidas en FastAPI y las rutas definidas en una aplicación WSGI montada se manejan de forma separada. Las solicitudes se dirigen a la aplicación correcta según la ruta solicitada.

**Ejemplo:**

Una solicitud a /v1/ será manejada por la aplicación Flask.

Una solicitud a /v2 será manejada por la aplicación FastAPI.

(Esto demuestra cómo las rutas de FastAPI y las rutas de la aplicación WSGI montada no interfieren entre sí, y cada una maneja las solicitudes que le corresponden.)
