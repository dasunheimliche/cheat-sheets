## A - Query Parameters

**Definición:**  
Los query parameters son parámetros que se envían en la URL después del símbolo `?`. FastAPI permite declarar validaciones adicionales y metadatos para estos parámetros usando `Query`.

**Ejemplo:**

```python
from fastapi import FastAPI, Query

app = FastAPI()

@app.get("/items/")
async def read_items(q: str | None = Query(default=None, max_length=50)):
    results = {"items": [{"item_id": "Foo"}, {"item_id": "Bar"}]}
    if q:
        results.update({"q": q})
    return results
```

**Descripción del ejemplo:**

- El parámetro `q` es opcional y tiene un valor por defecto de `None`.
- Si se proporciona, su longitud máxima no puede exceder 50 caracteres (`max_length=50`).

---

## B - Additional Validation (Validaciones Adicionales)

**Definición:**  
Puedes agregar validaciones adicionales a los query parameters, como longitud mínima, longitud máxima y expresiones regulares.

**Ejemplo:**

```python
from fastapi import FastAPI, Query

app = FastAPI()

@app.get("/items/")
async def read_items(q: str | None = Query(default=None, min_length=3, max_length=50)):
    results = {"items": [{"item_id": "Foo"}, {"item_id": "Bar"}]}
    if q:
        results.update({"q": q})
    return results
```

**Descripción del ejemplo:**

- `q` debe tener al menos 3 caracteres (`min_length=3`) y no más de 50 (`max_length=50`).
- Si no se cumple la validación, FastAPI devuelve un error claro.

---

## C - Regular Expressions (Expresiones Regulares)

**Definición:**  
Puedes usar expresiones regulares para validar el formato de los query parameters.

**Ejemplo:**

```python
from fastapi import FastAPI, Query

app = FastAPI()

@app.get("/items/")
async def read_items(q: str | None = Query(default=None, pattern="^fixedquery$")):
    results = {"items": [{"item_id": "Foo"}, {"item_id": "Bar"}]}
    if q:
        results.update({"q": q})
    return results
```

**Descripción del ejemplo:**

- `q` debe coincidir exactamente con `fixedquery` debido a la expresión regular `^fixedquery$`.
- Si no coincide, FastAPI devuelve un error.

---

## D - Default Values (Valores por Defecto)

**Definición:**  
Puedes definir valores por defecto para los query parameters. Si no se proporciona un valor, se usará el valor por defecto.

**Ejemplo:**

```python
from fastapi import FastAPI, Query

app = FastAPI()

@app.get("/items/")
async def read_items(q: str = Query(default="fixedquery", min_length=3)):
    results = {"items": [{"item_id": "Foo"}, {"item_id": "Bar"}]}
    if q:
        results.update({"q": q})
    return results
```

**Descripción del ejemplo:**

- Si no se proporciona `q`, se usará el valor por defecto `"fixedquery"`.
- Además, `q` debe tener al menos 3 caracteres.

---

## E - Required Parameters (Parámetros Obligatorios)

**Definición:**  
Puedes hacer que un query parameter sea obligatorio simplemente no asignándole un valor por defecto.

**Ejemplo:**

```python
from fastapi import FastAPI, Query

app = FastAPI()

@app.get("/items/")
async def read_items(q: str = Query(min_length=3)):
    results = {"items": [{"item_id": "Foo"}, {"item_id": "Bar"}]}
    if q:
        results.update({"q": q})
    return results
```

**Descripción del ejemplo:**

- `q` es obligatorio y debe tener al menos 3 caracteres.
- Si no se proporciona, FastAPI devuelve un error.

---

## F - Multiple Values (Valores Múltiples)

**Definición:**  
Puedes declarar un query parameter que acepte múltiples valores (una lista).

**Ejemplo:**

```python
from fastapi import FastAPI, Query

app = FastAPI()

@app.get("/items/")
async def read_items(q: list[str] | None = Query(default=None)):
    results = {"items": [{"item_id": "Foo"}, {"item_id": "Bar"}]}
    if q:
        results.update({"q": q})
    return results
```

**Descripción del ejemplo:**

- `q` puede ser una lista de cadenas, como en la URL: `http://127.0.0.1:8000/items/?q=foo&q=bar`.
- Si no se proporciona, `q` será `None`.

---

## G - Metadata (Metadatos)

**Definición:**  
Puedes agregar metadatos a los query parameters, como un título, descripción o alias.

**Ejemplo:**

```python
from fastapi import FastAPI, Query

app = FastAPI()

@app.get("/items/")
async def read_items(
    q: str | None = Query(
        default=None,
        title="Query string",
        description="Query string for searching items",
        alias="item-query",
        min_length=3,
    )
):
    results = {"items": [{"item_id": "Foo"}, {"item_id": "Bar"}]}
    if q:
        results.update({"q": q})
    return results
```

**Descripción del ejemplo:**

- `q` tiene un título, descripción y un alias (`item-query`).
- Además, debe tener al menos 3 caracteres.

---

## H - Deprecating Parameters (Parámetros Obsoletos)

**Definición:**  
Puedes marcar un query parameter como obsoleto para indicar que ya no se recomienda su uso.

**Ejemplo:**

```python
from fastapi import FastAPI, Query

app = FastAPI()

@app.get("/items/")
async def read_items(
    q: str | None = Query(
        default=None,
        deprecated=True,
        description="This parameter is deprecated, use 'search' instead",
    )
):
    results = {"items": [{"item_id": "Foo"}, {"item_id": "Bar"}]}
    if q:
        results.update({"q": q})
    return results
```

**Descripción del ejemplo:**

- `q` está marcado como obsoleto (`deprecated=True`).
- La documentación mostrará que este parámetro ya no se recomienda.

---

## I - Exclude from OpenAPI (Excluir de OpenAPI)

**Definición:**  
Puedes excluir un query parameter de la documentación OpenAPI generada.

**Ejemplo:**

```python
from fastapi import FastAPI, Query

app = FastAPI()

@app.get("/items/")
async def read_items(
    hidden_query: str | None = Query(default=None, include_in_schema=False)
):
    if hidden_query:
        return {"hidden_query": hidden_query}
    else:
        return {"hidden_query": "Not found"}
```

**Descripción del ejemplo:**

- `hidden_query` no aparecerá en la documentación OpenAPI (`include_in_schema=False`).
- Solo estará disponible para uso interno.
