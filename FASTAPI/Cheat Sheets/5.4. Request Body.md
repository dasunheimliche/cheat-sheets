## A - Request Body

**Definición:**  
El **request body** es un conjunto de datos que el cliente (por ejemplo, un navegador) envía a tu API. Estos datos se utilizan para crear, actualizar o modificar recursos en el servidor. FastAPI utiliza modelos de Pydantic para definir y validar el request body.

**Ejemplo:**

```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    name: str
    description: str | None = None
    price: float
    tax: float | None = None

@app.post("/items/")
async def create_item(item: Item):
    return item
```

**Descripción del ejemplo:**

- El cliente envía un JSON en el cuerpo de la solicitud (request body) con los campos `name`, `description`, `price` y `tax`.
- FastAPI valida automáticamente los datos y los convierte al tipo especificado en el modelo `Item`.
- Si los datos son inválidos, FastAPI devuelve un error detallado.

---

## B - Pydantic's `BaseModel`

**Definición:**  
`BaseModel` es una clase de Pydantic que se utiliza para definir modelos de datos. Estos modelos permiten validar y convertir automáticamente los datos entrantes en tipos de Python.

**Ejemplo:**

```python
from pydantic import BaseModel

class Item(BaseModel):
    name: str
    description: str | None = None
    price: float
    tax: float | None = None
```

**Descripción del ejemplo:**

- `name` es un campo obligatorio de tipo `str`.
- `description` y `tax` son campos opcionales (pueden ser `None`).
- `price` es un campo obligatorio de tipo `float`.

---

## C - Declaring a Request Body

**Definición:**  
Para usar un modelo de Pydantic como request body, simplemente declara el parámetro de la función con el tipo del modelo. FastAPI se encargará de todo lo demás.

**Ejemplo:**

```python
@app.post("/items/")
async def create_item(item: Item):
    return item
```

**Descripción del ejemplo:**

- El parámetro `item` es de tipo `Item`, por lo que FastAPI interpretará el cuerpo de la solicitud como un objeto JSON y lo validará según el modelo `Item`.

---

## D - Automatic Data Validation and Conversion

**Definición:**  
FastAPI valida automáticamente los datos del request body según el modelo de Pydantic. Si los datos no coinciden con el modelo, devuelve un error detallado. Además, convierte los tipos de datos (por ejemplo, de JSON a Python).

**Ejemplo:**

```python
@app.post("/items/")
async def create_item(item: Item):
    return item
```

**Descripción del ejemplo:**

- Si el cliente envía `{"name": "Foo", "price": 45.2}`, FastAPI validará que `name` es una cadena y `price` es un número.
- Si el cliente envía `{"name": "Foo", "price": "bar"}`, FastAPI devolverá un error porque `price` no es un número válido.

---

## E - Optional and Required Fields

**Definición:**  
En un modelo de Pydantic, los campos con un valor por defecto (como `None`) son opcionales. Los campos sin valor por defecto son obligatorios.

**Ejemplo:**

```python
class Item(BaseModel):
    name: str  # Obligatorio
    description: str | None = None  # Opcional
    price: float  # Obligatorio
    tax: float | None = None  # Opcional
```

**Descripción del ejemplo:**

- `name` y `price` son obligatorios. Si no se proporcionan, FastAPI devolverá un error.
- `description` y `tax` son opcionales. Si no se proporcionan, se usarán sus valores por defecto (`None`).

---

## F - Request Body + Path Parameters

**Definición:**  
Puedes combinar parámetros de ruta (path parameters) y un request body en la misma función. FastAPI distinguirá automáticamente entre ellos.

**Ejemplo:**

```python
@app.put("/items/{item_id}")
async def update_item(item_id: int, item: Item):
    return {"item_id": item_id, **item.dict()}
```

**Descripción del ejemplo:**

- `item_id` es un parámetro de ruta.
- `item` es el request body, validado según el modelo `Item`.
- La respuesta incluye tanto el `item_id` como los datos del `item`.

---

## G - Request Body + Path + Query Parameters

**Definición:**  
Puedes combinar request body, parámetros de ruta y query parameters en una misma función. FastAPI los distinguirá automáticamente.

**Ejemplo:**

```python
@app.put("/items/{item_id}")
async def update_item(item_id: int, item: Item, q: str | None = None):
    result = {"item_id": item_id, **item.dict()}
    if q:
        result.update({"q": q})
    return result
```

**Descripción del ejemplo:**

- `item_id` es un parámetro de ruta.
- `item` es el request body.
- `q` es un query parameter opcional.
- Si `q` se proporciona, se incluirá en la respuesta.

---

## H - Editor Support

**Definición:**  
Al usar modelos de Pydantic, obtienes soporte de autocompletado y verificación de tipos en editores como Visual Studio Code, PyCharm, etc. Esto mejora la productividad y reduce errores.

**Ejemplo:**

```python
@app.post("/items/")
async def create_item(item: Item):
    return item.name  # El editor sugiere autocompletar "name" y verifica el tipo.
```

**Descripción del ejemplo:**

- El editor reconoce que `item` es de tipo `Item` y sugiere autocompletar sus atributos (`name`, `description`, etc.).
- Si intentas acceder a un atributo que no existe, el editor mostrará un error.

---

## I - Automatic Documentation

**Definición:**  
FastAPI genera automáticamente documentación interactiva (OpenAPI) para tus endpoints, incluyendo los modelos de request body. Esto se muestra en Swagger UI y Redoc.

**Ejemplo:**

```python
@app.post("/items/")
async def create_item(item: Item):
    return item
```

**Descripción del ejemplo:**

- La documentación interactiva mostrará el modelo `Item` y sus campos.
- Los usuarios pueden probar el endpoint directamente desde la interfaz de Swagger UI.
