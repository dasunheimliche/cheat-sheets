## A - Modelos de Par√°metros de Cookies

#### 1. **Definici√≥n:**

Imagina que tienes un grupo de cookies que est√°n relacionadas entre s√≠, como las cookies de sesi√≥n o de seguimiento. En lugar de manejar cada cookie por separado, puedes usar un modelo Pydantic para declararlas. Esto te permite reutilizar ese modelo en varios lugares de tu c√≥digo y definir validaciones y metadatos para todas las cookies a la vez. ¬°Es como tener un superpoder para manejar cookies! üòé

#### 2. **Ejemplo:**

```python
from typing import Annotated
from fastapi import Cookie, FastAPI
from pydantic import BaseModel

app = FastAPI()

class Cookies(BaseModel):
    session_id: str
    fatebook_tracker: str | None = None
    googall_tracker: str | None = None

@app.get("/items/")
async def read_items(cookies: Annotated[Cookies, Cookie()]):
    return cookies
```

**Explicaci√≥n del ejemplo**:
Aqu√≠, creamos un modelo Pydantic llamado `Cookies` que define las cookies que esperamos recibir: `session_id`, `fatebook_tracker` y `googall_tracker`. Luego, en la funci√≥n `read_items`, usamos `Annotated` para indicar que el par√°metro `cookies` debe ser un objeto de tipo `Cookies` y que debe obtenerse de las cookies de la solicitud. FastAPI se encarga de extraer los valores de las cookies y crear el objeto `Cookies` por ti. ¬°Magia! ‚ú®

## B - Cookies con un Modelo Pydantic

#### 1. **Definici√≥n:**

Para usar un modelo Pydantic con cookies, primero defines el modelo con los campos que representan las cookies que esperas. Luego, en tu funci√≥n de ruta, declaras un par√°metro que usa ese modelo y lo anotas con `Cookie()`. FastAPI se encargar√° de extraer los valores de las cookies de la solicitud y crear una instancia de tu modelo.

#### 2. **Ejemplo:**

```python
from typing import Annotated
from fastapi import Cookie, FastAPI
from pydantic import BaseModel

app = FastAPI()

class Cookies(BaseModel):
    session_id: str
    fatebook_tracker: str | None = None
    googall_tracker: str | None = None

@app.get("/items/")
async def read_items(cookies: Annotated[Cookies, Cookie()]):
    return cookies
```

**Explicaci√≥n del ejemplo**:
En este ejemplo, el modelo `Cookies` define tres campos: `session_id` (obligatorio), `fatebook_tracker` y `googall_tracker` (opcionales). La funci√≥n `read_items` recibe un par√°metro `cookies` que es una instancia del modelo `Cookies`, y FastAPI se encarga de rellenarlo con los valores de las cookies de la solicitud. ¬°As√≠ de f√°cil! üöÄ

## C - Documentaci√≥n de Cookies

#### 1. **Definici√≥n:**

FastAPI genera autom√°ticamente documentaci√≥n interactiva para tu API, incluyendo la informaci√≥n sobre las cookies que tu API espera recibir. Puedes ver esta documentaci√≥n en `/docs`.

#### 2. **Ejemplo:**

![image](https://fastapi.tiangolo.com/img/tutorial/cookie-param-models/image01.png)

**Explicaci√≥n del ejemplo**:
La imagen muestra c√≥mo se ven las cookies definidas en la documentaci√≥n de FastAPI. Puedes ver los nombres de las cookies y sus tipos. Sin embargo, ten en cuenta que la interfaz de documentaci√≥n no puede enviar cookies directamente debido a las restricciones de los navegadores. ¬°Pero al menos puedes ver la documentaci√≥n! ü§ì

## D - Prohibir Cookies Extra

#### 1. **Definici√≥n:**

En algunos casos, es posible que quieras ser muy estricto con las cookies que tu API acepta. Puedes usar la configuraci√≥n de Pydantic para prohibir cualquier cookie adicional que no est√© definida en tu modelo. ¬°Tu API tiene el poder de controlar su propio consentimiento de cookies! üç™

#### 2. **Ejemplo:**

```python
from typing import Annotated
from fastapi import Cookie, FastAPI
from pydantic import BaseModel

app = FastAPI()

class Cookies(BaseModel):
    model_config = {"extra": "forbid"}
    session_id: str
    fatebook_tracker: str | None = None
    googall_tracker: str | None = None

@app.get("/items/")
async def read_items(cookies: Annotated[Cookies, Cookie()]):
    return cookies
```

**Explicaci√≥n del ejemplo**:
Aqu√≠, hemos a√±adido `model_config = {"extra": "forbid"}` al modelo `Cookies`. Esto significa que si un cliente env√≠a una cookie que no est√° definida en el modelo (por ejemplo, `santa_tracker`), FastAPI devolver√° un error. ¬°As√≠ te aseguras de que solo recibes las cookies que esperas! üõ°Ô∏è

## E - Error al Enviar Cookies Extra

#### 1. **Definici√≥n:**

Si has configurado tu modelo Pydantic para prohibir cookies extra y un cliente env√≠a una cookie no definida, FastAPI devolver√° un error indicando que esa cookie no est√° permitida.

#### 2. **Ejemplo:**

```json
{
  "detail": [
    {
      "type": "extra_forbidden",
      "loc": ["cookie", "santa_tracker"],
      "msg": "Extra inputs are not permitted",
      "input": "good-list-please"
    }
  ]
}
```

**Explicaci√≥n del ejemplo**:
Este es el error que FastAPI devolver√° si un cliente intenta enviar una cookie llamada `santa_tracker` cuando tu modelo no la espera. El mensaje de error te indica que la cookie extra no est√° permitida y te da el nombre de la cookie que caus√≥ el error. ¬°As√≠ puedes depurar f√°cilmente cualquier problema con las cookies! üêû
