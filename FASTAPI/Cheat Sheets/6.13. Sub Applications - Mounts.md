## A - Sub-aplicaciones en FastAPI

**Definición:**  
FastAPI permite crear sub-aplicaciones independientes que pueden ser "montadas" en una aplicación principal. Cada sub-aplicación tiene su propia documentación OpenAPI y su propia interfaz de usuario de documentación. Esto es útil para organizar grandes aplicaciones en módulos más pequeños y manejables.

**Ejemplo:**

```python
from fastapi import FastAPI

# Aplicación principal
app = FastAPI()

@app.get("/app")
def read_main():
    return {"message": "Hello World from main app"}

# Sub-aplicación
subapi = FastAPI()

@subapi.get("/sub")
def read_sub():
    return {"message": "Hello World from sub API"}

# Montar la sub-aplicación en la ruta /subapi
app.mount("/subapi", subapi)
```

**Descripción del ejemplo:**  
Este código define una aplicación principal (`app`) y una sub-aplicación (`subapi`). La sub-aplicación se monta en la ruta `/subapi`, lo que significa que todas las rutas de la sub-aplicación estarán prefijadas con `/subapi`.

---

## B - Montar una sub-aplicación

**Definición:**  
Montar una sub-aplicación significa agregarla a una ruta específica de la aplicación principal. La sub-aplicación maneja todas las solicitudes bajo esa ruta, y sus rutas y operaciones son independientes de las de la aplicación principal.

**Ejemplo:**

```python
from fastapi import FastAPI

# Aplicación principal
app = FastAPI()

@app.get("/app")
def read_main():
    return {"message": "Hello World from main app"}

# Sub-aplicación
subapi = FastAPI()

@subapi.get("/sub")
def read_sub():
    return {"message": "Hello World from sub API"}

# Montar la sub-aplicación en la ruta /subapi
app.mount("/subapi", subapi)
```

**Descripción del ejemplo:**  
Aquí, la sub-aplicación `subapi` se monta en la ruta `/subapi`. Esto significa que la ruta `/sub` de la sub-aplicación estará disponible en `/subapi/sub`.

---

## C - Documentación automática para sub-aplicaciones

**Definición:**  
Cada sub-aplicación montada tiene su propia documentación OpenAPI y su propia interfaz de usuario de documentación. Esto permite que la aplicación principal y las sub-aplicaciones tengan documentación separada y accesible en diferentes rutas.

**Ejemplo:**

1.  **Documentación de la aplicación principal:**  
    Accede a `http://127.0.0.1:8000/docs`.
2.  **Documentación de la sub-aplicación:**  
    Accede a `http://127.0.0.1:8000/subapi/docs`.

**Descripción del ejemplo:**  
La aplicación principal muestra su documentación en `/docs`, mientras que la sub-aplicación muestra su documentación en `/subapi/docs`. Ambas interfaces son independientes y muestran solo las rutas y operaciones de su respectiva aplicación.

---

## D - `root_path` en sub-aplicaciones

**Definición:**  
Cuando montas una sub-aplicación, FastAPI utiliza el mecanismo `root_path` de la especificación ASGI para comunicar la ruta base de la sub-aplicación. Esto permite que la sub-aplicación sepa que debe usar ese prefijo de ruta para su documentación y otras operaciones.

**Ejemplo:**

```python
from fastapi import FastAPI

# Aplicación principal
app = FastAPI()

# Sub-aplicación
subapi = FastAPI()

@subapi.get("/sub")
def read_sub():
    return {"message": "Hello World from sub API"}

# Montar la sub-aplicación en la ruta /subapi
app.mount("/subapi", subapi)
```

**Descripción del ejemplo:**  
En este caso, FastAPI maneja automáticamente el `root_path` para la sub-aplicación, asegurando que todas las rutas y la documentación estén correctamente prefijadas con `/subapi`.

---

## E - Uso de sub-aplicaciones con proxies

**Definición:**  
El `root_path` también es útil cuando se trabaja detrás de un proxy inverso. FastAPI maneja automáticamente el `root_path` para asegurarse de que las rutas y la documentación funcionen correctamente, incluso cuando la aplicación está detrás de un proxy.

**Ejemplo:**

```python
from fastapi import FastAPI

# Aplicación principal
app = FastAPI()

# Sub-aplicación
subapi = FastAPI()

@subapi.get("/sub")
def read_sub():
    return {"message": "Hello World from sub API"}

# Montar la sub-aplicación en la ruta /subapi
app.mount("/subapi", subapi)
```

**Descripción del ejemplo:**  
Si la aplicación está detrás de un proxy inverso, FastAPI ajusta automáticamente el `root_path` para que las rutas y la documentación funcionen correctamente.
