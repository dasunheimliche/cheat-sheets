## A - Sub-Applications

**Definición:** Aplicaciones FastAPI independientes que se "montan" dentro de una aplicación FastAPI principal. Cada subaplicación tiene su propio conjunto de rutas y documentación (OpenAPI y UI de docs) separadas.

**Ejemplo:**

```Python
from fastapi import FastAPI

# Aplicación principal
app = FastAPI()

@app.get("/main")
def read_main():
    return {"message": "Hola desde la app principal"}

# Sub-aplicación
sub_app = FastAPI()

@sub_app.get("/sub")
def read_sub():
    return {"message": "Hola desde la sub-app"}

# Montar la sub-aplicación en la app principal en la ruta "/subapi"
app.mount("/subapi", sub_app)
```

(En este ejemplo, app es la aplicación principal y sub_app es una sub-aplicación que se monta en la ruta /subapi. La ruta /main es manejada por la app principal y /sub por la sub-aplicación montada en /subapi/sub. )

## B - Mounting (Montaje)

**Definición:** El proceso de agregar una sub-aplicación FastAPI a una ruta específica dentro de la aplicación principal. La sub-aplicación manejará todas las peticiones que empiecen por esa ruta, operando de forma independiente.

**Ejemplo:**

```Python
from fastapi import FastAPI

app = FastAPI()
sub_app = FastAPI()

#Sub aplicación
@sub_app.get("/items")
def read_items():
    return {"items": ["item1", "item2"]}

# Montar la sub-aplicación en la app principal en /api
app.mount("/api", sub_app)

#Ahora todas las peticiones a /api/items serán manejadas por la sub-app
```

(Aquí, la aplicación sub_app, que tiene la ruta /items, se monta en la ruta /api de la aplicación principal. La sub aplicación maneja todas las peticiones a /api/items.)

## C - Path Operations de Sub-Aplicaciones

**Definición:** Las rutas (ej: /items) definidas dentro de la sub-aplicación. Son manejadas solo por la sub-aplicación, y son independientes de las path operations de la aplicación principal.

**Ejemplo:**

```Python
from fastapi import FastAPI

app = FastAPI() #Aplicación principal

@app.get("/main_route")
def main_op():
    return {"message": "Ruta de la app principal"}

sub_app = FastAPI() # Sub-Aplicación

@sub_app.get("/sub_route")
def sub_op():
   return {"message":"Ruta de la sub-app"}

app.mount("/subapi",sub_app) #Montaje de la sub-app en /subapi
```

(En este código, /main_route es una operation path de la aplicación principal, mientras que /sub_route es una operation path de la sub-aplicación. Esta última estará disponible en /subapi/sub_route.)

## D - Documentación API (OpenAPI) Independiente

**Definición:** Cada aplicación (principal y subaplicaciones) tiene su propia interfaz de usuario de documentación (Swagger UI o ReDoc) y su propia especificación OpenAPI (JSON). La UI de docs para la sub-aplicación está accesible a través de la ruta donde se montó, agregando /docs.

**Ejemplo:**

Aplicación principal: http://127.0.0.1:8000/docs

Sub-aplicación montada en /subapi: http://127.0.0.1:8000/subapi/docs

(Cada URL muestra la documentación de la API correspondiente. La documentación de la sub-app incluye solo sus propias rutas y esquemas.)

## E - root_path (Ruta Raíz)

**Definición:** Un mecanismo proporcionado por la especificación ASGI para comunicar la ruta donde se monta una sub-aplicación. FastAPI lo gestiona automáticamente, asegurando que las rutas en la sub-aplicación (y su documentación) funcionen correctamente con el prefijo necesario.

**Ejemplo (implicito):**

```Python
# Ejemplo anterior de montaje de sub-aplicación
app.mount("/subapi", sub_app)
```

(Internamente, FastAPI utiliza root_path para que la sub-aplicación sepa que su punto de partida es /subapi. Esto afecta la generación de URLs, como la de documentación /subapi/docs.)

Nota: Este concepto es más técnico y se gestiona automáticamente, por lo que se incluye como información de trasfondo, pero no requiere ejemplos concretos adicionales.
