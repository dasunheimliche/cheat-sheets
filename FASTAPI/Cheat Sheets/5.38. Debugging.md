## A - Debugging en FastAPI

**Definición:**  
El proceso de debugging (depuración) en FastAPI te permite identificar y corregir errores en tu aplicación. Puedes usar herramientas como **Visual Studio Code** o **PyCharm** para conectar un depurador y ejecutar tu aplicación paso a paso, deteniéndote en puntos específicos (breakpoints) para inspeccionar el estado del programa.

---

## B - Ejecutar `uvicorn` directamente

**Definición:**  
Para facilitar el debugging, puedes ejecutar el servidor **Uvicorn** directamente desde tu código FastAPI. Esto te permite iniciar la aplicación desde el depurador y detenerte en los breakpoints que definas.

**Ejemplo:**

```python
import uvicorn
from fastapi import FastAPI

app = FastAPI()

@app.get("/")
def root():
    a = "a"
    b = "b" + a
    return {"hello world": b}

if __name__ == "__main__":
    uvicorn.run(app, host="0.0.0.0", port=8000)
```

**Descripción del ejemplo:**

- `uvicorn.run(app, host="0.0.0.0", port=8000)`: Inicia el servidor Uvicorn con tu aplicación FastAPI.
- `if __name__ == "__main__":`: Asegura que el servidor solo se inicie si el archivo se ejecuta directamente (no cuando se importa).

---

## C - Uso de `__name__ == "__main__"`

**Definición:**  
El bloque `if __name__ == "__main__":` es una convención en Python que permite ejecutar código solo cuando el archivo se ejecuta directamente, no cuando se importa como un módulo.

**Ejemplo:**

```python
if __name__ == "__main__":
    print("Este archivo se está ejecutando directamente.")
else:
    print("Este archivo se está importando como un módulo.")
```

**Descripción del ejemplo:**

- Si ejecutas el archivo con `python mi_archivo.py`, se imprimirá: `"Este archivo se está ejecutando directamente."`.
- Si importas el archivo desde otro script, se imprimirá: `"Este archivo se está importando como un módulo."`.

---

## D - Configuración del depurador en Visual Studio Code

**Definición:**  
En **Visual Studio Code**, puedes configurar el depurador para ejecutar tu aplicación FastAPI y detenerte en los breakpoints.

**Pasos para configurar:**

1.  Abre el panel "Debug" (Depuración).
2.  Haz clic en "Add configuration..." (Añadir configuración).
3.  Selecciona "Python".
4.  Ejecuta el depurador con la opción "`Python: Current File (Integrated Terminal)`".

**Resultado:**  
El servidor Uvicorn se iniciará, y podrás detenerte en los breakpoints para inspeccionar variables y el flujo del programa.

---

## E - Configuración del depurador en PyCharm

**Definición:**  
En **PyCharm**, también puedes configurar el depurador para ejecutar tu aplicación FastAPI y depurar el código.

**Pasos para configurar:**

1.  Abre el menú "Run" (Ejecutar).
2.  Selecciona la opción "Debug..." (Depurar).
3.  Elige el archivo que deseas depurar (por ejemplo, `main.py`).

**Resultado:**  
El servidor Uvicorn se iniciará, y podrás detenerte en los breakpoints para inspeccionar el estado de la aplicación.

---

## F - Ejemplo de debugging con breakpoints

**Definición:**  
Un breakpoint es un punto en el código donde el depurador se detiene para permitirte inspeccionar el estado de las variables y el flujo del programa.

**Ejemplo:**

```python
@app.get("/")
def root():
    a = "a"  # Breakpoint aquí
    b = "b" + a  # Breakpoint aquí
    return {"hello world": b}  # Breakpoint aquí
```

**Descripción del ejemplo:**

- Coloca breakpoints en las líneas marcadas con comentarios.
- Cuando ejecutes la aplicación en modo depuración, el programa se detendrá en esos puntos.
- Puedes inspeccionar los valores de `a` y `b` antes de que se devuelva la respuesta.

---

## G - Depuración en acción

**Definición:**  
Al depurar, puedes ver el estado de las variables, el flujo del programa y los errores en tiempo real. Esto es especialmente útil para identificar problemas en lógica compleja o en interacciones con bases de datos y APIs externas.

**Ejemplo en Visual Studio Code:**  
![](https://fastapi.tiangolo.com/img/tutorial/debugging/image01.png)

**Ejemplo en PyCharm:**  
![](https://fastapi.tiangolo.com/img/tutorial/debugging/image02.png)

**Descripción del ejemplo:**

- En las imágenes, se muestra cómo el depurador se detiene en un breakpoint.
- Puedes ver el valor de las variables y continuar la ejecución paso a paso.
