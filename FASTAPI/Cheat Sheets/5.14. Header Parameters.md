## A - Header Parameters (Parámetros de cabecera)

**Definición:**  
En FastAPI, puedes definir parámetros de cabecera (headers) de la misma manera que defines parámetros de consulta (`Query`), ruta (`Path`) y cookies (`Cookie`). Los parámetros de cabecera se utilizan para leer los headers enviados en las solicitudes HTTP.

**Ejemplo:**

```python
from fastapi import FastAPI, Header

app = FastAPI()

@app.get("/items/")
async def read_items(user_agent: str | None = Header(default=None)):
    return {"User-Agent": user_agent}
```

**Descripción:**  
En este ejemplo, `user_agent` es un parámetro de cabecera. Si el header `User-Agent` está presente en la solicitud, su valor se asignará a la variable `user_agent`. Si no está presente, el valor será `None`.

---

## B - Import `Header` (Importar `Header`)

**Definición:**  
Para usar parámetros de cabecera, primero debes importar `Header` desde `fastapi`.

**Ejemplo:**

```python
from fastapi import FastAPI, Header

app = FastAPI()

@app.get("/items/")
async def read_items(user_agent: str | None = Header(default=None)):
    return {"User-Agent": user_agent}
```

**Descripción:**  
Aquí, `Header` se importa desde `fastapi` y se utiliza para declarar el parámetro `user_agent` como un header.

---

## C - Declare `Header` parameters (Declarar parámetros de cabecera)

**Definición:**  
Puedes declarar parámetros de cabecera de la misma manera que declaras parámetros de consulta, ruta o cookies. Puedes definir un valor predeterminado y agregar validaciones adicionales si es necesario.

**Ejemplo:**

```python
from fastapi import FastAPI, Header

app = FastAPI()

@app.get("/items/")
async def read_items(user_agent: str | None = Header(default=None)):
    return {"User-Agent": user_agent}
```

**Descripción:**  
En este ejemplo, `user_agent` es un parámetro de cabecera opcional con un valor predeterminado de `None`. Si el header no está presente en la solicitud, `user_agent` será `None`.

---

## D - Automatic conversion (Conversión automática)

**Definición:**  
Por defecto, `Header` convierte los nombres de los parámetros de guiones bajos (`_`) a guiones (`-`) para extraer y documentar los headers. Esto es útil porque los nombres de variables como `user-agent` no son válidos en Python, pero `user_agent` sí lo es.

**Ejemplo:**

```python
from fastapi import FastAPI, Header

app = FastAPI()

@app.get("/items/")
async def read_items(user_agent: str | None = Header(default=None)):
    return {"User-Agent": user_agent}
```

**Descripción:**  
Aquí, `user_agent` se convierte automáticamente a `User-Agent` en los headers de la solicitud.

---

## E - Disable automatic conversion (Deshabilitar la conversión automática)

**Definición:**  
Si necesitas deshabilitar la conversión automática de guiones bajos a guiones, puedes establecer el parámetro `convert_underscores` de `Header` en `False`.

**Ejemplo:**

```python
from fastapi import FastAPI, Header

app = FastAPI()

@app.get("/items/")
async def read_items(strange_header: str | None = Header(default=None, convert_underscores=False)):
    return {"strange_header": strange_header}
```

**Descripción:**  
En este ejemplo, `strange_header` no se convierte automáticamente, por lo que el nombre del header en la solicitud debe coincidir exactamente con `strange_header`.

---

## F - Duplicate headers (Cabeceras duplicadas)

**Definición:**  
Es posible recibir cabeceras duplicadas, es decir, el mismo header con múltiples valores. Puedes manejar esto declarando el tipo del parámetro como una lista (`list`).

**Ejemplo:**

```python
from fastapi import FastAPI, Header

app = FastAPI()

@app.get("/items/")
async def read_items(x_token: list[str] | None = Header(default=None)):
    return {"X-Token values": x_token}
```

**Descripción:**  
Aquí, `x_token` es una lista que puede contener múltiples valores si el header `X-Token` aparece más de una vez en la solicitud.

---

## G - Technical Details (Detalles técnicos)

**Definición:**  
`Header` es una clase hermana de `Path`, `Query` y `Cookie`, y todas heredan de la misma clase base `Param`. Cuando importas `Header`, `Query`, `Path`, etc., desde `fastapi`, en realidad estás importando funciones que devuelven clases especiales.

**Ejemplo:**

```python
from fastapi import FastAPI, Header

app = FastAPI()

@app.get("/items/")
async def read_items(user_agent: str | None = Header(default=None)):
    return {"User-Agent": user_agent}
```

**Descripción:**  
Aquí, `Header` se utiliza para declarar un parámetro de cabecera. Es importante usar `Header` para que FastAPI no confunda el parámetro con un parámetro de consulta.
