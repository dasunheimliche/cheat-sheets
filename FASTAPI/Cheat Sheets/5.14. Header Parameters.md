## A - Parámetros de Cabecera

**Definición:** Los parámetros de cabecera se definen de la misma manera que los parámetros de consulta (Query), de ruta (Path) y de cookies (Cookie) en FastAPI. Se utilizan para obtener valores de las cabeceras HTTP en las solicitudes.

**Ejemplo:**

```python
from typing import Annotated
from fastapi import FastAPI, Header

app = FastAPI()

@app.get("/items/")
async def read_items(user_agent: Annotated[str | None, Header()] = None):
    return {"User-Agent": user_agent}
```

## B - Importar Header

**Definición:** Para declarar parámetros de cabecera, primero debes importar Header desde fastapi.

**Ejemplo:**

```python
from fastapi import Header
```

## C - Declarar Parámetros de Cabecera

**Definición:** Los parámetros de cabecera se declaran usando la misma estructura que los parámetros de ruta y consulta. Puedes definir valores predeterminados y parámetros de validación adicionales.

**Ejemplo:**

```python
from typing import Annotated
from fastapi import FastAPI, Header

app = FastAPI()

@app.get("/items/")
async def read_items(user_agent: Annotated[str | None, Header()] = None):
    return {"User-Agent": user_agent}
```

## D - Detalles Técnicos

**Definición:** Header es una clase "hermana" de Path, Query y Cookie. Hereda de la misma clase común Param. Al importar Query, Path, Header y otros desde fastapi, en realidad estás importando funciones que devuelven clases especiales.

**Ejemplo:**

```python
from fastapi import Header, Query, Path
```

## E - Conversión Automática

**Definición:** Header tiene una funcionalidad adicional que convierte automáticamente los nombres de los parámetros de guiones bajos (\_) a guiones (-) para extraer y documentar las cabeceras. Las cabeceras HTTP no distinguen entre mayúsculas y minúsculas, por lo que puedes declararlas con el estilo estándar de Python (snake_case).

**Ejemplo:**

```python
from typing import Annotated
from fastapi import FastAPI, Header

app = FastAPI()

@app.get("/items/")
async def read_items(strange_header: Annotated[str | None, Header(convert_underscores=False)] = None):
    return {"strange_header": strange_header}
```

## F - Cabeceras Duplicadas

**Definición:** Es posible recibir cabeceras duplicadas, es decir, la misma cabecera con múltiples valores. Puedes definir estos casos usando una lista en la declaración del tipo. Recibirás todos los valores de la cabecera duplicada como una lista de Python.

**Ejemplo:**

```python
from typing import Annotated
from fastapi import FastAPI, Header

app = FastAPI()

@app.get("/items/")
async def read_items(x_token: Annotated[list[str] | None, Header()] = None):
    return {"X-Token values": x_token}
```
