## A - Response Model (Modelo de Respuesta)

**Definición:**  
El `Response Model` es una forma de declarar el tipo de dato que una función de operación de ruta (path operation) devolverá. Esto permite a FastAPI validar, documentar y filtrar los datos de respuesta según el modelo definido. Puedes usar tipos como Pydantic models, listas, diccionarios, enteros, booleanos, etc.

**Ejemplo:**

```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    name: str
    description: str | None = None
    price: float
    tax: float | None = None

@app.post("/items/")
async def create_item(item: Item) -> Item:
    return item
```

**Descripción del ejemplo:**  
En este ejemplo, la función `create_item` devuelve un objeto de tipo `Item`. FastAPI valida que los datos devueltos coincidan con la estructura del modelo `Item`.

---

## B - `response_model` Parameter (Parámetro `response_model`)

**Definición:**  
El parámetro `response_model` se usa en el decorador de la operación de ruta (como `@app.get()`) para definir el modelo de respuesta. Es útil cuando el tipo de dato devuelto por la función no coincide exactamente con el tipo declarado, pero quieres que FastAPI valide y documente la respuesta según el modelo.

**Ejemplo:**

```python
@app.post("/items/", response_model=Item)
async def create_item(item: Item) -> dict:
    return item.dict()
```

**Descripción del ejemplo:**  
Aquí, la función devuelve un diccionario, pero el `response_model=Item` le dice a FastAPI que valide y documente la respuesta como si fuera un objeto `Item`.

---

## C - Data Filtering (Filtrado de Datos)

**Definición:**  
FastAPI puede filtrar los datos de respuesta para incluir solo los campos definidos en el `response_model`. Esto es útil para evitar enviar información sensible o innecesaria.

**Ejemplo:**

```python
class UserIn(BaseModel):
    username: str
    password: str

class UserOut(BaseModel):
    username: str

@app.post("/user/", response_model=UserOut)
async def create_user(user: UserIn):
    return user
```

**Descripción del ejemplo:**  
Aunque la función devuelve un objeto `UserIn` que incluye la contraseña, el `response_model=UserOut` asegura que solo se devuelva el campo `username`.

---

## D - `response_model_exclude_unset` (Excluir valores no establecidos)

**Definición:**  
Este parámetro excluye de la respuesta los campos que tienen valores por defecto y no han sido explícitamente establecidos. Es útil para evitar enviar datos redundantes.

**Ejemplo:**

```python
@app.get("/items/{item_id}", response_model=Item, response_model_exclude_unset=True)
async def read_item(item_id: str):
    return items[item_id]
```

**Descripción del ejemplo:**  
Si un campo como `description` no ha sido establecido y tiene un valor por defecto, no se incluirá en la respuesta.

---

## E - `response_model_include` y `response_model_exclude`

**Definición:**  
Estos parámetros permiten incluir o excluir campos específicos de la respuesta. `response_model_include` incluye solo los campos especificados, mientras que `response_model_exclude` excluye los campos especificados.

**Ejemplo:**

```python
@app.get("/items/{item_id}/name", response_model=Item, response_model_include={"name"})
async def read_item_name(item_id: str):
    return items[item_id]
```

**Descripción del ejemplo:**  
Solo se incluirá el campo `name` en la respuesta, excluyendo todos los demás.

---

## F - Herencia de Modelos

**Definición:**  
Puedes usar herencia de modelos para definir un modelo base y luego extenderlo con campos adicionales. Esto es útil para reutilizar código y mantener la consistencia en los tipos de datos.

**Ejemplo:**

```python
class BaseUser(BaseModel):
    username: str
    email: str

class UserIn(BaseUser):
    password: str

@app.post("/user/")
async def create_user(user: UserIn) -> BaseUser:
    return user
```

**Descripción del ejemplo:**  
La función devuelve un objeto `UserIn`, pero el tipo de retorno es `BaseUser`, lo que permite a FastAPI filtrar los campos no deseados (como `password`).

---

## G - Respuestas Directas (Response Directly)

**Definición:**  
Puedes devolver directamente una respuesta HTTP personalizada, como `JSONResponse` o `RedirectResponse`, sin usar un modelo Pydantic.

**Ejemplo:**

```python
from fastapi.responses import JSONResponse

@app.get("/portal")
async def get_portal() -> JSONResponse:
    return JSONResponse(content={"message": "Here's your portal."})
```

**Descripción del ejemplo:**  
La función devuelve una respuesta JSON personalizada sin necesidad de un modelo Pydantic.

---

## H - Deshabilitar el Response Model

**Definición:**  
Puedes deshabilitar la generación del `response_model` estableciendo `response_model=None`. Esto es útil cuando necesitas anotar el tipo de retorno para herramientas de desarrollo, pero no quieres que FastAPI valide o filtre la respuesta.

**Ejemplo:**

```python
@app.get("/portal", response_model=None)
async def get_portal() -> dict:
    return {"message": "Here's your portal."}
```

**Descripción del ejemplo:**  
FastAPI no validará ni filtrará la respuesta, pero las herramientas de desarrollo seguirán reconociendo el tipo de retorno.
