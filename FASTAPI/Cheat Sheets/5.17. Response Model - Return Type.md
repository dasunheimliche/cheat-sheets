## A - Modelos de Respuesta

**Definición:** Puedes declarar el tipo de datos que se utilizará para la respuesta anotando el tipo de retorno de la función de operación de ruta. Puedes usar anotaciones de tipo de la misma manera que lo harías para los datos de entrada en los parámetros de la función.

**Ejemplo:**

```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    name: str
    description: str | None = None
    price: float
    tax: float | None = None
    tags: list[str] = []

@app.post("/items/")
async def create_item(item: Item) -> Item:
    return item

@app.get("/items/")
async def read_items() -> list[Item]:
    return [Item(name="Portal Gun", price=42.0), Item(name="Plumbus", price=32.0)]
```

## B - Parámetro response_model

**Definición:** El parámetro response_model se utiliza en los decoradores de operaciones de ruta para declarar el modelo de respuesta. Esto permite que FastAPI valide, documente y filtre los datos de salida según el modelo declarado.

**Ejemplo:**

```python
from typing import Any
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    name: str
    description: str | None = None
    price: float
    tax: float | None = None
    tags: list[str] = []

@app.post("/items/", response_model=Item)
async def create_item(item: Item) -> Any:
    return item

@app.get("/items/", response_model=list[Item])
async def read_items() -> Any:
    return [{"name": "Portal Gun", "price": 42.0}, {"name": "Plumbus", "price": 32.0}]
```

## C - Prioridad de response_model

**Definición:** Si declaras tanto un tipo de retorno como un response_model, el response_model tendrá prioridad y será utilizado por FastAPI para la validación y documentación de datos.

**Ejemplo:**

```python
from typing import Any
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class UserIn(BaseModel):
    username: str
    password: str
    email: str
    full_name: str | None = None

class UserOut(BaseModel):
    username: str
    email: str
    full_name: str | None = None

@app.post("/user/", response_model=UserOut)
async def create_user(user: UserIn) -> Any:
    return user
```

## D - Excluir valores no establecidos

**Definición:** Puedes usar el parámetro response_model_exclude_unset=True para excluir los valores predeterminados que no se hayan establecido explícitamente en la respuesta.

**Ejemplo:**

```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    name: str
    description: str | None = None
    price: float
    tax: float = 10.5
    tags: list[str] = []

items = {
    "foo": {"name": "Foo", "price": 50.2},
    "bar": {"name": "Bar", "description": "The bartenders", "price": 62, "tax": 20.2},
    "baz": {"name": "Baz", "description": None, "price": 50.2, "tax": 10.5, "tags": []},
}

@app.get("/items/{item_id}", response_model=Item, response_model_exclude_unset=True)
async def read_item(item_id: str):
    return items[item_id]
```

## E - Incluir y excluir campos específicos

**Definición:** Puedes usar los parámetros response_model_include y response_model_exclude para incluir o excluir campos específicos en la respuesta.

**Ejemplo:**

```python
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()

class Item(BaseModel):
    name: str
    description: str | None = None
    price: float
    tax: float = 10.5

items = {
    "foo": {"name": "Foo", "price": 50.2},
    "bar": {"name": "Bar", "description": "The Bar fighters", "price": 62, "tax": 20.2},
    "baz": {"name": "Baz", "description": "There goes my baz", "price": 50.2, "tax": 10.5},
}

@app.get("/items/{item_id}/name", response_model=Item, response_model_include={"name", "description"})
async def read_item_name(item_id: str):
    return items[item_id]

@app.get("/items/{item_id}/public", response_model=Item, response_model_exclude={"tax"})
async def read_item_public_data(item_id: str):
    return items[item_id]
```
