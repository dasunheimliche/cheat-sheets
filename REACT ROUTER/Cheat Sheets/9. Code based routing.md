## A - **Antes de Empezar (¬°Importante!)** ‚ö†Ô∏è

#### 1. **Definici√≥n:**

Si est√°s usando **File-Based Routing**, ¬°olv√≠date de esto! Esta gu√≠a es solo para **Code-Based Routing**.

#### 2. **Advertencia para Novatos:**

**File-Based Routing es la forma RECOMENDADA** en TanStack Router. Si no est√°s seguro de cu√°l usar, lee primero la gu√≠a de File-Based Routing. Si a√∫n as√≠ prefieres el c√≥digo, ¬°adelante!, pero lee la gu√≠a de File-Based Routing primero para entender los conceptos b√°sicos.

#### 3. **En resumen:**

Code-Based Routing es una opci√≥n m√°s manual, pero si entiendes File-Based Routing, ¬°esto ser√° pan comido!

---

## B - **Route Trees (√Årboles de Rutas)** üå≥

#### 1. **Definici√≥n:**

Tanto en Code-Based como en File-Based Routing, usamos **√°rboles de rutas**. Imagina un √°rbol geneal√≥gico, pero de rutas web. Este √°rbol organiza c√≥mo se relacionan las rutas entre s√≠ y c√≥mo se mostrar√°n tus componentes. La √∫nica diferencia aqu√≠ es que, en lugar de usar carpetas y archivos, ¬°lo hacemos con c√≥digo!

#### 2. **Ejemplo:**

**File-Based Routing (carpetas y archivos):**

```
routes/
‚îú‚îÄ‚îÄ __root.tsx
‚îú‚îÄ‚îÄ index.tsx
‚îú‚îÄ‚îÄ about.tsx
‚îú‚îÄ‚îÄ posts/
‚îÇ   ‚îú‚îÄ‚îÄ index.tsx
‚îÇ   ‚îú‚îÄ‚îÄ $postId.tsx
‚îú‚îÄ‚îÄ posts.$postId.edit.tsx
‚îú‚îÄ‚îÄ settings/
‚îÇ   ‚îú‚îÄ‚îÄ profile.tsx
‚îÇ   ‚îú‚îÄ‚îÄ notifications.tsx
‚îú‚îÄ‚îÄ _layout.tsx
‚îú‚îÄ‚îÄ _layout/
‚îÇ   ‚îú‚îÄ‚îÄ layout-a.tsx
‚îú‚îÄ‚îÄ ‚îú‚îÄ‚îÄ layout-b.tsx
‚îú‚îÄ‚îÄ files/
‚îÇ   ‚îú‚îÄ‚îÄ $.tsx
```

**Code-Based Routing (c√≥digo):**

```tsx
import { createRootRoute, createRoute } from "@tanstack/react-router";

const rootRoute = createRootRoute();

const indexRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: "/",
});

const aboutRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: "about",
});

const postsRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: "posts",
});

const postsIndexRoute = createRoute({
  getParentRoute: () => postsRoute,
  path: "/",
});

const postRoute = createRoute({
  getParentRoute: () => postsRoute,
  path: "$postId",
});

const postEditorRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: "posts/$postId/edit",
});

const settingsRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: "settings",
});

const profileRoute = createRoute({
  getParentRoute: () => settingsRoute,
  path: "profile",
});

const notificationsRoute = createRoute({
  getParentRoute: () => settingsRoute,
  path: "notifications",
});

const layoutRoute = createRoute({
  getParentRoute: () => rootRoute,
  id: "layout",
});

const layoutARoute = createRoute({
  getParentRoute: () => layoutRoute,
  path: "layout-a",
});

const layoutBRoute = createRoute({
  getParentRoute: () => layoutRoute,
  path: "layout-b",
});

const filesRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: "files/$",
});
```

**Explicaci√≥n del ejemplo:**

Vemos que la estructura es la misma, ¬°solo que ahora la definimos con c√≥digo en lugar de carpetas! `createRoute` es la funci√≥n m√°gica para crear cada ruta.

#### 3. **En resumen:**

√Årbol de rutas = organizaci√≥n de rutas. Code-Based Routing = √°rbol de rutas definido con c√≥digo.

---

## C - **File-Based vs Code-Based Routing (¬øCu√°l elegir?)** ‚öñÔ∏è

#### 1. **Definici√≥n:**

File-Based Routing es como una versi√≥n "avanzada" de Code-Based Routing. Usa el sistema de archivos (tus carpetas y archivos) para generar autom√°ticamente la estructura de rutas que vimos antes. ¬°Es como si el ordenador escribiera el c√≥digo de rutas por ti!

#### 2. **Conceptos Clave (¬°Repaso r√°pido!):**

Asumimos que ya conoces estos conceptos de File-Based Routing (si no, ¬°√©chale un vistazo a esa gu√≠a primero!):

- **Root Route (Ruta Ra√≠z):** La base de todo.
- **Static Routes (Rutas Est√°ticas):** Rutas normales como `/about`.
- **Index Routes (Rutas √çndice):** La ruta principal dentro de una secci√≥n, como `/posts` (sin nada m√°s).
- **Dynamic Route Segments (Segmentos de Ruta Din√°micos):** Partes de la URL que cambian, como `/posts/$postId` (el `$postId` es din√°mico).
- **Splat / Catch-All Routes (Rutas "Comod√≠n"):** Para capturar cualquier ruta que no coincida con otras, como `/files/$` (todo despu√©s de `/files/`).
- **Pathless Routes (Rutas sin Path):** Rutas que no cambian la URL, usadas para layouts o componentes contenedores.
- **Non-Nested Routes (Rutas No Anidadas):** Rutas que parecen estar dentro de otra secci√≥n en la URL, pero no lo est√°n en la estructura de componentes.
- **Not-Found Routes (Rutas "No Encontrado"):** Para cuando la URL no coincide con ninguna ruta definida (error 404).

#### 3. **En resumen:**

File-Based Routing = autom√°tico y f√°cil. Code-Based Routing = manual pero te da control total. File-Based usa el sistema de archivos para hacer el Code-Based por ti.

---

## D - **The Root Route (La Ruta Ra√≠z)** üè†

#### 1. **Definici√≥n:**

La **ruta ra√≠z** es la madre de todas las rutas. Es el punto de partida de tu √°rbol de rutas.

#### 2. **C√≥mo crearla en Code-Based:**

Usamos la funci√≥n `createRootRoute()`. ¬°Igual que en File-Based!

```tsx
import { createRootRoute } from "@tanstack/react-router";

const rootRoute = createRootRoute();
```

#### 3. **Notas Importantes:**

- **No necesitas exportarla:** A diferencia de File-Based Routing, aqu√≠ no es obligatorio exportar la `rootRoute` si no quieres. ¬°Pero ojo! No es buena idea tener todo tu √°rbol de rutas en un solo archivo gigante (aunque para ejemplos cortos, ¬°vale!).
- **`createRootRouteWithContext<TContext>()`:** Si necesitas inyectar dependencias en toda tu app de rutas de forma segura (con TypeScript), usa esta funci√≥n. M√°s info en la secci√≥n de [Contexto](https://tanstack.com/router/latest/docs/framework/react/guide/router-context).

#### 4. **En resumen:**

`createRootRoute()` = crea la ruta ra√≠z. Es la base de todo.

---

## E - **Anatom√≠a de una Ruta (createRoute)** ü¶¥

#### 1. **Definici√≥n:**

Todas las rutas, excepto la ra√≠z, se crean con la funci√≥n `createRoute()`. Esta funci√≥n necesita algunas opciones para saber c√≥mo funciona la ruta.

#### 2. **Ejemplo B√°sico:**

```tsx
const route = createRoute({
  getParentRoute: () => rootRoute, // ¬°Ruta padre!
  path: "/posts", // Path de la URL
  component: PostsComponent, // Componente a mostrar
});
```

#### 3. **Opciones Clave:**

- **`getParentRoute`:** ¬°Obligatoria! Es una funci√≥n que dice cu√°l es la ruta "padre" de esta ruta. Define la jerarqu√≠a del √°rbol de rutas.
- **`path`:** El segmento de la URL que esta ruta va a "escuchar" (comparar). Si la URL coincide con este path, ¬°esta ruta se activa! Necesaria para todas las rutas **que no sean la ra√≠z o pathless routes**.

#### 4. **Pregunta Frecuente (¬°Anticipando dudas!):**

**‚ùì‚ùì‚ùì "¬øTengo que pasar la ruta padre para cada ruta? ¬°Qu√© rollo!"**

**¬°S√≠!** Y tiene una raz√≥n de ser muy importante: **¬°Type Safety (Seguridad de Tipos) con TypeScript!** Si no le dices qui√©n es el padre, TypeScript no sabr√≠a qu√© tipos de datos manejar en tu ruta. ¬°Es para que todo sea m√°s seguro y sin errores!

#### 5. **En resumen:**

`createRoute()` = crea una ruta. `getParentRoute` = define el padre (jerarqu√≠a). `path` = define la URL que activa la ruta. ¬°Todo por la type safety!

---

## F - **El Opci√≥n `path` (Detalles Importantes)** üõ§Ô∏è

#### 1. **Definici√≥n:**

La opci√≥n `path` define c√≥mo se "activa" una ruta al navegar a una URL. Es la parte de la URL que TanStack Router compara con la ruta que definiste.

#### 2. **Slashes al Principio y al Final (Normalizaci√≥n):**

Cuando defines `path` en c√≥digo, ¬°no te preocupes por las barras `/` al principio o al final! TanStack Router las ignora y las normaliza internamente. Puedes ponerlas si quieres, pero √©l las ajustar√°.

#### 3. **Tabla de Normalizaci√≥n:**

| Path     | Normalized Path |
| :------- | :-------------- |
| `/`      | `/`             |
| `/about` | `about`         |
| `about/` | `about`         |
| `about`  | `about`         |
| `$`      | `$`             |
| `/$`     | `$`             |
| `/$/`    | `$`             |

**Explicaci√≥n de la tabla:**

Como ves, da igual si pones `/about`, `about/` o `about`, ¬°siempre se normaliza a `about`! Lo mismo con los splat routes (`$`).

#### 4. **En resumen:**

`path` = define la parte de la URL que activa la ruta. ¬°No te preocupes por las barras `/`! Router lo normaliza.

---

## G - **Construyendo el Route Tree Manualmente (addChildren)** üèóÔ∏è

#### 1. **Definici√≥n:**

En Code-Based Routing, no basta con decir qui√©n es el padre de cada ruta con `getParentRoute`. ¬°Tambi√©n tienes que construir el √°rbol de rutas final "a mano"! Esto se hace a√±adiendo cada ruta a la lista `children` de su ruta padre. En File-Based Routing, esto se hace autom√°ticamente, ¬°pero aqu√≠ no!

#### 2. **Ejemplo con `addChildren`:**

```tsx
/* prettier-ignore */
const routeTree = rootRoute.addChildren([
  indexRoute,
  aboutRoute,
  postsRoute.addChildren([ // A√±adiendo rutas hijas a 'postsRoute'
    postsIndexRoute,
    postRoute,
  ]),
  postEditorRoute,
  settingsRoute.addChildren([ // A√±adiendo rutas hijas a 'settingsRoute'
    profileRoute,
    notificationsRoute,
  ]),
  layoutRoute.addChildren([ // A√±adiendo rutas hijas a 'layoutRoute'
    layoutARoute,
    layoutBRoute,
  ]),
  filesRoute.addChildren([ // A√±adiendo rutas hijas a 'filesRoute'
    fileRoute,
  ]),
])
/* prettier-ignore-end */
```

**Explicaci√≥n del ejemplo:**

- `rootRoute.addChildren([...])`: A√±adimos rutas hijas directamente a la ruta ra√≠z.
- `postsRoute.addChildren([...])`: A√±adimos rutas hijas a la ruta `postsRoute`. ¬°Y as√≠ sucesivamente!
- `/* prettier-ignore */`: Esto es solo para que el formateador de c√≥digo no cambie el formato de la lista, ¬°para que sea m√°s f√°cil de leer!

#### 3. **En resumen:**

`addChildren()` = funci√≥n para construir el √°rbol de rutas manualmente. ¬°Conecta cada ruta con sus hijas!

---

## H - **Static Routes (Rutas Est√°ticas)** üìç

#### 1. **Definici√≥n:**

Rutas est√°ticas son las m√°s simples. Son rutas con paths fijos, como `/about`, `/contact`, etc. Siempre apuntan al mismo lugar.

#### 2. **Ejemplo en C√≥digo:**

```tsx
const aboutRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: "about", // Path est√°tico: 'about'
});
```

**Explicaci√≥n del ejemplo:**

Simplemente le das un `path` normal, ¬°sin cosas raras! En este caso, `path: 'about'` crea una ruta que se activa cuando la URL es `/about`.

#### 3. **En resumen:**

Static Routes = paths fijos y normales. ¬°F√°cil!

---

## I - **Index Routes (Rutas √çndice)** üè†Ô∏è

#### 1. **Definici√≥n:**

Las rutas √≠ndice son las rutas "principales" dentro de una secci√≥n. Por ejemplo, en `/posts`, la ruta √≠ndice ser√≠a la que se muestra cuando solo vas a `/posts` (sin nada m√°s despu√©s). En File-Based Routing, us√°bamos `index.tsx`.

#### 2. **Ejemplo en C√≥digo:**

```tsx
const postsRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: "posts", // Ruta padre: /posts
});

const postsIndexRoute = createRoute({
  getParentRoute: () => postsRoute, // ¬°Hija de 'postsRoute'!
  path: "/", // Path √≠ndice: '/'
});
```

**Explicaci√≥n del ejemplo:**

- `postsRoute` define la ruta padre `/posts`.
- `postsIndexRoute` es hija de `postsRoute` y tiene `path: '/'`. ¬°La clave est√° en el `/`! Esto significa que esta ruta se activa cuando la URL coincide con la ruta padre (`/posts`) **exactamente**, sin nada m√°s.

#### 3. **Diferencia con File-Based Routing:**

En File-Based Routing, `index.tsx` en la carpeta `posts` hac√≠a de ruta √≠ndice para `/posts`. Aqu√≠, usamos `path: '/'` dentro de `createRoute`.

#### 4. **En resumen:**

Index Routes = ruta principal de una secci√≥n. En Code-Based, usa `path: '/'`.

---

## J - **Dynamic Route Segments (Segmentos de Ruta Din√°micos)** üöÄ

#### 1. **Definici√≥n:**

Segmentos de ruta din√°micos son partes de la URL que pueden cambiar. Se usan para capturar informaci√≥n variable de la URL, como IDs de posts, nombres de usuario, etc. En File-Based Routing, us√°bamos `$postId.tsx`.

#### 2. **Ejemplo en C√≥digo:**

```tsx
const postsRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: "posts",
});

const postIdRoute = createRoute({
  getParentRoute: () => postsRoute,
  path: "$postId", // Segmento din√°mico: '$postId'
  loader: ({ params }) => fetchPost(params.postId), // Usando 'params' en el loader
  component: PostComponent,
});

function PostComponent() {
  const { postId } = postIdRoute.useParams(); // Usando 'useParams' en el componente
  return <div>Post ID: {postId}</div>;
}
```

**Explicaci√≥n del ejemplo:**

- `path: '$postId'`: El `$` al principio de `postId` lo convierte en un segmento din√°mico. Cualquier cosa que est√© en esa posici√≥n de la URL (despu√©s de `/posts/`) se capturar√° como el par√°metro `postId`.
- `loader: ({ params }) => fetchPost(params.postId)`: En el `loader` (funci√≥n para cargar datos), podemos acceder a los par√°metros din√°micos con `params.postId`.
- `postIdRoute.useParams()`: En el componente `PostComponent`, usamos `postIdRoute.useParams()` para acceder a los par√°metros din√°micos de forma type-safe.

#### 3. **Tip Pro:**

Si tu componente est√° en un archivo separado (code-split), usa `getRouteApi` para acceder a `useParams` sin importar la configuraci√≥n de `postIdRoute` directamente. M√°s info en [Code Splitting](https://tanstack.com/router/latest/docs/framework/react/guide/code-splitting#manually-accessing-route-apis-in-other-files-with-the-getrouteapi-helper).

#### 4. **En resumen:**

Dynamic Route Segments = partes variables de la URL. Usa `$` al principio del segmento en `path`. Accede a los par√°metros con `params` en `loader` y `useParams()` en componentes.

---

## K - **Splat / Catch-All Routes (Rutas "Comod√≠n")** ü™§

#### 1. **Definici√≥n:**

Rutas "comod√≠n" o "splat" capturan cualquier parte de la URL que no coincida con otras rutas m√°s espec√≠ficas. Son como un "caj√≥n desastre" para URLs que no encajan en otro sitio. En File-Based Routing, us√°bamos `$.tsx`.

#### 2. **Ejemplo en C√≥digo:**

```tsx
const filesRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: "files",
});

const fileRoute = createRoute({
  getParentRoute: () => filesRoute,
  path: "$", // Splat route: '$'
});
```

**Explicaci√≥n del ejemplo:**

- `path: '$'`: Un `$` solito como `path` crea una splat route. Captura todo lo que venga despu√©s de la ruta padre (`/files/` en este caso).

#### 3. **Ejemplo de URL y Par√°metros:**

Para la URL `/files/documents/hello-world`, el objeto `params` ser√°:

```js
{
  '_splat': 'documents/hello-world' // ¬°Todo lo capturado est√° en '_splat'!
}
```

**Explicaci√≥n:**

El par√°metro capturado se guarda bajo la clave `_splat` en el objeto `params`.

#### 4. **En resumen:**

Splat Routes = capturan "todo lo dem√°s" de la URL. Usa `path: '$'`. Accede a lo capturado con `params._splat`.

---

## L - **Pathless Routes (Rutas sin Path)** üëª

#### 1. **Definici√≥n:**

Pathless Routes son rutas que **no cambian la URL**. Se usan principalmente para layouts o componentes contenedores que envuelven a otras rutas. En File-Based Routing, us√°bamos `_layout.tsx`.

#### 2. **Ejemplo en C√≥digo:**

```tsx
const layoutRoute = createRoute({
  getParentRoute: () => rootRoute,
  id: "layout", // ¬°Usamos 'id' en lugar de 'path'!
  component: LayoutComponent,
});

const layoutARoute = createRoute({
  getParentRoute: () => layoutRoute,
  path: "layout-a", // Rutas hijas s√≠ tienen 'path'
});

const layoutBRoute = createRoute({
  getParentRoute: () => layoutRoute,
  path: "layout-b", // Rutas hijas s√≠ tienen 'path'
});

const routeTree = rootRoute.addChildren([
  layoutRoute.addChildren([layoutARoute, layoutBRoute]), // 'layoutRoute' es padre de 'layoutARoute' y 'layoutBRoute'
]);
```

**Explicaci√≥n del ejemplo:**

- `id: 'layout'`: En lugar de `path`, usamos `id: 'layout'`. Esto hace que `layoutRoute` sea una pathless route. **No afecta a la URL**.
- `layoutARoute` y `layoutBRoute` s√≠ tienen `path` y son hijas de `layoutRoute`.

#### 3. **Comportamiento en la URL:**

Ahora, tanto `/layout-a` como `/layout-b` mostrar√°n su contenido **dentro** del `LayoutComponent`. La URL solo cambiar√° a `/layout-a` o `/layout-b`, pero `LayoutComponent` siempre estar√° presente.

```tsx
// URL: /layout-a
<LayoutComponent>
  <LayoutAComponent />
</LayoutComponent>

// URL: /layout-b
<LayoutComponent>
  <LayoutBComponent />
</LayoutComponent>
```

#### 4. **Diferencia con File-Based Routing:**

En File-Based Routing, us√°bamos `_layout.tsx` para indicar una pathless route. Aqu√≠, usamos `id` en lugar de `path`.

#### 5. **En resumen:**

Pathless Routes = no cambian la URL, para layouts. Usa `id` en lugar de `path`.

---

## M - **Non-Nested Routes (Rutas No Anidadas)** üíî

#### 1. **Definici√≥n:**

Non-Nested Routes son rutas que, aunque en la URL parezcan estar dentro de otra secci√≥n, **no est√°n anidadas en la estructura de componentes**. Por ejemplo, `/posts/$postId/edit` podr√≠a parecer hija de `/posts/$postId`, pero podemos hacer que no lo sea. En File-Based Routing, us√°bamos `posts_/$postId/edit.tsx` (con un `_` despu√©s del nombre de la carpeta).

#### 2. **Ejemplo en C√≥digo:**

Queremos que `/posts/$postId/edit` **no** est√© dentro de `/posts`.

```tsx
// 'postEditorRoute' NO est√° anidada dentro de 'postsRoute'
const postEditorRoute = createRoute({
  getParentRoute: () => rootRoute, // ¬°Padre es 'rootRoute'!
  path: "posts/$postId/edit", // Path completo desde la ra√≠z
});

const postsRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: "posts",
});

const postRoute = createRoute({
  getParentRoute: () => postsRoute,
  path: "$postId",
});

const routeTree = rootRoute.addChildren([
  postEditorRoute, // 'postEditorRoute' directamente en la ra√≠z
  postsRoute.addChildren([postRoute]), // 'postsRoute' y sus hijas tambi√©n en la ra√≠z
]);
```

**Explicaci√≥n del ejemplo:**

- `postEditorRoute` tiene `getParentRoute: () => rootRoute` y `path: 'posts/$postId/edit'`. ¬°Est√° directamente bajo la ruta ra√≠z! Aunque el `path` contiene `posts`, **no est√° anidada dentro de `postsRoute` en el √°rbol de componentes**.
- `postsRoute` y sus hijas (`postRoute`) tambi√©n est√°n bajo la ruta ra√≠z, pero en una rama separada.

#### 3. **Resultado:**

- `/posts/$postId/edit` se renderizar√° **sin** el layout o componentes de `/posts` o `/posts/$postId`.
- `/posts` y `/posts/$postId` se renderizar√°n con su propia estructura (si la tienen definida).

#### 4. **Diferencia con File-Based Routing:**

En File-Based Routing, us√°bamos `posts_/$postId/edit.tsx` para indicar que no era anidada. Aqu√≠, lo logramos definiendo `getParentRoute: () => rootRoute` y el `path` completo.

#### 5. **En resumen:**

Non-Nested Routes = parecen anidadas en la URL, pero no en componentes. Define `getParentRoute` a la ruta donde _realmente_ quieres anidarla y usa el `path` completo.

---

## N - **404 / NotFoundRoutes (Rutas "No Encontrado")** üíî

#### 1. **Definici√≥n:**

NotFoundRoutes son para cuando la URL **no coincide con ninguna de las rutas que has definido**. Es la p√°gina de "Error 404 - No Encontrado".

#### 2. **C√≥mo configurarlas:**

La gu√≠a explica que la configuraci√≥n de NotFoundRoutes se ver√° en la gu√≠a de [Not Found Errors](https://tanstack.com/router/latest/docs/framework/react/guide/not-found-errors). ¬°As√≠ que tendremos que esperar a esa gu√≠a para m√°s detalles! üòâ

#### 3. **En resumen:**

NotFoundRoutes = para URLs que no coinciden con nada. ¬°M√°s info en la gu√≠a de "Not Found Errors"!
