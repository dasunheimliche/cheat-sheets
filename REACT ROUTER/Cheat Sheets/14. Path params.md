## A - ¿Qué son los Path Params?

#### 1. **Definición:**

Imagina que tienes una dirección web como esta: `blog/articulo/123`. La parte final, `123`, podría ser el ID del artículo que quieres ver. Un **Path Param** es justo eso: una forma de capturar dinámicamente partes de la URL, como ese "123", y usarlas en tu aplicación. Piensa en ellos como **variables** dentro de tu ruta web.

#### 2. **Ejemplo:**

Rutas con Path Params:

- `$postId` <br> _(Captura cualquier cosa que esté en esa posición como 'postId')_
- `about/$name` <br> _(Captura lo que venga después de "about/" como 'name')_
- `blog/$postId` <br> _(Captura lo que venga después de "blog/" como 'postId')_

**Explicación del ejemplo:**
En estos ejemplos, el símbolo `$` indica que lo que sigue es un Path Param. Cuando la URL coincide con estas rutas, el valor que esté en el lugar del Path Param se guarda en una variable con el nombre que le hayas dado (por ejemplo, `postId`, `name`, `teamId`).

#### 3. **Notas o advertencias:**

- Los Path Params solo capturan texto hasta la siguiente `/`. Si tienes una URL como `blog/articulo/123/comentarios`, el Path Param `$postId` en la ruta `blog/$postId` solo capturaría `123`.
- Son súper útiles para crear rutas dinámicas, como páginas de perfil de usuario (`/user/$userId`) o detalles de productos (`/product/$productId`).

---

## B - Path Params en Rutas Hijas

#### 1. **Definición:**

Una vez que defines un Path Param en una ruta, ¡buenas noticias! Todas las rutas "hijas" de esa ruta también pueden usar ese Path Param. Es como si la variable del Path Param se volviera disponible para toda la rama de rutas que cuelgan de la principal.

#### 2. **Ejemplo:**

Imagina que tienes una ruta para ver posts de un blog, usando un Path Param `$postId`:

- `posts.$postId.tsx` (Ruta padre)

Y quieres crear una ruta hija para los comentarios de ese post:

- `posts.$postId.comments.tsx` (Ruta hija)

¡La ruta hija `comments` puede usar el `postId` que se capturó en la ruta `posts.$postId`!

**Explicación del ejemplo:**
Esto es genial porque puedes mantener la jerarquía de tu aplicación web reflejada en tus rutas, y al mismo tiempo, compartir información importante como IDs entre rutas relacionadas.

#### 3. **Notas o advertencias:**

- Esto facilita mucho la creación de URLs anidadas que dependen de parámetros dinámicos.
- Piensa en la organización de tus rutas para aprovechar esta característica y evitar repetir la captura de Path Params innecesariamente.

---

## C - Path Params en `loaders`

#### 1. **Definición:**

Cuando usas Path Params, necesitas acceder a esos valores capturados, ¿verdad? En `@tanstack/react-router`, cuando defines un `loader` en tu ruta, los Path Params se te entregan como un objeto llamado `params`. Este objeto tiene como llaves los nombres que le diste a tus Path Params (como `postId`, `name`, etc.) y como valores, lo que se capturó de la URL.

#### 2. **Ejemplo:**

```tsx
export const Route = createFileRoute("/posts/$postId")({
  loader: async ({ params }) => {
    // params será algo como: { postId: '123' } si la URL es /posts/123
    const post = await fetchPost(params.postId); // Usamos params.postId para obtener el ID
    return post;
  },
});
```

**Explicación del ejemplo:**
En este código, dentro de la función `loader`, recibimos un objeto `{ params }`. Si la URL visitada es `/posts/123`, `params.postId` tendrá el valor `'123'`. Así, podemos usar este valor para, por ejemplo, buscar un post específico en una base de datos usando `fetchPost(params.postId)`.

#### 3. **Notas o advertencias:**

- El objeto `params` siempre estará ahí en tu `loader` si has definido Path Params en tu ruta.
- También puedes acceder a `params` en la función `beforeLoad`, de la misma manera.
- ¡Asegúrate de usar los nombres correctos de tus Path Params (como `params.postId`, no `params.postID`)!

---

## D - Path Params en Componentes

#### 1. **Definición:**

Si quieres usar los Path Params directamente en el componente que se renderiza para una ruta, `@tanstack/react-router` te da un "gancho" (hook) llamado `useParams`. Este hook, específico de cada `Route`, te permite acceder a los Path Params de esa ruta en particular.

#### 2. **Ejemplo:**

```tsx
export const Route = createFileRoute("/posts/$postId")({
  component: PostComponent,
});

function PostComponent() {
  const { postId } = Route.useParams(); // Usamos Route.useParams() para obtener postId
  return <div>Post ID: {postId}</div>;
}
```

**Explicación del ejemplo:**
Dentro de `PostComponent`, `Route.useParams()` nos devuelve un objeto con todos los Path Params de la ruta actual. En este caso, extraemos `postId` y lo mostramos en el componente. Si la URL es `/posts/456`, el componente mostrará "Post ID: 456".

#### 3. **Notas o advertencias:**

- Recuerda usar `Route.useParams()` **dentro** del componente asociado a esa `Route`.
- Este hook está "tipado", lo que significa que TypeScript sabrá qué Path Params esperar según la definición de tu ruta, ¡ayudando a evitar errores!
- Si tu componente está en un archivo separado (code-splitting), puedes usar `getRouteApi()` para acceder a `useParams` sin importar la configuración de la ruta directamente.

---

## E - Path Params Fuera de Rutas (Acceso Global)

#### 1. **Definición:**

A veces, necesitas acceder a los Path Params en componentes que no están directamente asociados a una ruta específica, o en lugares más "globales" de tu aplicación. Para esto, `@tanstack/react-router` exporta un `useParams` **global**. Pero, para usarlo así, necesitas decirle explícitamente que quieres acceder a los params de forma "no estricta" con `strict: false`.

#### 2. **Ejemplo:**

```tsx
import { useParams } from "@tanstack/react-router"; // Importamos useParams global

function MiComponenteGlobal() {
  const { postId } = useParams({ strict: false }); // Usamos useParams({ strict: false })
  return <div>Post ID (global): {postId || "No disponible"}</div>;
}
```

**Explicación del ejemplo:**
Aquí, importamos `useParams` directamente de `@tanstack/react-router`. Al usar `{ strict: false }`, le decimos que busque Path Params en cualquier ruta "ancestral" en la jerarquía de rutas. Si encuentra un `postId`, lo devuelve; si no, `postId` será `undefined` (por eso usamos `postId || 'No disponible'` para mostrar algo por defecto).

#### 3. **Notas o advertencias:**

- Usar `useParams({ strict: false })` puede ser útil, pero úsalo con cuidado. Puede hacer que el flujo de datos sea menos claro si se usa en exceso.
- Es mejor usar `Route.useParams()` dentro de los componentes de ruta siempre que sea posible para mantener la claridad y el tipado estricto.
- El `strict: false` es como decir "busca el param `postId` en cualquier ruta padre, si existe".

---

## F - Navegando con Path Params

#### 1. **Definición:**

Cuando quieres navegar a una ruta que tiene Path Params (por ejemplo, usando un `<Link>`), necesitas **proporcionar los valores** para esos Path Params. Puedes hacerlo de dos maneras: con un objeto o con una función.

#### 2. **Ejemplos:**

**a) Usando un objeto:**

```tsx
function MiComponente() {
  return (
    <Link to="/blog/$postId" params={{ postId: "123" }}>
      Ver Post 123
    </Link>
  );
}
```

**b) Usando una función:**

```tsx
function MiComponente() {
  return (
    <Link
      to="/blog/$postId"
      params={(prevParams) => ({ ...prevParams, postId: "123" })}
    >
      Ver Post 123
    </Link>
  );
}
```

**Explicación de los ejemplos:**

- **Objeto:** Simplemente pasas un objeto al prop `params` del `<Link>`. Las llaves del objeto deben coincidir con los nombres de tus Path Params (`postId` en este caso), y los valores son los que quieres usar en la URL.
- **Función:** Aquí, `params` recibe una función. Esta función recibe los `prevParams` (parámetros que ya estén en la URL) y debes devolver un nuevo objeto de params. Esto es útil si quieres mantener parámetros existentes y solo modificar o añadir algunos.

#### 3. **Notas o advertencias:**

- TypeScript te **obligará** a proporcionar los params necesarios cuando navegues a rutas con Path Params, ¡lo cual es genial para evitar errores!
- La función en `params` es útil para casos más avanzados donde necesitas manipular los parámetros de la URL de forma dinámica o mantener parámetros existentes al navegar.

---

## G - Caracteres Permitidos en Path Params

#### 1. **Definición:**

Por defecto, los Path Params se "escapan" usando `encodeURIComponent`. Esto significa que ciertos caracteres especiales se codifican para que sean seguros en la URL. Pero, si quieres permitir otros caracteres URI válidos (como `@` o `+`) en tus Path Params, puedes configurarlo en las opciones de tu `Router`.

#### 2. **Ejemplo:**

```tsx
import { createRouter } from "@tanstack/react-router";

const router = createRouter({
  // ... otras opciones
  pathParamsAllowedCharacters: ["@", "+"], // Permitimos '@' y '+' en Path Params
});
```

**Explicación del ejemplo:**
Al definir `pathParamsAllowedCharacters: ['@', '+']` en la configuración de tu router, le estás diciendo que además de los caracteres por defecto, también permita `@` y `+` dentro de los Path Params.

#### 3. **Notas o advertencias:**

- La lista de caracteres permitidos por defecto es: `; : @ & = + $ ,`.
- Si necesitas permitir otros caracteres, puedes extender esta lista con `pathParamsAllowedCharacters`.
- ¡Ten cuidado al permitir caracteres especiales! Asegúrate de entender las implicaciones de seguridad y cómo afecta a la estructura de tus URLs.
