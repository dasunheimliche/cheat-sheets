## A - Generación de Rutas Basada en Archivos

#### 1. **Definición:**

La generación de rutas basada en archivos es la forma recomendada de usar TanStack Router. Piensa en ella como una manera automática y organizada de definir las rutas de tu aplicación web simplemente creando archivos en una carpeta específica. ¡Es la opción más fácil y eficiente!

#### 2. **Scaffolding (Creación Rápida) de tu Proyecto:**

La forma más rápida de empezar es usando un comando que crea la estructura básica de tu proyecto TanStack Router por ti. Abre tu terminal y ejecuta uno de estos comandos:

```sh
npm create @tanstack/router@latest
# o
pnpm create @tanstack/router
# o
yarn create @tanstack/router
# o
bun create @tanstack/router
# o
deno init --npm @tanstack/router
```

**Explicación del ejemplo:**
Elige el comando que corresponda a tu gestor de paquetes favorito (npm, pnpm, yarn, bun, deno). Estos comandos te guiarán para crear un proyecto completo de TanStack Router con todo lo necesario configurado.

#### 3. **Configuración Manual:**

Si prefieres hacerlo a mano, aquí tienes los pasos:

##### a. **Instalación de Paquetes:**

Primero, instala TanStack Router, el plugin para Vite (si usas Vite) y las herramientas de desarrollo (Devtools). Ejecuta esto en tu terminal:

```sh
npm install @tanstack/react-router
npm install -D @tanstack/router-plugin @tanstack/router-devtools
# o (elige tu gestor de paquetes)
pnpm add @tanstack/react-router
pnpm add -D @tanstack/router-plugin @tanstack/router-devtools
# o
yarn add @tanstack/react-router
yarn add -D @tanstack/router-plugin @tanstack/router-devtools
# o
bun add @tanstack/react-router
bun add -D @tanstack/router-plugin @tanstack/router-devtools
# o
deno add npm:@tanstack/react-router npm:@tanstack/router-plugin npm:@tanstack/router-devtools
```

**Explicación del ejemplo:**
Este comando instala las librerías necesarias para usar TanStack Router en tu proyecto React. `@tanstack/react-router` es el core de Router para React, `@tanstack/router-plugin` es el plugin para Vite que facilita la generación de rutas basadas en archivos, y `@tanstack/router-devtools` son herramientas para ayudarte a depurar tus rutas.

##### b. **Configuración del Plugin de Vite:**

Si usas Vite (que es muy recomendable), configura el plugin de TanStack Router en tu archivo `vite.config.ts`:

```tsx
// vite.config.ts
import { defineConfig } from "vite";
import viteReact from "@vitejs/plugin-react";
import { TanStackRouterVite } from "@tanstack/router-plugin/vite";

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [
    TanStackRouterVite({ autoCodeSplitting: true }),
    viteReact(),
    // ...,
  ],
});
```

**Explicación del ejemplo:**
Aquí le decimos a Vite que use el plugin `TanStackRouterVite`. `autoCodeSplitting: true` es una opción que optimiza tu aplicación dividiendo el código en partes más pequeñas para que cargue más rápido.

##### c. **Creación de Archivos de Rutas:**

Crea estos archivos dentro de la carpeta `src/routes/`:

- `src/routes/__root.tsx`
- `src/routes/index.tsx`
- `src/routes/about.tsx`

**Explicación:**
Estos archivos definen tus rutas. `__root.tsx` es la ruta raíz, la base de todas las demás. `index.tsx` será tu página de inicio (ruta "/"), y `about.tsx` será la página "Acerca de" (ruta "/about").

##### d. **Contenido de `src/routes/__root.tsx`:**

Este archivo define el layout (estructura común) de tu aplicación, como la barra de navegación.

```tsx
import { createRootRoute, Link, Outlet } from "@tanstack/react-router";
import { TanStackRouterDevtools } from "@tanstack/router-devtools";

export const Route = createRootRoute({
  component: () => (
    <>
      <div className="p-2 flex gap-2">
        <Link to="/" className="[&.active]:font-bold">
          Home
        </Link>{" "}
        <Link to="/about" className="[&.active]:font-bold">
          About
        </Link>
      </div>
      <hr />
      <Outlet />
      <TanStackRouterDevtools />
    </>
  ),
});
```

**Explicación del ejemplo:**

- `createRootRoute` crea la ruta raíz.
- `Link` crea enlaces para navegar entre rutas (Home y About en este caso). `to="/"` indica la ruta de inicio y `to="/about"` la ruta "Acerca de". `[&.active]:font-bold` hace que el enlace activo se vea en negrita.
- `Outlet` es un componente especial donde se renderizarán los contenidos de las rutas hijas (como `index.tsx` y `about.tsx`).
- `TanStackRouterDevtools` añade las herramientas de desarrollo para el router, ¡muy útiles para depurar!

##### e. **Contenido de `src/routes/index.tsx`:**

Este archivo define el componente para la página de inicio.

```tsx
import { createLazyFileRoute } from "@tanstack/react-router";

export const Route = createLazyFileRoute("/")({
  component: Index,
});

function Index() {
  return (
    <div className="p-2">
      <h3>¡Bienvenido a Casa!</h3>
    </div>
  );
}
```

**Explicación del ejemplo:**

- `createLazyFileRoute('/')` crea una ruta para la ruta raíz ("/"). `Lazy` significa que el componente se cargará solo cuando sea necesario, optimizando el rendimiento.
- `component: Index` indica que el componente `Index` se renderizará cuando se acceda a esta ruta.
- La función `Index` simplemente devuelve un `div` con un mensaje de bienvenida.

##### f. **Contenido de `src/routes/about.tsx`:**

Este archivo define el componente para la página "Acerca de".

```tsx
import { createLazyFileRoute } from "@tanstack/react-router";

export const Route = createLazyFileRoute("/about")({
  component: About,
});

function About() {
  return <div className="p-2">¡Hola desde About!</div>;
}
```

**Explicación del ejemplo:**
Similar a `index.tsx`, pero esta vez para la ruta "/about". El componente `About` muestra un mensaje diferente.

##### g. **Modificación de `src/main.tsx`:**

Este archivo es el punto de entrada principal de tu aplicación React. Debes configurarlo para usar TanStack Router.

```tsx
import { StrictMode } from "react";
import ReactDOM from "react-dom/client";
import { RouterProvider, createRouter } from "@tanstack/react-router";

// Importa el árbol de rutas generado
import { routeTree } from "./routeTree.gen";

// Crea una nueva instancia del router
const router = createRouter({ routeTree });

// Registra la instancia del router para seguridad de tipos
declare module "@tanstack/react-router" {
  interface Register {
    router: typeof router;
  }
}

// Renderiza la aplicación
const rootElement = document.getElementById("root")!;
if (!rootElement.innerHTML) {
  const root = ReactDOM.createRoot(rootElement);
  root.render(
    <StrictMode>
      <RouterProvider router={router} />
    </StrictMode>
  );
}
```

**Explicación del ejemplo:**

- `import { routeTree } from './routeTree.gen'` importa el árbol de rutas generado automáticamente por TanStack Router a partir de tus archivos en `src/routes/`. **¡Importante!** Este archivo `routeTree.gen.ts` se genera automáticamente, no lo creas tú manualmente.
- `createRouter({ routeTree })` crea una instancia del router usando el árbol de rutas generado.
- `RouterProvider router={router}` hace que el router esté disponible para toda tu aplicación React. Envuelve tu aplicación con `RouterProvider`.
- El resto del código es configuración estándar de React para renderizar tu aplicación en el elemento HTML con el id "root". **Asegúrate de que tu `index.html` tenga un `<div id='root'></div>`**.

## B - Configuración de Rutas Basada en Código

#### 1. **Definición:**

En lugar de usar archivos, puedes definir tus rutas directamente en tu código usando funciones como `createRootRoute` y `createRoute`. Aunque es más flexible, para proyectos grandes se recomienda la generación basada en archivos por organización y rendimiento.

#### 2. **Ejemplo:**

Este ejemplo muestra cómo configurar las mismas rutas "Home" y "About" pero directamente en el código, todo en un solo archivo para simplificar:

```tsx
import { StrictMode } from "react";
import ReactDOM from "react-dom/client";
import {
  Outlet,
  RouterProvider,
  Link,
  createRouter,
  createRoute,
  createRootRoute,
} from "@tanstack/react-router";
import { TanStackRouterDevtools } from "@tanstack/router-devtools";

const rootRoute = createRootRoute({
  component: () => (
    <>
      <div className="p-2 flex gap-2">
        <Link to="/" className="[&.active]:font-bold">
          Home
        </Link>{" "}
        <Link to="/about" className="[&.active]:font-bold">
          About
        </Link>
      </div>
      <hr />
      <Outlet />
      <TanStackRouterDevtools />
    </>
  ),
});

const indexRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: "/",
  component: function Index() {
    return (
      <div className="p-2">
        <h3>¡Bienvenido a Casa!</h3>
      </div>
    );
  },
});

const aboutRoute = createRoute({
  getParentRoute: () => rootRoute,
  path: "/about",
  component: function About() {
    return <div className="p-2">¡Hola desde About!</div>;
  },
});

const routeTree = rootRoute.addChildren([indexRoute, aboutRoute]);

const router = createRouter({ routeTree });

declare module "@tanstack/react-router" {
  interface Register {
    router: typeof router;
  }
}

const rootElement = document.getElementById("app")!;
if (!rootElement.innerHTML) {
  const root = ReactDOM.createRoot(rootElement);
  root.render(
    <StrictMode>
      <RouterProvider router={router} />
    </StrictMode>
  );
}
```

**Explicación del ejemplo:**

- `createRootRoute` y `createRoute` se usan para definir las rutas directamente en el código.
- `getParentRoute: () => rootRoute` indica que `indexRoute` y `aboutRoute` son rutas hijas de `rootRoute`.
- `path: '/'` y `path: '/about'` definen las rutas.
- `component: ...` define los componentes para cada ruta.
- `rootRoute.addChildren([indexRoute, aboutRoute])` construye el árbol de rutas, indicando que `indexRoute` y `aboutRoute` son hijas de `rootRoute`.
- El resto del código es similar al ejemplo de generación basada en archivos: creación del router, registro para seguridad de tipos y renderizado de la aplicación.

**¡Importante!** Aunque este ejemplo pone todo en un solo archivo por simplicidad, para aplicaciones más grandes, ¡es mucho mejor dividir tus rutas en archivos separados para mantener el código organizado y mejorar el rendimiento!
