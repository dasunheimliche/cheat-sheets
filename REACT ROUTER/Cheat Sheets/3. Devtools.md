## A - Instalación de Devtools

#### 1. **Definición:**

Antes de empezar a usar las Devtools, necesitas instalarlas como una dependencia de desarrollo en tu proyecto. Esto significa que solo las usarás mientras desarrollas tu aplicación, no en la versión final que ven los usuarios.

#### 2. **Ejemplo:**

Abre tu terminal y ejecuta uno de estos comandos, dependiendo del gestor de paquetes que uses (npm, pnpm, yarn o bun):

```sh
npm install -D @tanstack/router-devtools
```

o

```sh
pnpm add -D @tanstack/router-devtools
```

o

```sh
yarn add -D @tanstack/router-devtools
```

o

```sh
bun add -D @tanstack/router-devtools
```

**Explicación del ejemplo:**

Estos comandos le dicen a tu gestor de paquetes que descargue e instale `@tanstack/router-devtools`. El flag `-D` o `-–dev` indica que es una dependencia de desarrollo.

#### 3. **Notas o advertencias:**

- Asegúrate de estar en el directorio raíz de tu proyecto cuando ejecutes estos comandos.
- Necesitarás Node.js y npm, pnpm, yarn o bun instalados en tu sistema para que esto funcione.

## B - Importar Devtools

#### 1. **Definición:**

Una vez instaladas, necesitas importar el componente `TanStackRouterDevtools` en tu código de React para poder usar las Devtools.

#### 2. **Ejemplo:**

En el archivo de tu componente React donde quieras usar las Devtools, añade la siguiente línea de importación:

```js
import { TanStackRouterDevtools } from "@tanstack/router-devtools";
```

**Explicación del ejemplo:**

Esta línea de código importa el componente `TanStackRouterDevtools` desde el paquete que acabas de instalar. Ahora puedes usar este componente en tu JSX.

#### 3. **Notas o advertencias:**

- Asegúrate de haber instalado el paquete `@tanstack/router-devtools` antes de intentar importarlo.

## C - Importar y usar Devtools solo en desarrollo

#### 1. **Definición:**

Es una buena práctica evitar incluir las Devtools en la versión de producción de tu aplicación, ya que no son necesarias para los usuarios finales y pueden aumentar el tamaño de tu bundle. Para hacer esto, puedes importar y usar las Devtools solo cuando estés en entorno de desarrollo.

#### 2. **Ejemplo:**

Puedes usar `React.lazy` y `Suspense` para cargar las Devtools de forma perezosa solo en desarrollo. Si no estás en desarrollo (producción), se renderiza un componente nulo, evitando que las Devtools se incluyan en el bundle de producción.

```tsx
import React, { Suspense } from "react";

const TanStackRouterDevtools =
  process.env.NODE_ENV === "production"
    ? () => null // No renderizar nada en producción
    : React.lazy(() =>
        // Carga perezosa en desarrollo
        import("@tanstack/router-devtools").then((res) => ({
          default: res.TanStackRouterDevtools,
        }))
      );

function App() {
  return (
    <div>
      {/* ... tu aplicación ... */}
      <Suspense fallback={null}>
        {" "}
        {/* fallback es null para que no renderice nada mientras carga */}
        <TanStackRouterDevtools />
      </Suspense>
    </div>
  );
}
```

**Explicación del ejemplo:**

- `process.env.NODE_ENV === 'production'`: Esta línea verifica si estás en modo de producción. `NODE_ENV` es una variable de entorno que suele establecerse automáticamente por herramientas como Webpack o Create React App.
- `? () => null`: Si estás en producción, `TanStackRouterDevtools` se define como un componente que no renderiza nada (`null`).
- `: React.lazy(...)`: Si no estás en producción (es decir, estás en desarrollo), se usa `React.lazy` para cargar el componente Devtools solo cuando sea necesario.
- `import('@tanstack/router-devtools').then(...)`: `React.lazy` espera una función que retorne una promesa que resuelva a un módulo con un `default` export que sea el componente. Aquí, importamos `@tanstack/router-devtools` y extraemos `TanStackRouterDevtools` de la respuesta.
- `<Suspense fallback={null}>`: `Suspense` es necesario para envolver componentes cargados con `React.lazy`. `fallback={null}` indica que no se muestre nada mientras se carga el componente.

#### 3. **Notas o advertencias:**

- Asegúrate de que tu entorno de desarrollo esté configurado para establecer `process.env.NODE_ENV` a `'development'` y tu entorno de producción a `'production'`. Herramientas como Create React App y la mayoría de los setups modernos ya hacen esto por defecto.
- `Suspense` requiere un fallback, aunque en este caso le pasamos `null` porque no queremos mostrar nada mientras se carga.

## D - Usar Devtools dentro de `RouterProvider`

#### 1. **Definición:**

La forma más sencilla de conectar las Devtools a tu router es renderizándolas dentro de tu componente de ruta raíz (o cualquier otra ruta que esté dentro de tu `RouterProvider`). Esto permite que las Devtools se conecten automáticamente a la instancia del router.

#### 2. **Ejemplo:**

Modifica tu componente de ruta raíz para incluir `<TanStackRouterDevtools />` dentro del JSX.

```tsx
import {
  createRootRoute,
  createRouter,
  RouterProvider,
  Outlet,
} from "@tanstack/react-router";
import { TanStackRouterDevtools } from "@tanstack/router-devtools"; // Asegúrate de importar Devtools

const rootRoute = createRootRoute({
  component: () => (
    <>
      <Outlet /> {/*  `Outlet` renderiza las rutas hijas */}
      <TanStackRouterDevtools /> {/*  Añade Devtools aquí */}
    </>
  ),
});

const routeTree = rootRoute.addChildren([
  // ... otras rutas
]);

const router = createRouter({
  routeTree,
});

function App() {
  return (
    <RouterProvider router={router}>
      <rootRoute.Component />
    </RouterProvider>
  );
}
```

**Explicación del ejemplo:**

- Hemos añadido `<TanStackRouterDevtools />` justo después de `<Outlet />` dentro del componente `rootRoute`. Como `rootRoute` está dentro de `RouterProvider`, las Devtools se conectarán automáticamente al router que se está utilizando.
- `<Outlet />` es importante porque es donde se renderizarán los componentes de las rutas hijas.

#### 3. **Notas o advertencias:**

- Asegúrate de que `<TanStackRouterDevtools />` esté dentro del árbol de componentes que renderiza `RouterProvider` para que pueda acceder al contexto del router.

## E - Pasar la instancia del Router manualmente

#### 1. **Definición:**

Si no quieres renderizar las Devtools dentro de `RouterProvider`, puedes pasar la instancia del router manualmente a través de la prop `router` del componente `TanStackRouterDevtools`. Esto te da más flexibilidad para colocar las Devtools en cualquier parte de tu aplicación.

#### 2. **Ejemplo:**

En lugar de colocar `<TanStackRouterDevtools />` dentro de un componente de ruta, puedes colocarlo directamente en tu componente `App` y pasarle la instancia del router como prop.

```tsx
import { createRouter, RouterProvider } from '@tanstack/react-router';
import { TanStackRouterDevtools } from '@tanstack/router-devtools'; // Asegúrate de importar Devtools

// ... (definición de rutas y routeTree como en el ejemplo anterior) ...

const router = createRouter({
  routeTree,
});

function App() {
  return (
    <>
      <RouterProvider router={router}>< /* ... tus rutas ... *//></RouterProvider>
      <TanStackRouterDevtools router={router} /> {/* Pasa la instancia del router manualmente */}
    </>
  );
}
```

**Explicación del ejemplo:**

- Hemos movido `<TanStackRouterDevtools router={router} />` fuera del `RouterProvider` y le hemos pasado la instancia del router (`router`) explícitamente a través de la prop `router`.
- Ahora las Devtools funcionarán correctamente aunque no estén dentro del `RouterProvider`.

#### 3. **Notas o advertencias:**

- Asegúrate de pasar la **misma** instancia del router que estás usando en `RouterProvider`. Si pasas una instancia diferente, las Devtools no funcionarán correctamente.

## F - Modo Flotante (Floating Mode)

#### 1. **Definición:**

El Modo Flotante monta las Devtools como un elemento fijo y flotante en tu aplicación. Aparecerá un pequeño botón en una esquina de la pantalla que puedes usar para mostrar u ocultar las Devtools. El estado de "mostrado/oculto" se guarda en el `localStorage` para que se recuerde incluso después de recargar la página.

#### 2. **Ejemplo:**

Para usar el Modo Flotante, simplemente renderiza `<TanStackRouterDevtools />` en tu componente `App` (o lo más arriba posible en tu árbol de componentes React).

```js
import { TanStackRouterDevtools } from '@tanstack/router-devtools';
import { RouterProvider } from '@tanstack/react-router'; // Asegúrate de importar RouterProvider

function App() {
  // ... (instancia del router como en ejemplos anteriores) ...

  return (
    <>
      <RouterProvider router={router}>< /* ... tus rutas ... *//></RouterProvider>
      <TanStackRouterDevtools initialIsOpen={false} /> {/* Modo Flotante activado */}
    </>
  );
}
```

**Explicación del ejemplo:**

- Hemos añadido `<TanStackRouterDevtools initialIsOpen={false} />` fuera del `RouterProvider`. `initialIsOpen={false}` hace que las Devtools estén cerradas por defecto al inicio.
- Al renderizar `<TanStackRouterDevtools />` de esta manera, se activa el Modo Flotante. Verás un botón en la esquina de tu pantalla para abrir y cerrar las Devtools.

#### 3. **Opciones del Modo Flotante:**

- **`router`**: La instancia del router a la que se conectarán las Devtools. (Opcional si las Devtools están dentro de `RouterProvider`).
- **`initialIsOpen`**: `Boolean`. Indica si las Devtools deben abrirse por defecto (`true`) o cerrarse (`false`). Por defecto es `false`.
- **`panelProps`**: Objeto de props para personalizar el panel de las Devtools (ej: `className`, `style`).
- **`closeButtonProps`**: Objeto de props para personalizar el botón de cerrar el panel (ej: `className`, `style`, `onClick`).
- **`toggleButtonProps`**: Objeto de props para personalizar el botón que abre/cierra el panel (ej: `className`, `style`, `onClick`).
- **`position`**: `"top-left" | "top-right" | "bottom-left" | "bottom-right"`. Define la posición del botón de toggle. Por defecto es `"bottom-left"`.
- **`shadowDOMTarget`**: `ShadowRoot`. Permite especificar un Shadow DOM target para las Devtools. Útil en casos avanzados con Shadow DOM.

## G - Modo Embebido (Embedded Mode)

#### 1. **Definición:**

El Modo Embebido te permite insertar las Devtools como un componente normal dentro de tu aplicación. Esto te da control total sobre el estilo y la ubicación de las Devtools.

#### 2. **Ejemplo:**

Para usar el Modo Embebido, usa el componente `TanStackRouterDevtoolsPanel` en lugar de `TanStackRouterDevtools`.

```js
import { TanStackRouterDevtoolsPanel } from '@tanstack/router-devtools'; // Importa TanStackRouterDevtoolsPanel
import { RouterProvider } from '@tanstack/react-router'; // Asegúrate de importar RouterProvider

function App() {
  // ... (instancia del router como en ejemplos anteriores) ...

  const styles = { /* ... tus estilos ... */ };
  const className = "mi-clase-devtools";

  return (
    <>
      <RouterProvider router={router}>< /* ... tus rutas ... *//></RouterProvider>
      <TanStackRouterDevtoolsPanel
        router={router} // Necesitas pasar la instancia del router en Modo Embebido
        style={styles}
        className={className}
      />
    </>
  );
}
```

**Explicación del ejemplo:**

- Hemos reemplazado `<TanStackRouterDevtools />` con `<TanStackRouterDevtoolsPanel router={router} style={styles} className={className} />`.
- En Modo Embebido, **siempre** debes pasar la instancia del router a través de la prop `router`.
- Puedes usar las props `style` y `className` para personalizar el aspecto de las Devtools como cualquier otro componente React.

#### 3. **Opciones del Modo Embebido:**

- **`style`**: Objeto de estilo de React para aplicar estilos inline a las Devtools.
- **`className`**: String para aplicar clases CSS a las Devtools.
- **`router`**: **Obligatorio**. La instancia del router a la que se conectarán las Devtools.
