## A - Covarianza

**Definición:** La covarianza permite que el método de una clase hija devuelva un tipo más específico que el tipo de retorno del método de su clase padre.

**Ejemplo:**

```php
abstract class Animal {
    protected string $name;
    public function __construct(string $name) {
        $this->name = $name;
    }
    abstract public function speak();
}

class Dog extends Animal {
    public function speak() {
        echo $this->name . " barks";
    }
}

class Cat extends Animal {
    public function speak() {
        echo $this->name . " meows";
    }
}

interface AnimalShelter {
    public function adopt(string $name): Animal;
}

class CatShelter implements AnimalShelter {
    public function adopt(string $name): Cat {
        return new Cat($name);
    }
}

class DogShelter implements AnimalShelter {
    public function adopt(string $name): Dog {
        return new Dog($name);
    }
}

$kitty = (new CatShelter)->adopt("Ricky");
$kitty->speak(); // Salida: Ricky meows

$doggy = (new DogShelter)->adopt("Mavrick");
$doggy->speak(); // Salida: Mavrick barks
```

**Descripción del ejemplo:** En este ejemplo, CatShelter y DogShelter implementan la interfaz AnimalShelter, pero sus métodos adopt devuelven tipos más específicos (Cat y Dog respectivamente) en lugar del tipo Animal de la clase padre.

## B - Contravarianza

**Definición:** La contravarianza permite que un tipo de parámetro sea menos específico en un método de una clase hija que en el método de su clase padre.

**Ejemplo:**

```php
class Food {}
class AnimalFood extends Food {}

abstract class Animal {
    protected string $name;
    public function __construct(string $name) {
        $this->name = $name;
    }
    public function eat(AnimalFood $food) {
        echo $this->name . " eats " . get_class($food);
    }
}

class Dog extends Animal {
    public function eat(Food $food) {
        echo $this->name . " eats " . get_class($food);
    }
}

$kitty = (new CatShelter)->adopt("Ricky");
$catFood = new AnimalFood();
$kitty->eat($catFood); // Salida: Ricky eats AnimalFood

$doggy = (new DogShelter)->adopt("Mavrick");
$banana = new Food();
$doggy->eat($banana); // Salida: Mavrick eats Food
```

**Descripción del ejemplo:** En este ejemplo, el método eat en la clase Dog acepta un tipo de parámetro más amplio (Food) en comparación con el método eat en la clase Animal, que acepta AnimalFood.

## C - Variancia de Propiedades

**Definición:** Por defecto, las propiedades no son covariantes ni contravariantes, es decir, son invariantes. Sin embargo, con la adición de propiedades abstractas y virtuales, es posible declarar una propiedad que solo tenga una operación de "get" o "set".

**Ejemplo:**

```php
class Animal {}
class Dog extends Animal {}
class Poodle extends Dog {}

interface PetOwner {
    public Animal $pet { get; }
}

class DogOwner implements PetOwner {
    public Dog $pet;
}

class PoodleOwner extends DogOwner {
    // Esto NO ESTÁ PERMITIDO, porque DogOwner::$pet tiene ambas operaciones "get" y "set" definidas y requeridas.
    public Poodle $pet;
}
```

**Descripción del ejemplo:** En este ejemplo, DogOwner puede tener una propiedad pet de tipo Dog porque solo requiere una operación "get". Sin embargo, PoodleOwner no puede cambiar el tipo de pet a Poodle porque DogOwner::$pet tiene ambas operaciones "get" y "set".
