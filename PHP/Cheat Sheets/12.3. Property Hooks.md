## A - Ganchos de propiedad

**Definición:** Los ganchos de propiedad, también conocidos como "accesores de propiedad", permiten interceptar y sobrescribir el comportamiento de lectura y escritura de una propiedad.

**Ejemplo:**

```php
class Example {
    private bool $modified = false;
    public string $foo = 'default value' {
        get {
            if ($this->modified) {
                return $this->foo . ' (modified)';
            }
            return $this->foo;
        }
        set(string $value) {
            $this->foo = strtolower($value);
            $this->modified = true;
        }
    }
}
$example = new Example();
$example->foo = 'changed';
print $example->foo; // changed (modified)
```

## B - Propiedades respaldadas y virtuales

**Definición:** Una propiedad respaldada almacena un valor directamente, mientras que una propiedad virtual utiliza ganchos sin interactuar con la propiedad misma.

**Ejemplo:**

```php
readonly class Rectangle {
    public int $area {
        get => $this->h * $this->w;
    }
    public function __construct(public int $h, public int $w) {}
}
$s = new Rectangle(4, 5);
print $s->area; // 20
$s->area = 30; // Error, no se define operación set
```

## C - Sintaxis básica de ganchos

**Definición:** La sintaxis general para declarar un gancho incluye definir los ganchos get y set, que pueden contener código arbitrario.

**Ejemplo:**

```php
class Example {
    private bool $modified = false;
    public string $foo = 'default value' {
        get => $this->foo . ($this->modified ? ' (modified)' : '');
        set(string $value) {
            $this->foo = strtolower($value);
            $this->modified = true;
        }
    }
}
```

## D - Propiedades virtuales

**Definición:** Las propiedades virtuales no almacenan un valor directamente y no ocupan espacio en memoria. Son útiles para propiedades derivadas.

**Ejemplo:**

```php
readonly class Rectangle {
    public int $area {
        get => $this->h * $this->w;
    }
    public function __construct(public int $h, public int $w) {}
}
```

## E - Alcance de los ganchos

**Definición:** Los ganchos operan en el ámbito del objeto modificado, teniendo acceso a todos los métodos y propiedades del objeto.

**Ejemplo:**

```php
class Person {
    public string $phone {
        set => $this->sanitizePhone($value);
    }
    private function sanitizePhone(string $value): string {
        $value = ltrim($value, '+');
        $value = ltrim($value, '1');
        if (!preg_match('/\d\d\d-\d\d\d-\d\d\d\d/', $value)) {
            throw new \InvalidArgumentException();
        }
        return $value;
    }
}
```

## F - Referencias y serialización

**Definición:** Los ganchos pueden causar problemas al adquirir una referencia a una propiedad o con modificaciones indirectas. En algunos casos, se puede usar el gancho get con prefijo & para devolver por referencia.

**Ejemplo:**

```php
class Example {
    public string $foo {
        &get {
            return $this->foo;
        }
    }
}
```

## G - Herencia de ganchos

**Definición:** Los ganchos pueden ser declarados como finales, impidiendo su sobrescritura. Los ganchos en una clase hija pueden acceder a los ganchos de la clase padre usando parent::$prop::get().

**Ejemplo:**

```php
class User {
    public string $username {
        final set => strtolower($value);
    }
}
class Manager extends User {
    public string $username {
        get => strtoupper($this->username);
    }
}
```
