## A - Dynamic Routes (Rutas Din치micas)

#### 1. **Definici칩n:**

Las **Dynamic Routes** o Rutas Din치micas son como comodines en tus URLs. Imag칤nate que tienes una p치gina web donde muestras detalles de productos, pero no sabes los nombres de los productos por adelantado. Con las Dynamic Routes, puedes crear una estructura de URL que funcione para _cualquier_ producto, 춰sin tener que crear una carpeta para cada uno! Es como decir "aqu칤 va a ir algo din치mico".

#### 2. **Ejemplo:**

Imagina que est치s creando un blog. Cada post tendr치 su propia p치gina, pero no vas a crear una carpeta para cada post, 쯨erdad? Usar칤as una Dynamic Route.

**Estructura de carpetas:**

```
app/blog/[slug]/page.tsx
```

Aqu칤, `[slug]` es el segmento din치mico. `slug` podr칤a ser el t칤tulo de tu post, por ejemplo.

**C칩digo en `page.tsx`:**

```typescript
export default function Page({ params }: { params: { slug: string } }) {
  return <div>Art칤culo del Blog: {params.slug}</div>;
}
```

**Ejemplo de URL y `params`:**

| Ruta del archivo          | URL de ejemplo    | `params`                |
| ------------------------- | ----------------- | ----------------------- |
| `app/blog/[slug]/page.js` | `/blog/mi-post`   | `{ slug: 'mi-post' }`   |
| `app/blog/[slug]/page.js` | `/blog/otro-post` | `{ slug: 'otro-post' }` |

**Explicaci칩n del ejemplo:**

Cuando Next.js recibe una petici칩n a `/blog/mi-post`, sabe que debe usar el componente `page.tsx` dentro de `app/blog/[slug]/`. El valor `mi-post` se captura y se pasa como parte del objeto `params` a tu componente `Page`. As칤 puedes usar ese valor din치mico (`params.slug`) para mostrar el contenido correcto en tu p치gina.

#### 3. **Notas o advertencias:**

- Los segmentos din치micos se definen usando corchetes `[]` alrededor del nombre de la carpeta.
- El nombre dentro de los corchetes (`slug`, `id`, etc.) es el nombre de la propiedad que recibir치s en el objeto `params`.
- Esto es similar a las Dynamic Routes en el directorio `pages` si has usado Next.js antes.

## B - generateStaticParams()

#### 1. **Definici칩n:**

`generateStaticParams()` es una funci칩n m치gica que usas dentro de tus Dynamic Routes para decirle a Next.js cu치les son los valores din치micos _posibles_ durante la construcci칩n de tu sitio web. Normalmente, las Dynamic Routes se generan bajo demanda, es decir, cuando alguien visita la p치gina. Pero con `generateStaticParams()`, puedes hacer que estas p치ginas se generen _antes_, durante el proceso de construcci칩n, lo que las hace s칰per r치pidas. Esto se llama **generaci칩n est치tica**.

#### 2. **Ejemplo:**

Siguiendo con el ejemplo del blog, imagina que tienes una lista de posts en una base de datos. Quieres que cada post se genere est치ticamente.

**C칩digo en `app/blog/[slug]/page.tsx`:**

```typescript
export async function generateStaticParams() {
  const posts = await fetch("https://mi-api.com/posts") // Obtiene la lista de posts
    .then((res) => res.json());

  return posts.map((post) => ({
    // Mapea los posts a objetos con el par치metro 'slug'
    slug: post.slug,
  }));
}

export default function Page({ params }: { params: { slug: string } }) {
  return <div>Art칤culo del Blog: {params.slug}</div>;
}
```

**Explicaci칩n del ejemplo:**

1.  **`generateStaticParams()`**: Esta funci칩n se ejecuta durante la construcci칩n de tu sitio.
2.  **`fetch('https://mi-api.com/posts')`**: Obtenemos la lista de posts desde una API (o base de datos).
3.  **`posts.map(...)`**: Transformamos la lista de posts en un array de objetos. Cada objeto debe tener la forma `{ [nombre_del_segmento_din치mico]: valor }`. En nuestro caso, el segmento din치mico es `slug`, as칤 que creamos `{ slug: post.slug }` para cada post.
4.  **Retorno**: `generateStaticParams()` devuelve este array de objetos. Next.js usa esta informaci칩n para saber qu칠 p치ginas `/blog/[slug]` debe generar est치ticamente (una por cada `slug` en el array).

**Beneficio clave:**

- **Rendimiento**: Las p치ginas generadas est치ticamente son incre칤blemente r치pidas porque ya est치n listas cuando el usuario las pide.
- **Optimizaci칩n de `fetch`**: Si usas `fetch` dentro de `generateStaticParams()`, Next.js es muy inteligente y guarda en memoria las peticiones. Si haces la misma petici칩n `fetch` en otros lugares (Layouts, Pages), 춰solo se har치 una vez! Esto acelera la construcci칩n.

#### 3. **Notas o advertencias:**

- `generateStaticParams()` solo funciona dentro de carpetas con segmentos din치micos.
- Es ideal para contenido que no cambia muy a menudo, como posts de blog, p치ginas de productos, etc.
- Si tu contenido cambia mucho, quiz치s prefieras la generaci칩n bajo demanda (Server-Side Rendering) o la generaci칩n incremental est치tica (Incremental Static Regeneration).

## C - Catch-all Segments (Segmentos "Atrapa-todo")

#### 1. **Definici칩n:**

Los **Catch-all Segments** son una extensi칩n de los Dynamic Segments. Imagina que quieres que una ruta coincida no solo con un segmento din치mico, sino tambi칠n con _cualquier cosa que venga despu칠s_. Es como decir "atrapa todo lo que siga a partir de aqu칤". Se crean a침adiendo puntos suspensivos `...` dentro de los corchetes: `[...nombreSegmento]`.

#### 2. **Ejemplo:**

Piensa en una tienda online con categor칤as y subcategor칤as. Quieres una ruta que sirva para `/shop/ropa`, `/shop/ropa/camisetas`, `/shop/ropa/camisetas/manga-corta`, etc.

**Estructura de carpetas:**

```
app/shop/[...slug]/page.tsx
```

**Ejemplo de URL y `params`:**

| Ruta del archivo             | URL de ejemplo                     | `params`                                         |
| ---------------------------- | ---------------------------------- | ------------------------------------------------ |
| `app/shop/[...slug]/page.js` | `/shop/ropa`                       | `{ slug: ['ropa'] }`                             |
| `app/shop/[...slug]/page.js` | `/shop/ropa/camisetas`             | `{ slug: ['ropa', 'camisetas'] }`                |
| `app/shop/[...slug]/page.js` | `/shop/ropa/camisetas/manga-corta` | `{ slug: ['ropa', 'camisetas', 'manga-corta'] }` |

**Explicaci칩n del ejemplo:**

- Cuando usas `[...slug]`, todo lo que venga despu칠s de `/shop/` en la URL se captura en un _array_ llamado `slug`.
- Si solo hay un segmento despu칠s de `/shop/` (ej. `/shop/ropa`), `params.slug` ser치 un array con un solo elemento: `['ropa']`.
- Si hay varios segmentos (ej. `/shop/ropa/camisetas/manga-corta`), `params.slug` ser치 un array con todos los segmentos: `['ropa', 'camisetas', 'manga-corta']`.

#### 3. **Notas o advertencias:**

- Los Catch-all Segments son muy 칰tiles para estructuras de URLs jer치rquicas o cuando no sabes cu치ntos segmentos din치micos habr치.
- El valor de `params.[nombreSegmento]` siempre ser치 un _array_ de strings.

## D - Optional Catch-all Segments (Segmentos "Atrapa-todo" Opcionales)

#### 1. **Definici칩n:**

Los **Optional Catch-all Segments** son como los Catch-all Segments, pero... 춰opcionales! Esto significa que la ruta _tambi칠n_ coincidir치 si no hay segmentos despu칠s del segmento base. Se crean usando _doble_ corchete y puntos suspensivos: `[[...nombreSegmento]]`.

#### 2. **Ejemplo:**

Volviendo a la tienda, imagina que quieres que `/shop` (sin nada m치s) tambi칠n sea una p치gina v치lida, adem치s de `/shop/ropa`, `/shop/ropa/camisetas`, etc.

**Estructura de carpetas:**

```
app/shop/[[...slug]]/page.tsx
```

**Ejemplo de URL y `params`:**

| Ruta del archivo               | URL de ejemplo         | `params`                          |
| ------------------------------ | ---------------------- | --------------------------------- |
| `app/shop/[[...slug]]/page.js` | `/shop`                | `{}`                              |
| `app/shop/[[...slug]]/page.js` | `/shop/ropa`           | `{ slug: ['ropa'] }`              |
| `app/shop/[[...slug]]/page.js` | `/shop/ropa/camisetas` | `{ slug: ['ropa', 'camisetas'] }` |

**Explicaci칩n del ejemplo:**

- La clave aqu칤 es que `app/shop/[[...slug]]/page.js` coincide con **`/shop`** _y_ con URLs como `/shop/ropa`, `/shop/ropa/camisetas`, etc.
- Si la URL es solo `/shop`, el objeto `params` estar치 _vac칤o_ `{}`. Esto indica que no se captur칩 ning칰n segmento din치mico.
- Si hay segmentos despu칠s de `/shop/`, funciona igual que un Catch-all Segment normal, y `params.slug` ser치 un array.

#### 3. **Notas o advertencias:**

- La principal diferencia con los Catch-all Segments es que los Optional Catch-all Segments permiten que la ruta base (ej. `/shop`) tambi칠n sea v치lida.
- Cuando no hay segmentos din치micos en la URL, `params` ser치 un objeto vac칤o. Debes manejar este caso en tu componente.

## E - TypeScript y Dynamic Routes

#### 1. **Definici칩n:**

Cuando usas TypeScript en Next.js con Dynamic Routes, puedes (y deber칤as) definir los tipos para el objeto `params`. Esto te ayuda a tener c칩digo m치s seguro y a que TypeScript te avise si est치s usando mal los par치metros.

#### 2. **Ejemplo:**

**Ejemplos de definiciones de tipos para `params`:**

| Ruta del archivo                     | Tipo de `params` en TypeScript           |
| ------------------------------------ | ---------------------------------------- |
| `app/blog/[slug]/page.tsx`           | `{ slug: string }`                       |
| `app/shop/[...slug]/page.tsx`        | `{ slug: string[] }`                     |
| `app/shop/[[...slug]]/page.tsx`      | `{ slug?: string[] }`                    |
| `app/[categoryId]/[itemId]/page.tsx` | `{ categoryId: string, itemId: string }` |

**C칩digo de ejemplo con TypeScript:**

```typescript
// Para app/blog/[slug]/page.tsx
export default function Page({ params }: { params: { slug: string } }) {
  return <h1>P치gina del Blog: {params.slug}</h1>;
}

// Para app/shop/[...slug]/page.tsx
export default function Page({ params }: { params: { slug: string[] } }) {
  return (
    <div>
      <h1>Tienda</h1>
      <p>Categor칤as: {params.slug?.join(" > ")}</p>
    </div>
  );
}

// Para app/shop/[[...slug]]/page.tsx
export default function Page({ params }: { params: { slug?: string[] } }) {
  return (
    <div>
      <h1>Tienda</h1>
      {params.slug && <p>Categor칤as: {params.slug.join(" > ")}</p>}
      {!params.slug && <p>P치gina principal de la tienda</p>}
    </div>
  );
}
```

**Explicaci칩n del ejemplo:**

- **Tipado expl칤cito**: En cada ejemplo, definimos el tipo de `params` usando `{ params: { ... } }` en la firma de la funci칩n `Page`.
- **Tipos espec칤ficos**:
  - Para `[slug]`, el tipo es `{ slug: string }` porque esperamos un solo segmento `slug` como string.
  - Para `[...slug]`, el tipo es `{ slug: string[] }` porque `slug` es un array de strings.
  - Para `[[...slug]]`, el tipo es `{ slug?: string[] }` porque `slug` es un array de strings _opcional_ (puede no existir, de ah칤 el `?`).
- **M칰ltiples par치metros**: En `app/[categoryId]/[itemId]/page.tsx`, definimos `{ categoryId: string, itemId: string }` para indicar que esperamos dos par치metros din치micos, `categoryId` e `itemId`, ambos strings.

#### 3. **Notas o advertencias:**

- Definir los tipos de `params` es una buena pr치ctica en TypeScript para evitar errores y mejorar la legibilidad del c칩digo.
- En el futuro, es posible que Next.js pueda inferir estos tipos autom치ticamente con un plugin de TypeScript, 춰pero por ahora es bueno definirlos manualmente!

춰Y eso es todo! Con esta **cheat sheet**, deber칤as tener una base s칩lida para entender y usar Dynamic Routes en Next.js. 춰Espero que te sea s칰per 칰til! Si tienes m치s preguntas, 춰no dudes en consultar! 游땕
