## A - File-Based Routing

**Definición:** Astro genera automáticamente las URLs de tu sitio web basándose en la estructura de archivos dentro del directorio src/pages/. Cada archivo .astro, .md o .mdx en este directorio se convierte en una página web.

**Ejemplo:**

```text
src/pages/
├── index.astro  ->  mysite.com/
├── about.astro  ->  mysite.com/about
└── blog/
    ├── post1.md -> mysite.com/blog/post1
    └── index.astro -> mysite.com/blog
```

(La estructura de carpetas y archivos dentro de src/pages/ define las rutas de tu sitio web.)

## B - Navegación entre páginas

**Definición:** Astro utiliza elementos <a> estándar de HTML para navegar entre las páginas. No hay un componente <Link> específico de Astro.

**Ejemplo:**

```Astro
<p>
  Lee más <a href="/about/">acerca de</a> Astro!
</p>
```

(Un enlace HTML normal con href especifica la ruta a la que se navegará.)

## C - Rutas Estáticas

**Definición:** Las rutas estáticas se crean directamente a partir de los archivos en src/pages/. La URL de la página corresponde a la ruta y nombre del archivo.

**Ejemplo:**

src/pages/index.astro -> mysite.com/

src/pages/about.astro -> mysite.com/about

src/pages/about/index.astro -> mysite.com/about

src/pages/about/me.astro -> mysite.com/about/me

src/pages/posts/1.md -> mysite.com/posts/1

(Cada archivo en src/pages se convierte en una ruta estática.)

## D - Rutas Dinámicas

**Definición:** Las rutas dinámicas usan parámetros en el nombre del archivo (entre corchetes []) para generar múltiples páginas con la misma estructura.

**Ejemplo:**

```text
src/pages/blog/[slug].astro
```

(El archivo `[slug]`.astro puede generar páginas como /blog/mi-primer-post y /blog/otro-post.)

## E - getStaticPaths() (Modo SSG)

**Definición:** En el modo de generación de sitios estáticos (SSG), getStaticPaths() es una función que se exporta desde un archivo de ruta dinámica. Esta función devuelve un array de objetos, donde cada objeto define los valores de los parámetros para generar una página.

**Ejemplo:**

```Astro
// src/pages/blog/[slug].astro
export function getStaticPaths() {
  return [
    { params: { slug: 'mi-primer-post' } },
    { params: { slug: 'otro-post' } },
  ];
}

const { slug } = Astro.params;
---
<h1>Post: {slug}</h1>
```

(Este código genera dos páginas: /blog/mi-primer-post y /blog/otro-post.)

## F - Múltiples Parámetros Dinámicos

**Definición:** Se pueden usar múltiples parámetros dinámicos en el nombre del archivo, y todos deben estar incluidos en los objetos params de getStaticPaths().

**Ejemplo:**

```Astro
src/pages/[lang]-[version]/info.astro

export function getStaticPaths () {
 return [
    {params: {lang: 'en', version: 'v1'}},
    {params: {lang: 'fr', version: 'v2'}},
  ];
}

const { lang, version } = Astro.params;
---
<p>Idioma: {lang}, Versión: {version}</p>
```

(Genera /en-v1/info y /fr-v2/info.)

## G - Parámetros Rest ([...path])

**Definición:** Un parámetro rest ([...path]) captura cualquier segmento de la URL después de su posición. Permite rutas de profundidad variable.

**Ejemplo:**

```Astro
src/pages/docs/[...path].astro

export function getStaticPaths() {
  return [
    {params: {path: 'one/two/three'}},
    {params: {path: 'four'}},
    {params: {path: undefined }}
  ]
}

const { path } = Astro.params;
---
<p>Ruta: {path}</p>
```

(Genera /docs/one/two/three, /docs/four, y /docs.)

## H - Decodificación de Parámetros

**Definición:** Los parámetros en getStaticPaths() no están decodificados. Usa decodeURI() para decodificar valores de parámetros.

**Ejemplo:**

```Astro
// src/pages/[slug].astro
export function getStaticPaths() {
  return [
    { params: { slug: decodeURI("%5Bpage%5D") } }, // decodes to "[page]"
  ]
}
```

(Decodifica %5Bpage%5D a [page].)

## I - Modo SSR (Server-Side Rendering)

**Definición:** En modo SSR, las rutas dinámicas funcionan igual que en SSG, pero las páginas se generan bajo demanda. No se usa getStaticPaths().

**Ejemplo:**

```Astro
src/pages/resources/[resource]/[id].astro

const { resource, id } = Astro.params;
---
<h1>{resource}: {id}</h1>
```

(Esta página se genera para cualquier valor de resource e id, como /resources/users/1 o /resources/colors/blue.)

## J - Redirecciones (Configuradas)

**Definición:** Las redirecciones configuradas en astro.config.mjs redirigen permanentemente a los usuarios de una ruta antigua a una nueva.

**Ejemplo:**

```JavaScript
// astro.config.mjs
import { defineConfig } from 'astro/config';

export default defineConfig({
  redirects: {
    '/old-page': '/new-page',
    '/blog/[...slug]': '/articles/[...slug]',
    '/old-page-with-status': {
      status: 302,
      destination: '/new-page'
    }
  }
});
```

(Redirige /old-page a /new-page, /blog/cualquier/ruta a /articles/cualquier/ruta, y /old-page-with-status a /new-page con un código 302.)

## K - Redirecciones Dinámicas

**Definición:** Astro.redirect() permite redirigir a los usuarios dinámicamente, por ejemplo, después de verificar si están logueados.

**Ejemplo:**

```Astro
// src/pages/account.astro
import { isLoggedIn } from '../utils';

const cookie = Astro.request.headers.get('cookie');

if (!isLoggedIn(cookie)) {
  return Astro.redirect('/login');
}
---
<html>
  <!-- Contenido de la página -->
</html>
```

(Redirige a /login si el usuario no está logueado.)

## L - Reescrituras (Rewrites)

**Definición:** Astro.rewrite() permite servir contenido de una ruta diferente sin cambiar la URL en el navegador.

**Ejemplo:**

```Astro
// src/pages/es-cu/articles/introduction.astro
---
return Astro.rewrite("/es/articles/introduction")
---
```

(Muestra el contenido de /es/articles/introduction cuando se visita /es-cu/articles/introduction.)

## M - Prioridad de Rutas

**Definición:** Astro tiene reglas para determinar qué ruta se usa cuando varias coinciden con la misma URL. La prioridad es:

Rutas reservadas de Astro.

Rutas con más segmentos.

Rutas estáticas sobre dinámicas.

Rutas dinámicas con parámetros nombrados sobre rest parameters.

Rutas dinámicas pre-renderizadas sobre rutas dinámicas de servidor.

Endpoints sobre páginas.

Rutas basadas en archivos sobre redirecciones.

Orden alfabético (si no se decide por las reglas anteriores).

**Ejemplo:**

```text
src/pages/
├── [...slug].astro
├── posts/
│   ├── create.astro
│   ├── [page].astro
│   ├── [pid].ts
│   └── [...slug].astro
```

( /posts/create se construye con create.astro, /posts/1 con [page].astro, /posts/a/b con [...slug].astro dentro de posts, y /a/b con [...slug].astro en la raíz.)

## N - Rutas Reservadas

**Definición:** Rutas internas de Astro que tienen prioridad sobre cualquier otra ruta.

**Ejemplo:**

\_astro/: Sirve assets estáticos.

\_server_islands/: Sirve componentes dinámicos diferidos.

\_actions/: Sirve acciones definidas.

## O - Paginación

**Definición:** Astro soporta paginación para dividir grandes colecciones de datos en múltiples páginas.

**Ejemplo:**

```Astro
// src/pages/astronauts/[page].astro
export async function getStaticPaths({ paginate }) {
  const astronauts = [{ name: 'Neil' }, { name: 'Buzz' }, { name: 'Sally' }, { name: 'John' }];
  return paginate(astronauts, { pageSize: 2 });
}

const { page } = Astro.props;
---
<h1>Página {page.currentPage}</h1>
<ul>
  {page.data.map(({ name }) => <li>{name}</li>)}
</ul>
```

(Genera /astronauts/1 y /astronauts/2, con 2 astronautas por página.)

## P - Propiedad page (Paginación)

**Definición:** La propiedad page contiene información sobre la página actual en la paginación.

**Ejemplo:**

```Astro
// src/pages/astronauts/[page].astro
const { page } = Astro.props;
---
<p>Página actual: {page.currentPage}</p>
<p>Total de páginas: {page.lastPage}</p>
<a href={page.url.prev}>Anterior</a>
<a href={page.url.next}>Siguiente</a>
```

(Muestra información de la página actual y enlaces de navegación.)

## Q - Paginación Anidada

**Definición:** Combina paginación con otros parámetros dinámicos para agrupar contenido paginado.

**Ejemplo:**

```Astro
// src/pages/[tag]/[page].astro
export async function getStaticPaths({ paginate }) {
  const allTags = ['red', 'blue'];
  const allPosts = [{ tag: 'red' }, { tag: 'blue' }, { tag: 'red' }];
  return allTags.flatMap((tag) => {
    const filteredPosts = allPosts.filter((post) => post.tag === tag);
    return paginate(filteredPosts, { params: { tag }, pageSize: 1 });
  });
}
```

(Genera /red/1, /red/2, /blue/1, etc., agrupando posts por tag.)

## R - Exclusión de Páginas

**Definición:** Los archivos y directorios en src/pages/ que comienzan con un guión bajo (\_) son ignorados por el router.

**Ejemplo:**

```text
src/pages/
├── _hidden.astro
├── _utils/
│   └── helper.js
└── index.astro
```

(Solo index.astro se convierte en una ruta.)
