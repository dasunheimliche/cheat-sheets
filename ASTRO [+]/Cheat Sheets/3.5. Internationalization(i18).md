## A - Configuraci칩n Inicial (i18n): El Cerebro Multiling칲e de tu Web 游댮

#### 1. **Introducci칩n:**

Este es el primer paso y el m치s crucial: aqu칤 le dices a Astro qu칠 idiomas hablar치 tu sitio y cu치l es el idioma principal.

#### 2. **Ejemplo:**

Imagina que tu sitio web es una torre de oficinas internacional. Este c칩digo es el directorio en la entrada que dice: "Aqu칤 hablamos espa침ol, ingl칠s y portugu칠s. El idioma oficial de la torre es el ingl칠s".

```javascript
// astro.config.mjs

import { defineConfig } from "astro/config";

export default defineConfig({
  i18n: {
    // 1. Lista de todos los idiomas que soportas
    locales: ["es", "en", "pt-br"],

    // 2. El idioma que se usar치 por defecto
    defaultLocale: "en",
  },
});
```

**Explicaci칩n del ejemplo:**

1.  `locales`: Es un array (una lista) con todos los c칩digos de los idiomas que tu web ofrecer치. `es` para espa침ol, `en` para ingl칠s, `pt-br` para portugu칠s de Brasil.
2.  `defaultLocale`: Es el idioma que ver치n los visitantes si no se especifica otro. Debe ser uno de los que listaste en `locales`. En nuestro caso, si alguien visita `misitio.com`, ver치 el contenido en ingl칠s.

#### 3. **Desarrollo**:

Este bloque de configuraci칩n `i18n` en tu archivo `astro.config.mjs` es el centro de mando para todo lo relacionado con los idiomas. Sin esto, Astro no sabe c칩mo gestionar las diferentes versiones de tus p치ginas. Es como intentar construir un edificio sin planos: imposible.

- **`locales`**: Piensa en esto como los pasaportes que tu sitio acepta. Cada c칩digo debe ser 칰nico.
- **`defaultLocale`**: Este es el "idioma de casa". Si un visitante llega a tu web sin una preferencia clara (por ejemplo, a la p치gina de inicio), este es el idioma que le mostrar치s.

游댮 **Fundamental**: No puedes tener un sitio multiling칲e en Astro sin esto. Es el punto de partida obligatorio, la piedra angular sobre la que se construye todo lo dem치s.

---

## B - Carpetas por Idioma: Organizando tu Contenido como un Profesional 游댮

#### 1. **Introducci칩n:**

Para que Astro sepa d칩nde est치 el contenido de cada idioma, debes organizar tus p치ginas en carpetas con el nombre del c칩digo de idioma correspondiente.

#### 2. **Ejemplo:**

Siguiendo con nuestra torre de oficinas, cada idioma tiene su propio piso. La planta baja es para el idioma por defecto (ingl칠s), y luego hay un piso para espa침ol, otro para portugu칠s, etc.

![Estructura de carpetas para i18n](https://docs.astro.build/assets/i18n-folder-structure.png)

**Explicaci칩n del ejemplo:**

- `src/pages/index.astro` y `src/pages/about.astro`: Son las p치ginas para el idioma por defecto (`en`). Est치n en la ra칤z de `pages`.
- `src/pages/es/index.astro` y `src/pages/es/about.astro`: Son las mismas p치ginas, pero traducidas al espa침ol. Est치n dentro de una carpeta llamada `es`.
- `src/pages/pt-br/`: Aqu칤 ir칤an las p치ginas en portugu칠s.

#### 3. **Desarrollo**:

Astro utiliza un sistema de enrutamiento basado en archivos. Esto significa que la estructura de tus carpetas se convierte directamente en las URLs de tu sitio. Al crear una carpeta `es` dentro de `src/pages/`, Astro entiende autom치ticamente que cualquier p치gina dentro de ella pertenecer치 a la ruta `/es/`.

**춰Cuidado con esta confusi칩n com칰n!**: Las carpetas deben llamarse _exactamente_ igual que los `locales` que definiste en la configuraci칩n. Si pusiste `"pt-br"`, la carpeta debe llamarse `pt-br`, no `pt` ni `portugues`.

游댮 **Fundamental**: Esta estructura de carpetas es la contraparte f칤sica de tu configuraci칩n l칩gica. Una no funciona sin la otra. Es la forma en que Astro encuentra y sirve el contenido correcto para cada idioma.

---

## C - `prefixDefaultLocale`: 쯊u Idioma Principal Lleva Etiqueta? 游리

#### 1. **Introducci칩n:**

Esta opci칩n te permite decidir si la URL de tu idioma por defecto debe incluir el prefijo del idioma (ej: `/en/about`) o no (ej: `/about`).

#### 2. **Ejemplo:**

```javascript
// astro.config.mjs
import { defineConfig } from "astro/config";

export default defineConfig({
  i18n: {
    locales: ["es", "en", "fr"],
    defaultLocale: "en",
    routing: {
      // Opci칩n 1: false (por defecto)
      prefixDefaultLocale: false,
      // Opci칩n 2: true
      // prefixDefaultLocale: true
    },
  },
});
```

**Explicaci칩n del ejemplo:**

- **`prefixDefaultLocale: false` (Comportamiento por defecto):**

  - P치gina en ingl칠s (defecto): `misitio.com/about`
  - P치gina en espa침ol: `misitio.com/es/about`
  - Los archivos del idioma por defecto (`en`) van en `src/pages/`.

- **`prefixDefaultLocale: true`:**
  - P치gina en ingl칠s (defecto): `misitio.com/en/about`
  - P치gina en espa침ol: `misitio.com/es/about`
  - **춰Importante!** TODOS los idiomas, incluido el ingl칠s, deben tener su propia carpeta (`src/pages/en/`, `src/pages/es/`, etc.).

#### 3. **Desarrollo**:

Esta decisi칩n afecta principalmente a la est칠tica de tus URLs y al SEO.

- **`false`**: Es com칰n si quieres que tu audiencia principal vea URLs m치s limpias y cortas, sin el prefijo del idioma. Es como si la entrada principal del edificio te llevara directamente al piso en ingl칠s.
- **`true`**: Es 칰til si quieres que todos los idiomas sean tratados por igual en la estructura de URLs, lo que puede ser m치s claro y consistente. Cada idioma, sin excepci칩n, tiene su propio "piso" claramente etiquetado desde la URL.

游리 **Importante**: Aunque tiene un valor por defecto que funciona bien, entender esta opci칩n es clave para estructurar tus URLs y tus carpetas de la forma que realmente deseas. Una mala elecci칩n inicial puede llevar a reestructuraciones m치s tarde.

---

## D - Creando Enlaces Multiling칲es: Navegaci칩n sin Errores 游리

#### 1. **Introducci칩n:**

Astro te da una herramienta m치gica, `getRelativeLocaleUrl()`, para crear enlaces que siempre apuntan a la versi칩n correcta de una p치gina seg칰n el idioma.

#### 2. **Ejemplo:**

Imagina que est치s en la p치gina "Acerca de" en espa침ol y quieres poner un enlace a la p치gina "Blog". No quieres enviarlos al blog en ingl칠s por error. Esta funci칩n se encarga de que el enlace sea `misitio.com/es/blog`.

```astro
---
// src/pages/es/index.astro
import { getRelativeLocaleUrl } from 'astro:i18n';

// Genera la URL para la p치gina 'about' en el idioma 'es'
const aboutURL = getRelativeLocaleUrl("es", "about"); // Resultado: "/es/about"

// Genera la URL para la p치gina 'blog' en el idioma 'es'
const blogURL = getRelativeLocaleUrl('es', 'blog'); // Resultado: "/es/blog"
---

<!-- Enlace escrito a mano (m치s propenso a errores) -->
<a href="/es/get-started/">춰Vamos!</a>

<!-- Enlaces generados con la funci칩n (m치s seguro) -->
<a href={blogURL}>Blog</a>
<a href={aboutURL}>Acerca de nosotros</a>
```

**Explicaci칩n del ejemplo:**
En lugar de escribir la ruta completa (`/es/blog`), le pides a Astro que la construya por ti. Le dices `getRelativeLocaleUrl('es', 'blog')` y 칠l te devuelve la cadena de texto `/es/blog`. Esto es genial porque si cambias la configuraci칩n de `prefixDefaultLocale`, 춰estos enlaces seguir치n funcionando sin que tengas que cambiar nada!

#### 3. **Desarrollo**:

Escribir URLs a mano es como caminar por un campo minado: un peque침o error y el enlace se rompe. `getRelativeLocaleUrl(locale, path)` es tu detector de metales. Le das el idioma (`locale`) y el nombre de la p치gina (`path`, sin la extensi칩n `.astro`) y te devuelve la URL correcta y segura, respetando toda tu configuraci칩n de i18n.

游리 **Importante**: Usar esta funci칩n es una pr치ctica recomendada. Te ahorra dolores de cabeza, previene errores de enlaces rotos y hace que tu c칩digo sea mucho m치s robusto y f치cil de mantener a largo plazo.

---

## E - `fallback`: El Plan B para Contenido Faltante 游리

#### 1. **Introducci칩n:**

Esta funci칩n te permite mostrar una p치gina en otro idioma si la traducci칩n para el idioma actual todav칤a no existe, evitando as칤 mostrar un error 404 (P치gina no encontrada).

#### 2. **Ejemplo:**

Supongamos que tienes una p치gina "T칠rminos y Condiciones" en espa침ol, pero a칰n no la has traducido al franc칠s. Con `fallback`, si un usuario visita `misitio.com/fr/terminos-y-condiciones`, en lugar de un error, le muestras la versi칩n en espa침ol.

```javascript
// astro.config.mjs
import { defineConfig } from "astro/config";

export default defineConfig({
  i18n: {
    locales: ["es", "en", "fr"],
    defaultLocale: "en",
    // Si una p치gina en franc칠s ('fr') no existe,
    // usa la versi칩n en espa침ol ('es') como alternativa.
    fallback: {
      fr: "es",
    },
  },
});
```

**Explicaci칩n del ejemplo:**
La l칤nea `fr: "es"` establece una regla clara: "Para cualquier p치gina solicitada en franc칠s que no encuentre, busque y muestre la versi칩n en espa침ol". Esto es mucho mejor que dejar al usuario en un callej칩n sin salida.

#### 3. **Desarrollo**:

El `fallback` es tu red de seguridad. Es especialmente 칰til en sitios grandes donde las traducciones pueden no estar completas para todas las p치ginas desde el primer d칤a. Puedes definir diferentes `fallbacks` para cada idioma (por ejemplo, que el catal치n recurra al espa침ol, y el gallego al portugu칠s).

Adem치s, puedes elegir _c칩mo_ se muestra ese contenido alternativo:

- **Redirecci칩n (por defecto)**: El usuario es enviado a la URL del idioma de `fallback` (ej: de `/fr/pagina` a `/es/pagina`). La URL en el navegador cambia.
- **Reescritura (`rewrite`)**: El usuario ve el contenido del idioma de `fallback`, pero la URL en el navegador no cambia (sigue siendo `/fr/pagina`). Esto es m치s transparente para el usuario.

游리 **Importante**: Esta es una caracter칤stica poderosa para mejorar la experiencia del usuario. Evita frustraciones y asegura que tus visitantes siempre encuentren _algo_ de contenido 칰til, incluso si no est치 en su idioma preferido.

---

## F - `domains`: Un Dominio para cada Idioma 游댯

#### 1. **Introducci칩n:**

Para proyectos m치s grandes, puedes asignar un dominio o subdominio completamente diferente a cada idioma (ej: `misitio.es` para espa침ol y `mysite.co.uk` para ingl칠s).

#### 2. **Ejemplo:**

En lugar de `misitio.com/es/` y `misitio.com/fr/`, quieres tener `misitio.es` y `misitio.fr`.

```javascript
// astro.config.mjs
import { defineConfig } from "astro/config";

export default defineConfig({
  site: "https://example.com", // Dominio principal
  output: "server", // 춰Requerido!
  i18n: {
    locales: ["es", "en", "fr"],
    defaultLocale: "en",
    domains: {
      es: "https://example.es",
      fr: "https://fr.example.com",
    },
  },
});
```

**Explicaci칩n del ejemplo:**

- `es: "https://example.es"`: Mapea el idioma espa침ol al dominio `example.es`. Una visita a `https://example.es/about` buscar치 el archivo `src/pages/es/about.astro`.
- `fr: "https://fr.example.com"`: Mapea el franc칠s al subdominio `fr.example.com`.
- El ingl칠s (`en`), al no estar en `domains`, usar치 el dominio principal: `https://example.com/about`.

#### 3. **Desarrollo**:

Esta es una estrategia de SEO y de marca muy avanzada. Le indica a los motores de b칰squeda y a los usuarios que tienes una presencia fuerte y dedicada en cada regi칩n.

**춰Mucho ojo con las limitaciones!**

- Solo funciona en modo `output: "server"`. No es para sitios est치ticos.
- Necesitas tener configurado un `site` en tu `astro.config.mjs`.
- Tu proveedor de hosting debe configurar correctamente los servidores para que esto funcione.

游댯 **Espec칤fico**: Esta es una herramienta para casos de uso muy concretos, generalmente para empresas grandes con una estrategia de internacionalizaci칩n muy definida. No es algo que necesites para empezar, pero es incre칤blemente potente saber que existe.

---

## G - Detecci칩n de Idioma del Navegador: Hablando el Idioma de tu Visitante 游리

#### 1. **Introducci칩n:**

Astro puede detectar el idioma preferido del navegador de tu visitante y ofrecerte esa informaci칩n para que puedas, por ejemplo, sugerirle cambiar a su idioma.

#### 2. **Ejemplo:**

Imagina que un usuario de Francia, cuyo navegador est치 en franc칠s, visita tu p치gina en ingl칠s (`misitio.com/about`). Podr칤as mostrarle un peque침o banner que diga: "游녦 Bonjour! 쯇refieres ver esta p치gina en franc칠s?".

```astro
---
// En cualquier p치gina .astro
// Astro.currentLocale: 'en' (porque estamos en la URL en ingl칠s)
// Si el navegador del visitante prefiere 'fr' y 'fr' est치 en tus locales:
// Astro.preferredLocale ser치 'fr'
// Astro.preferredLocaleList ser치 ['fr', ...]

const suggestedLocale = Astro.preferredLocale;
const currentLocale = Astro.currentLocale;
---

{suggestedLocale && suggestedLocale !== currentLocale && (
  <div class="banner">
    쯇refieres leer esto en tu idioma?
    <a href={`/${suggestedLocale}/about`}>Cambiar a {suggestedLocale}</a>
  </div>
)}
```

**Explicaci칩n del ejemplo:**

- `Astro.currentLocale`: Te dice el idioma de la p치gina que se est치 viendo AHORA MISMO.
- `Astro.preferredLocale`: Te dice cu치l de TUS idiomas soportados coincide con la preferencia M츼S ALTA del navegador del visitante.
- `Astro.preferredLocaleList`: Te da una lista de TODAS las coincidencias entre los idiomas del navegador y los tuyos.

El c칩digo comprueba si existe un idioma sugerido (`suggestedLocale`) y si es diferente al actual. Si es as칤, muestra un banner para cambiar de idioma.

#### 3. **Desarrollo**:

Esta funcionalidad (disponible en p치ginas renderizadas en el servidor) te permite ser proactivo y mejorar enormemente la experiencia del usuario. En lugar de forzar al usuario a buscar el selector de idioma, te anticipas a sus necesidades.

- `Astro.currentLocale`: Siempre disponible. Es el idioma de la URL.
- `Astro.preferredLocale` y `Astro.preferredLocaleList`: Solo disponibles en renderizado bajo demanda (`output: 'server'` o `hybrid`). Son el puente entre las preferencias de tu usuario y lo que tu sitio puede ofrecer.

游리 **Importante**: Aunque requiere renderizado en el servidor, esta es una de las caracter칤sticas m치s amigables para el usuario que ofrece el paquete de i18n. Demuestra un nivel de pulido y atenci칩n al detalle que los visitantes aprecian.
