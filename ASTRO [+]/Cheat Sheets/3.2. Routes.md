## A - Enrutamiento Basado en Archivos (File-Based Routing) üî¥

#### 1. **Introducci√≥n:**

Astro crea las URLs de tu sitio web de forma autom√°tica, simplemente bas√°ndose en c√≥mo organizas tus archivos y carpetas dentro del directorio `src/pages/`.

#### 2. **Ejemplo:**

Imagina que la carpeta `src/pages/` es un archivador. La ruta para encontrar un documento dentro del archivador es la misma que la URL en tu sitio web.

- Un archivo en `src/pages/contacto.astro` se convierte en `tusitio.com/contacto`.
- Un archivo en `src/pages/blog/mi-primer-post.md` se convierte en `tusitio.com/blog/mi-primer-post`.

**Explicaci√≥n del ejemplo:**
No hay un archivo de configuraci√≥n de rutas que tengas que mantener. ¬øQuieres una nueva p√°gina? ¬°Solo crea un nuevo archivo! Es as√≠ de simple y directo. Astro se encarga de conectar todo por ti.

#### 3. **Desarrollo:**

Este es el coraz√≥n del funcionamiento de Astro. La idea es que la estructura de tu proyecto sea un reflejo directo de la estructura de tu sitio web. Esto elimina una capa de complejidad que otros frameworks suelen tener. Si sabes organizar carpetas en tu ordenador, ya sabes c√≥mo funciona el 90% del enrutamiento en Astro.

üî¥ **Fundamental**: Este es el concepto N¬∞1 que debes entender. Si no comprendes esto, no podr√°s crear ni la p√°gina m√°s b√°sica. Es la regla principal del juego en Astro.

---

## B - Navegaci√≥n Entre P√°ginas üî¥

#### 1. **Introducci√≥n:**

Para crear enlaces y permitir que tus visitantes se muevan entre las p√°ginas de tu sitio, usas la etiqueta HTML `<a>` de toda la vida.

#### 2. **Ejemplo:**

```html
<!-- En tu archivo src/pages/index.astro -->
<h1>¬°Bienvenido a mi p√°gina de inicio!</h1>
<p>
  Conoce m√°s sobre m√≠ en la secci√≥n
  <a href="/acerca-de-mi/">"Acerca de m√≠"</a>.
</p>

<!-- Esto enlazar√° a la p√°gina generada por el archivo src/pages/acerca-de-mi.astro -->
```

**Explicaci√≥n del ejemplo:**
No necesitas componentes especiales como `<Link>` que podr√≠as haber visto en otros frameworks (como React o Vue). Astro apuesta por la simplicidad y los est√°ndares web. Un simple enlace `<a>` con un `href` que apunta a la ruta de tu otra p√°gina es todo lo que necesitas.

#### 3. **Desarrollo:**

Esta decisi√≥n de dise√±o de Astro hace que todo sea m√°s sencillo y predecible. Si alguna vez has escrito HTML b√°sico, ya sabes c√≥mo crear la navegaci√≥n en un sitio de Astro. No hay magia oculta, solo la web funcionando como siempre lo ha hecho.

üî¥ **Fundamental**: Sin enlaces, un sitio web es solo una colecci√≥n de p√°ginas aisladas. Saber c√≥mo conectar tus p√°ginas es absolutamente esencial para construir cualquier cosa √∫til.

---

## C - Rutas Est√°ticas üî¥

#### 1. **Introducci√≥n:**

Cualquier archivo con extensi√≥n `.astro`, `.md` o `.mdx` que coloques directamente en la carpeta `src/pages/` se convierte autom√°ticamente en una p√°gina con una URL fija.

#### 2. **Ejemplo:**

```
# Estructura de archivos:
src/pages/index.astro        -> se convierte en -> tusitio.com/
src/pages/about.astro        -> se convierte en -> tusitio.com/about
src/pages/products/shoes.astro -> se convierte en -> tusitio.com/products/shoes
```

**Explicaci√≥n del ejemplo:**
La relaci√≥n es directa: la ruta del archivo determina la ruta de la URL. `index.astro` es un archivo especial que siempre corresponde a la ra√≠z de un directorio (por ejemplo, `tusitio.com/` o `tusitio.com/products/`).

#### 3. **Desarrollo:**

Estas son las p√°ginas m√°s comunes y sencillas de tu sitio: la p√°gina de inicio, la de contacto, la de "acerca de nosotros", etc. Son "est√°ticas" porque su URL no cambia y est√° definida directamente por el nombre del archivo.

üî¥ **Fundamental**: Son los ladrillos b√°sicos de tu sitio web. La mayor√≠a de los sitios comienzan con un pu√±ado de rutas est√°ticas.

---

## D - Rutas Din√°micas: El Concepto üî¥

#### 1. **Introducci√≥n:**

Usa una √∫nica plantilla para generar program√°ticamente un n√∫mero ilimitado de p√°ginas, ideal para cosas como art√≠culos de un blog, perfiles de usuario o fichas de productos.

#### 2. **Ejemplo:**

Imagina que tienes una tienda online. No vas a crear un archivo `.astro` para cada producto. En su lugar, creas una sola plantilla:

`src/pages/productos/[id].astro`

Esta √∫nica plantilla puede generar:

- `tusitio.com/productos/zapatillas-deportivas`
- `tusitio.com/productos/camiseta-de-algodon`
- `tusitio.com/productos/gorra-edicion-limitada`

**Explicaci√≥n del ejemplo:**
Los corchetes `[id]` en el nombre del archivo le dicen a Astro: "Oye, esta parte de la URL va a ser una variable". A esa variable la llamamos "par√°metro". En este caso, el par√°metro se llama `id`.

#### 3. **Desarrollo:**

Las rutas din√°micas son la clave para construir sitios web complejos y basados en datos sin tener que crear manualmente cientos de archivos. Creas una plantilla y la alimentas con datos (desde una base de datos, una API o archivos locales) para generar todas las p√°ginas que necesites.

üî¥ **Fundamental**: En cuanto tu sitio web necesite mostrar colecciones de elementos (posts, productos, usuarios, recetas, etc.), las rutas din√°micas se vuelven imprescindibles.

---

## E - Generando P√°ginas Din√°micas (Sitios Est√°ticos) con `getStaticPaths` üî¥

#### 1. **Introducci√≥n:**

Para sitios est√°ticos (el modo por defecto de Astro), debes usar la funci√≥n `getStaticPaths` para decirle a Astro, durante el proceso de construcci√≥n, la lista exacta de p√°ginas que debe generar a partir de tu plantilla din√°mica.

#### 2. **Ejemplo:**

```javascript
// src/pages/perros/[nombre].astro
---
// 1. Esta funci√≥n se ejecuta UNA SOLA VEZ durante la construcci√≥n del sitio.
export function getStaticPaths() {
  // 2. Devuelve una lista de objetos. Cada objeto crear√° una p√°gina.
  return [
    { params: { nombre: "fido" } },    // Crea /perros/fido
    { params: { nombre: "luna" } },    // Crea /perros/luna
    { params: { nombre: "rex" } },     // Crea /perros/rex
  ];
}

// 3. Astro.params contiene el valor para ESTA p√°gina espec√≠fica.
const { nombre } = Astro.params;
---

<!-- 4. El HTML usa el valor del par√°metro. -->
<h1>¬°Hola, soy un perro y me llamo {nombre}!</h1>
```

**Explicaci√≥n del ejemplo:**
Piensa en `getStaticPaths` como una lista de instrucciones. Le dices a Astro: "Toma esta plantilla `[nombre].astro` y √∫sala para crear una p√°gina para 'fido', otra para 'luna' y otra para 'rex'". Astro obedece y genera tres archivos HTML est√°ticos: `fido.html`, `luna.html` y `rex.html` dentro de una carpeta `perros/`.

#### 3. **Desarrollo:**

**¬°CUIDADO!** Este es un punto donde muchos principiantes se confunden. `getStaticPaths` **NO se ejecuta cada vez que un usuario visita la p√°gina**. Se ejecuta una √∫nica vez, cuando t√∫ (el desarrollador) ejecutas el comando `astro build`. Su trabajo es pre-generar todas las p√°ginas posibles de antemano.

üî¥ **Fundamental**: Si usas el modo est√°tico de Astro (el m√°s com√∫n), `getStaticPaths` es la herramienta **obligatoria** para crear rutas din√°micas. No hay otra forma de hacerlo.

---

## F - Accediendo a Par√°metros de la URL con `Astro.params` üî¥

#### 1. **Introducci√≥n:**

Dentro del c√≥digo de una p√°gina din√°mica, puedes obtener el valor concreto de la URL del visitante (por ejemplo, "fido" de `/perros/fido`) a trav√©s del objeto global `Astro.params`.

#### 2. **Ejemplo:**

```javascript
// En el archivo: src/pages/productos/[categoria]/[id].astro
---
// Si un usuario visita: /productos/ropa/camiseta-123
const { categoria, id } = Astro.params;

// Ahora, las variables contienen:
// categoria = "ropa"
// id = "camiseta-123"
---
<h1>Mostrando el producto: {id}</h1>
<p>Categor√≠a: {categoria}</p>
```

**Explicaci√≥n del ejemplo:**
`Astro.params` es un objeto que contiene los valores de los par√°metros de la URL para la p√°gina que se est√° renderizando. Los nombres de las propiedades en el objeto (`categoria`, `id`) coinciden exactamente con los nombres que pusiste entre corchetes en el nombre del archivo (`[categoria]`, `[id]`).

#### 3. **Desarrollo:**

Este es el puente entre la URL que visita el usuario y el contenido que muestras en la p√°gina. Usas `Astro.params` para saber qu√© datos espec√≠ficos debes buscar y mostrar. Por ejemplo, usar√≠as el `id` del producto para consultar tu base de datos y obtener su precio, descripci√≥n e im√°genes.

üî¥ **Fundamental**: Una ruta din√°mica no sirve de nada si no puedes acceder al valor din√°mico. `Astro.params` es la forma de hacerlo, por lo que es absolutamente esencial.

---

## G - Par√°metros "Rest" (`[...path]`) üü°

#### 1. **Introducci√≥n:**

Captura rutas de URL que tienen un n√∫mero variable de segmentos (partes separadas por `/`) usando un par√°metro "rest" con tres puntos `...` dentro de los corchetes.

#### 2. **Ejemplo:**

```javascript
// Archivo: src/pages/archivos/[...ruta].astro
---
const { ruta } = Astro.params;
---
<h1>Ruta del archivo solicitado: {ruta}</h1>

<!--
Si la URL es /archivos/documentos/informes/2024.pdf
La variable `ruta` contendr√° el string: "documentos/informes/2024.pdf"

Si la URL es /archivos/imagenes/vacaciones.jpg
La variable `ruta` contendr√° el string: "imagenes/vacaciones.jpg"
-->
```

**Explicaci√≥n del ejemplo:**
El par√°metro `[...ruta]` act√∫a como una aspiradora, absorbiendo todo lo que viene despu√©s de `/archivos/` en una sola variable de texto. Es incre√≠blemente √∫til para p√°ginas de documentaci√≥n, visores de archivos o cualquier estructura donde las URLs puedan tener una profundidad variable.

#### 3. **Desarrollo:**

A diferencia de un par√°metro normal como `[id]` que solo captura un segmento de la URL (el texto entre dos `/`), el par√°metro "rest" captura todo hasta el final. Puedes incluso tener una ruta vac√≠a si defines `path: undefined` en `getStaticPaths`, lo que har√≠a que `[...ruta].astro` tambi√©n gestione la URL `/archivos/`.

üü° **Importante**: Aunque no lo usar√°s en todos los proyectos, es una herramienta muy poderosa para ciertos tipos de sitios. Conocer su existencia te ahorrar√° muchos dolores de cabeza cuando necesites rutas flexibles.

---

## H - Rutas Din√°micas "On-Demand" (SSR) üü°

#### 1. **Introducci√≥n:**

Cuando usas Astro en modo de renderizado en el servidor (SSR), las p√°ginas din√°micas se generan al instante, justo cuando un usuario las solicita, sin necesidad de usar `getStaticPaths`.

#### 2. **Ejemplo:**

```javascript
// Archivo: src/pages/usuarios/[username].astro
// ¬°OJO! No hay `getStaticPaths` aqu√≠.
---
// Esto se ejecuta CADA VEZ que alguien visita una URL como /usuarios/loquesea
const { username } = Astro.params;

// Aqu√≠ podr√≠as buscar el usuario en una base de datos en tiempo real.
const userInfo = await db.findUser(username);
---

<h1>Perfil de: {username}</h1>
<!-- Muestra la informaci√≥n del usuario -->
```

**Explicaci√≥n del ejemplo:**
En modo SSR, el servidor espera una petici√≥n. Cuando llega una petici√≥n para `/usuarios/ana`, ejecuta el c√≥digo del archivo, obtiene el `username` "ana" de `Astro.params`, busca sus datos y construye la p√°gina HTML sobre la marcha para envi√°rsela a Ana. No hay p√°ginas pre-construidas.

#### 3. **Desarrollo:**

Esta es la principal diferencia entre el modo est√°tico (SSG) y el modo servidor (SSR).

- **SSG (con `getStaticPaths`)**: Construye todo por adelantado. R√°pido y seguro, pero necesitas saber todas las URLs en el momento de la construcci√≥n.
- **SSR (sin `getStaticPaths`)**: Construye sobre la marcha. Infinitamente flexible, puede manejar cualquier URL y mostrar contenido en tiempo real, pero requiere un servidor activo.

üü° **Importante**: Si tu aplicaci√≥n necesita mostrar datos que cambian constantemente o si tienes tantas p√°ginas que es imposible generarlas todas de antemano (por ejemplo, perfiles de millones de usuarios), el modo SSR y las rutas din√°micas "on-demand" son la soluci√≥n.

---

## I - Redirecciones üü°

#### 1. **Introducci√≥n:**

Puedes redirigir autom√°ticamente a los usuarios de una URL antigua a una nueva, ya sea de forma permanente en la configuraci√≥n o din√°micamente desde el c√≥digo de una p√°gina.

#### 2. **Ejemplo (Configurada):**

Esto es para cambios permanentes, como cuando reestructuras tu sitio.

```javascript
// En tu archivo astro.config.mjs
import { defineConfig } from "astro/config";

export default defineConfig({
  redirects: {
    // Si alguien visita /mi-pagina-antigua, ser√° enviado a /mi-pagina-nueva
    "/mi-pagina-antigua": "/mi-pagina-nueva",

    // Tambi√©n puedes redirigir a sitios externos
    "/mi-blog-viejo": "https://mi-nuevo-blog.com",
  },
});
```

#### 3. **Ejemplo (Din√°mica):**

Esto es para l√≥gica dentro de tu aplicaci√≥n, como proteger una ruta.

```javascript
// En src/pages/panel-de-control.astro
---
import { estaLogueado } from "../auth";

// Comprueba si el usuario ha iniciado sesi√≥n (ej. leyendo una cookie)
if (!estaLogueado(Astro.request)) {
  // Si no lo est√°, lo enviamos a la p√°gina de login. La p√°gina actual deja de ejecutarse.
  return Astro.redirect('/login');
}
---
<h1>¬°Bienvenido a tu panel de control!</h1>
```

#### 4. **Desarrollo:**

Las redirecciones son una herramienta fundamental para la gesti√≥n de un sitio web.

- **Configuradas**: Son excelentes para el SEO. Le dicen a los buscadores que una p√°gina se ha movido permanentemente (`c√≥digo 301`), evitando que pierdas posicionamiento.
- **Din√°micas**: Son esenciales para la l√≥gica de la aplicaci√≥n, como la autenticaci√≥n, o para guiar a los usuarios a trav√©s de un flujo de varios pasos.

üü° **Importante**: Tarde o temprano necesitar√°s redirigir una URL. Saber que tienes estas dos herramientas (una para la estructura del sitio y otra para la l√≥gica de la aplicaci√≥n) es crucial.

---

## J - Reescrituras (Rewrites) üîµ

#### 1. **Introducci√≥n:**

Muestra el contenido de una ruta diferente sin cambiar la URL que el usuario ve en la barra de direcciones de su navegador, usando `Astro.rewrite()`.

#### 2. **Ejemplo:**

Imagina que quieres que la URL `/productos` muestre el contenido de tu p√°gina de inicio, pero sin que la URL cambie a `/`.

```javascript
// En src/pages/productos.astro
---
// El usuario visita /productos...
// ...pero Astro internamente buscar√° y renderizar√° el contenido de index.astro
return Astro.rewrite('/');
---
// Este archivo ahora est√° vac√≠o porque su contenido nunca se mostrar√°.
```

**Explicaci√≥n del ejemplo:**
El usuario escribe `tusitio.com/productos` en su navegador y presiona Enter. La URL en la barra de direcciones **permanece** como `tusitio.com/productos`, pero el contenido que ve es el de la p√°gina de inicio. Es como poner una m√°scara.

#### 3. **Desarrollo:**

**¬°No confundir con una redirecci√≥n!**

- **Redirecci√≥n (`Astro.redirect`)**: Le dice al navegador "ve a esta OTRA URL". La URL en la barra de direcciones cambia.
- **Reescritura (`Astro.rewrite`)**: Sirve el contenido de OTRA ruta pero se queda en la URL actual. La URL no cambia.

Es √∫til para casos de uso m√°s avanzados, como mostrar contenido localizado (`/es-MX/` mostrando el contenido de `/es/`) o para mejorar la estructura de URLs por motivos de SEO sin tener que duplicar contenido.

üîµ **Espec√≠fico**: No es algo que necesites todos los d√≠as, pero es una herramienta muy potente para situaciones particulares. Es bueno saber que existe por si te encuentras con un problema de enrutamiento complejo.

---

## K - Orden de Prioridad de Rutas üîµ

#### 1. **Introducci√≥n:**

Si varias reglas de enrutamiento podr√≠an aplicarse a la misma URL (por ejemplo, una ruta est√°tica y una din√°mica), Astro sigue un orden de prioridad estricto para decidir cu√°l usar.

#### 2. **Ejemplo:**

Imagina que tienes estos dos archivos:

1.  `src/pages/posts/crear.astro` (Ruta est√°tica)
2.  `src/pages/posts/[slug].astro` (Ruta din√°mica)

Si un usuario visita la URL `/posts/crear`:

- **¬øQu√© ruta gana?** Gana `crear.astro`.
- **¬øPor qu√©?** Porque las rutas est√°ticas (nombres de archivo fijos) siempre tienen prioridad sobre las rutas din√°micas (`[slug]`).

#### 3. **Desarrollo:**

No necesitas memorizar todas las reglas, pero la idea general es: **las rutas m√°s espec√≠ficas ganan**.

- Las rutas est√°ticas (`/posts/crear`) son m√°s espec√≠ficas que las din√°micas (`/posts/[slug]`).
- Las rutas din√°micas con par√°metros nombrados (`/posts/[slug]`) son m√°s espec√≠ficas que las rutas "rest" (`/posts/[...slug]`).

Saber esto te ayuda a diagnosticar por qu√© una p√°gina no se muestra como esperas cuando tienes rutas que podr√≠an entrar en conflicto.

üîµ **Espec√≠fico**: Solo te preocupar√°s por esto cuando construyas sistemas de rutas complejos. Para la mayor√≠a de los sitios, el comportamiento es intuitivo y no requiere atenci√≥n.

---

## L - Paginaci√≥n üü°

#### 1. **Introducci√≥n:**

Astro te ofrece una funci√≥n `paginate()` para dividir f√°cilmente grandes conjuntos de datos (como cientos de art√≠culos de blog) en m√∫ltiples p√°ginas numeradas.

#### 2. **Ejemplo:**

```javascript
// En src/pages/astronautas/[page].astro
---
import { astronautas } from '../../data'; // Imagina que esto es un array con 100 astronautas

export function getStaticPaths({ paginate }) {
  // paginate() crea las p√°ginas por ti.
  // Le pasas los datos y cu√°ntos elementos quieres por p√°gina.
  return paginate(astronautas, { pageSize: 10 });
  // Esto generar√° /astronautas/1, /astronautas/2, ..., /astronautas/10
}

// En `Astro.props` recibes un objeto `page` con todo lo necesario.
const { page } = Astro.props;
---

<h1>P√°gina {page.currentPage} de Astronautas</h1>
<ul>
  <!-- page.data contiene solo los 10 astronautas de esta p√°gina -->
  {page.data.map(astronauta => <li>{astronauta.nombre}</li>)}
</ul>

<!-- Y `page.url` tiene enlaces √∫tiles para la navegaci√≥n -->
{page.url.prev && <a href={page.url.prev}>&laquo; Anterior</a>}
{page.url.next && <a href={page.url.next}>Siguiente &raquo;</a>}
```

**Explicaci√≥n del ejemplo:**
La funci√≥n `paginate` es una maravilla. La usas dentro de `getStaticPaths` y ella se encarga de todo:

1.  Calcula cu√°ntas p√°ginas se necesitan.
2.  Crea las rutas para cada p√°gina (`/astronautas/1`, `/astronautas/2`, etc.).
3.  "Corta" tu array de datos y entrega a cada p√°gina solo la porci√≥n que le corresponde.
4.  Te da un objeto `page` con informaci√≥n √∫til como la p√°gina actual, el total de p√°ginas y las URLs para los botones "Anterior" y "Siguiente".

#### 3. **Desarrollo:**

La paginaci√≥n es un requisito com√∫n en blogs, tiendas, galer√≠as y cualquier sitio que muestre listas largas de contenido. La herramienta `paginate()` de Astro te ahorra una cantidad enorme de trabajo manual y c√≥digo repetitivo.

üü° **Importante**: Si tu sitio va a tener un blog o un cat√°logo de productos, la paginaci√≥n es una caracter√≠stica que casi con toda seguridad necesitar√°s implementar.

---

## M - Excluir P√°ginas de la Construcci√≥n üü°

#### 1. **Introducci√≥n:**

Puedes evitar que Astro convierta un archivo o una carpeta entera en una p√°gina web simplemente anteponiendo un guion bajo `_` a su nombre.

#### 2. **Ejemplo:**

```
# Estructura de archivos en src/pages/
- index.astro             # ‚úÖ Se convierte en tusitio.com/
- about.astro             # ‚úÖ Se convierte en tusitio.com/about
- _mi-borrador.astro      # ‚ùå Se ignora. No se crea ninguna p√°gina.
- components/
  - _Boton.astro          # ‚ùå Se ignora. Es un componente, no una p√°gina.
- utils/
  - _helpers.js           # ‚ùå Se ignora. Es un archivo de utilidades.
```

**Explicaci√≥n del ejemplo:**
Cualquier archivo o carpeta que comience con `_` es invisible para el sistema de enrutamiento de Astro. No se procesar√° como una p√°gina y no se incluir√° en el sitio final.

#### 3. **Desarrollo:**

Esto es incre√≠blemente √∫til. Te permite organizar tu proyecto de manera l√≥gica, colocando componentes (`_Boton.astro`) o archivos de ayuda (`_helpers.js`) justo al lado de las p√°ginas que los utilizan, sin el riesgo de que Astro los convierta accidentalmente en p√°ginas web accesibles. Tambi√©n es perfecto para dejar p√°ginas en borrador (`_mi-borrador.astro`) mientras trabajas en ellas.

üü° **Importante**: Esta es una pr√°ctica muy com√∫n y recomendada para mantener tus proyectos de Astro limpios y bien organizados. ¬°√ösala sin miedo
