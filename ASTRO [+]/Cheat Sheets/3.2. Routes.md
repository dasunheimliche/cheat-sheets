## A - Enrutamiento Basado en Archivos (File-Based Routing) 🔴

#### 1. **Introducción:**

Astro crea las URLs de tu sitio web de forma automática, simplemente basándose en cómo organizas tus archivos y carpetas dentro del directorio `src/pages/`.

#### 2. **Ejemplo:**

Imagina que la carpeta `src/pages/` es un archivador. La ruta para encontrar un documento dentro del archivador es la misma que la URL en tu sitio web.

- Un archivo en `src/pages/contacto.astro` se convierte en `tusitio.com/contacto`.
- Un archivo en `src/pages/blog/mi-primer-post.md` se convierte en `tusitio.com/blog/mi-primer-post`.

**Explicación del ejemplo:**
No hay un archivo de configuración de rutas que tengas que mantener. ¿Quieres una nueva página? ¡Solo crea un nuevo archivo! Es así de simple y directo. Astro se encarga de conectar todo por ti.

#### 3. **Desarrollo:**

Este es el corazón del funcionamiento de Astro. La idea es que la estructura de tu proyecto sea un reflejo directo de la estructura de tu sitio web. Esto elimina una capa de complejidad que otros frameworks suelen tener. Si sabes organizar carpetas en tu ordenador, ya sabes cómo funciona el 90% del enrutamiento en Astro.

🔴 **Fundamental**: Este es el concepto N°1 que debes entender. Si no comprendes esto, no podrás crear ni la página más básica. Es la regla principal del juego en Astro.

---

## B - Navegación Entre Páginas 🔴

#### 1. **Introducción:**

Para crear enlaces y permitir que tus visitantes se muevan entre las páginas de tu sitio, usas la etiqueta HTML `<a>` de toda la vida.

#### 2. **Ejemplo:**

```html
<!-- En tu archivo src/pages/index.astro -->
<h1>¡Bienvenido a mi página de inicio!</h1>
<p>
  Conoce más sobre mí en la sección
  <a href="/acerca-de-mi/">"Acerca de mí"</a>.
</p>

<!-- Esto enlazará a la página generada por el archivo src/pages/acerca-de-mi.astro -->
```

**Explicación del ejemplo:**
No necesitas componentes especiales como `<Link>` que podrías haber visto en otros frameworks (como React o Vue). Astro apuesta por la simplicidad y los estándares web. Un simple enlace `<a>` con un `href` que apunta a la ruta de tu otra página es todo lo que necesitas.

#### 3. **Desarrollo:**

Esta decisión de diseño de Astro hace que todo sea más sencillo y predecible. Si alguna vez has escrito HTML básico, ya sabes cómo crear la navegación en un sitio de Astro. No hay magia oculta, solo la web funcionando como siempre lo ha hecho.

🔴 **Fundamental**: Sin enlaces, un sitio web es solo una colección de páginas aisladas. Saber cómo conectar tus páginas es absolutamente esencial para construir cualquier cosa útil.

---

## C - Rutas Estáticas 🔴

#### 1. **Introducción:**

Cualquier archivo con extensión `.astro`, `.md` o `.mdx` que coloques directamente en la carpeta `src/pages/` se convierte automáticamente en una página con una URL fija.

#### 2. **Ejemplo:**

```
# Estructura de archivos:
src/pages/index.astro        -> se convierte en -> tusitio.com/
src/pages/about.astro        -> se convierte en -> tusitio.com/about
src/pages/products/shoes.astro -> se convierte en -> tusitio.com/products/shoes
```

**Explicación del ejemplo:**
La relación es directa: la ruta del archivo determina la ruta de la URL. `index.astro` es un archivo especial que siempre corresponde a la raíz de un directorio (por ejemplo, `tusitio.com/` o `tusitio.com/products/`).

#### 3. **Desarrollo:**

Estas son las páginas más comunes y sencillas de tu sitio: la página de inicio, la de contacto, la de "acerca de nosotros", etc. Son "estáticas" porque su URL no cambia y está definida directamente por el nombre del archivo.

🔴 **Fundamental**: Son los ladrillos básicos de tu sitio web. La mayoría de los sitios comienzan con un puñado de rutas estáticas.

---

## D - Rutas Dinámicas: El Concepto 🔴

#### 1. **Introducción:**

Usa una única plantilla para generar programáticamente un número ilimitado de páginas, ideal para cosas como artículos de un blog, perfiles de usuario o fichas de productos.

#### 2. **Ejemplo:**

Imagina que tienes una tienda online. No vas a crear un archivo `.astro` para cada producto. En su lugar, creas una sola plantilla:

`src/pages/productos/[id].astro`

Esta única plantilla puede generar:

- `tusitio.com/productos/zapatillas-deportivas`
- `tusitio.com/productos/camiseta-de-algodon`
- `tusitio.com/productos/gorra-edicion-limitada`

**Explicación del ejemplo:**
Los corchetes `[id]` en el nombre del archivo le dicen a Astro: "Oye, esta parte de la URL va a ser una variable". A esa variable la llamamos "parámetro". En este caso, el parámetro se llama `id`.

#### 3. **Desarrollo:**

Las rutas dinámicas son la clave para construir sitios web complejos y basados en datos sin tener que crear manualmente cientos de archivos. Creas una plantilla y la alimentas con datos (desde una base de datos, una API o archivos locales) para generar todas las páginas que necesites.

🔴 **Fundamental**: En cuanto tu sitio web necesite mostrar colecciones de elementos (posts, productos, usuarios, recetas, etc.), las rutas dinámicas se vuelven imprescindibles.

---

## E - Generando Páginas Dinámicas (Sitios Estáticos) con `getStaticPaths` 🔴

#### 1. **Introducción:**

Para sitios estáticos (el modo por defecto de Astro), debes usar la función `getStaticPaths` para decirle a Astro, durante el proceso de construcción, la lista exacta de páginas que debe generar a partir de tu plantilla dinámica.

#### 2. **Ejemplo:**

```javascript
// src/pages/perros/[nombre].astro
---
// 1. Esta función se ejecuta UNA SOLA VEZ durante la construcción del sitio.
export function getStaticPaths() {
  // 2. Devuelve una lista de objetos. Cada objeto creará una página.
  return [
    { params: { nombre: "fido" } },    // Crea /perros/fido
    { params: { nombre: "luna" } },    // Crea /perros/luna
    { params: { nombre: "rex" } },     // Crea /perros/rex
  ];
}

// 3. Astro.params contiene el valor para ESTA página específica.
const { nombre } = Astro.params;
---

<!-- 4. El HTML usa el valor del parámetro. -->
<h1>¡Hola, soy un perro y me llamo {nombre}!</h1>
```

**Explicación del ejemplo:**
Piensa en `getStaticPaths` como una lista de instrucciones. Le dices a Astro: "Toma esta plantilla `[nombre].astro` y úsala para crear una página para 'fido', otra para 'luna' y otra para 'rex'". Astro obedece y genera tres archivos HTML estáticos: `fido.html`, `luna.html` y `rex.html` dentro de una carpeta `perros/`.

#### 3. **Desarrollo:**

**¡CUIDADO!** Este es un punto donde muchos principiantes se confunden. `getStaticPaths` **NO se ejecuta cada vez que un usuario visita la página**. Se ejecuta una única vez, cuando tú (el desarrollador) ejecutas el comando `astro build`. Su trabajo es pre-generar todas las páginas posibles de antemano.

🔴 **Fundamental**: Si usas el modo estático de Astro (el más común), `getStaticPaths` es la herramienta **obligatoria** para crear rutas dinámicas. No hay otra forma de hacerlo.

---

## F - Accediendo a Parámetros de la URL con `Astro.params` 🔴

#### 1. **Introducción:**

Dentro del código de una página dinámica, puedes obtener el valor concreto de la URL del visitante (por ejemplo, "fido" de `/perros/fido`) a través del objeto global `Astro.params`.

#### 2. **Ejemplo:**

```javascript
// En el archivo: src/pages/productos/[categoria]/[id].astro
---
// Si un usuario visita: /productos/ropa/camiseta-123
const { categoria, id } = Astro.params;

// Ahora, las variables contienen:
// categoria = "ropa"
// id = "camiseta-123"
---
<h1>Mostrando el producto: {id}</h1>
<p>Categoría: {categoria}</p>
```

**Explicación del ejemplo:**
`Astro.params` es un objeto que contiene los valores de los parámetros de la URL para la página que se está renderizando. Los nombres de las propiedades en el objeto (`categoria`, `id`) coinciden exactamente con los nombres que pusiste entre corchetes en el nombre del archivo (`[categoria]`, `[id]`).

#### 3. **Desarrollo:**

Este es el puente entre la URL que visita el usuario y el contenido que muestras en la página. Usas `Astro.params` para saber qué datos específicos debes buscar y mostrar. Por ejemplo, usarías el `id` del producto para consultar tu base de datos y obtener su precio, descripción e imágenes.

🔴 **Fundamental**: Una ruta dinámica no sirve de nada si no puedes acceder al valor dinámico. `Astro.params` es la forma de hacerlo, por lo que es absolutamente esencial.

---

## G - Parámetros "Rest" (`[...path]`) 🟡

#### 1. **Introducción:**

Captura rutas de URL que tienen un número variable de segmentos (partes separadas por `/`) usando un parámetro "rest" con tres puntos `...` dentro de los corchetes.

#### 2. **Ejemplo:**

```javascript
// Archivo: src/pages/archivos/[...ruta].astro
---
const { ruta } = Astro.params;
---
<h1>Ruta del archivo solicitado: {ruta}</h1>

<!--
Si la URL es /archivos/documentos/informes/2024.pdf
La variable `ruta` contendrá el string: "documentos/informes/2024.pdf"

Si la URL es /archivos/imagenes/vacaciones.jpg
La variable `ruta` contendrá el string: "imagenes/vacaciones.jpg"
-->
```

**Explicación del ejemplo:**
El parámetro `[...ruta]` actúa como una aspiradora, absorbiendo todo lo que viene después de `/archivos/` en una sola variable de texto. Es increíblemente útil para páginas de documentación, visores de archivos o cualquier estructura donde las URLs puedan tener una profundidad variable.

#### 3. **Desarrollo:**

A diferencia de un parámetro normal como `[id]` que solo captura un segmento de la URL (el texto entre dos `/`), el parámetro "rest" captura todo hasta el final. Puedes incluso tener una ruta vacía si defines `path: undefined` en `getStaticPaths`, lo que haría que `[...ruta].astro` también gestione la URL `/archivos/`.

🟡 **Importante**: Aunque no lo usarás en todos los proyectos, es una herramienta muy poderosa para ciertos tipos de sitios. Conocer su existencia te ahorrará muchos dolores de cabeza cuando necesites rutas flexibles.

---

## H - Rutas Dinámicas "On-Demand" (SSR) 🟡

#### 1. **Introducción:**

Cuando usas Astro en modo de renderizado en el servidor (SSR), las páginas dinámicas se generan al instante, justo cuando un usuario las solicita, sin necesidad de usar `getStaticPaths`.

#### 2. **Ejemplo:**

```javascript
// Archivo: src/pages/usuarios/[username].astro
// ¡OJO! No hay `getStaticPaths` aquí.
---
// Esto se ejecuta CADA VEZ que alguien visita una URL como /usuarios/loquesea
const { username } = Astro.params;

// Aquí podrías buscar el usuario en una base de datos en tiempo real.
const userInfo = await db.findUser(username);
---

<h1>Perfil de: {username}</h1>
<!-- Muestra la información del usuario -->
```

**Explicación del ejemplo:**
En modo SSR, el servidor espera una petición. Cuando llega una petición para `/usuarios/ana`, ejecuta el código del archivo, obtiene el `username` "ana" de `Astro.params`, busca sus datos y construye la página HTML sobre la marcha para enviársela a Ana. No hay páginas pre-construidas.

#### 3. **Desarrollo:**

Esta es la principal diferencia entre el modo estático (SSG) y el modo servidor (SSR).

- **SSG (con `getStaticPaths`)**: Construye todo por adelantado. Rápido y seguro, pero necesitas saber todas las URLs en el momento de la construcción.
- **SSR (sin `getStaticPaths`)**: Construye sobre la marcha. Infinitamente flexible, puede manejar cualquier URL y mostrar contenido en tiempo real, pero requiere un servidor activo.

🟡 **Importante**: Si tu aplicación necesita mostrar datos que cambian constantemente o si tienes tantas páginas que es imposible generarlas todas de antemano (por ejemplo, perfiles de millones de usuarios), el modo SSR y las rutas dinámicas "on-demand" son la solución.

---

## I - Redirecciones 🟡

#### 1. **Introducción:**

Puedes redirigir automáticamente a los usuarios de una URL antigua a una nueva, ya sea de forma permanente en la configuración o dinámicamente desde el código de una página.

#### 2. **Ejemplo (Configurada):**

Esto es para cambios permanentes, como cuando reestructuras tu sitio.

```javascript
// En tu archivo astro.config.mjs
import { defineConfig } from "astro/config";

export default defineConfig({
  redirects: {
    // Si alguien visita /mi-pagina-antigua, será enviado a /mi-pagina-nueva
    "/mi-pagina-antigua": "/mi-pagina-nueva",

    // También puedes redirigir a sitios externos
    "/mi-blog-viejo": "https://mi-nuevo-blog.com",
  },
});
```

#### 3. **Ejemplo (Dinámica):**

Esto es para lógica dentro de tu aplicación, como proteger una ruta.

```javascript
// En src/pages/panel-de-control.astro
---
import { estaLogueado } from "../auth";

// Comprueba si el usuario ha iniciado sesión (ej. leyendo una cookie)
if (!estaLogueado(Astro.request)) {
  // Si no lo está, lo enviamos a la página de login. La página actual deja de ejecutarse.
  return Astro.redirect('/login');
}
---
<h1>¡Bienvenido a tu panel de control!</h1>
```

#### 4. **Desarrollo:**

Las redirecciones son una herramienta fundamental para la gestión de un sitio web.

- **Configuradas**: Son excelentes para el SEO. Le dicen a los buscadores que una página se ha movido permanentemente (`código 301`), evitando que pierdas posicionamiento.
- **Dinámicas**: Son esenciales para la lógica de la aplicación, como la autenticación, o para guiar a los usuarios a través de un flujo de varios pasos.

🟡 **Importante**: Tarde o temprano necesitarás redirigir una URL. Saber que tienes estas dos herramientas (una para la estructura del sitio y otra para la lógica de la aplicación) es crucial.

---

## J - Reescrituras (Rewrites) 🔵

#### 1. **Introducción:**

Muestra el contenido de una ruta diferente sin cambiar la URL que el usuario ve en la barra de direcciones de su navegador, usando `Astro.rewrite()`.

#### 2. **Ejemplo:**

Imagina que quieres que la URL `/productos` muestre el contenido de tu página de inicio, pero sin que la URL cambie a `/`.

```javascript
// En src/pages/productos.astro
---
// El usuario visita /productos...
// ...pero Astro internamente buscará y renderizará el contenido de index.astro
return Astro.rewrite('/');
---
// Este archivo ahora está vacío porque su contenido nunca se mostrará.
```

**Explicación del ejemplo:**
El usuario escribe `tusitio.com/productos` en su navegador y presiona Enter. La URL en la barra de direcciones **permanece** como `tusitio.com/productos`, pero el contenido que ve es el de la página de inicio. Es como poner una máscara.

#### 3. **Desarrollo:**

**¡No confundir con una redirección!**

- **Redirección (`Astro.redirect`)**: Le dice al navegador "ve a esta OTRA URL". La URL en la barra de direcciones cambia.
- **Reescritura (`Astro.rewrite`)**: Sirve el contenido de OTRA ruta pero se queda en la URL actual. La URL no cambia.

Es útil para casos de uso más avanzados, como mostrar contenido localizado (`/es-MX/` mostrando el contenido de `/es/`) o para mejorar la estructura de URLs por motivos de SEO sin tener que duplicar contenido.

🔵 **Específico**: No es algo que necesites todos los días, pero es una herramienta muy potente para situaciones particulares. Es bueno saber que existe por si te encuentras con un problema de enrutamiento complejo.

---

## K - Orden de Prioridad de Rutas 🔵

#### 1. **Introducción:**

Si varias reglas de enrutamiento podrían aplicarse a la misma URL (por ejemplo, una ruta estática y una dinámica), Astro sigue un orden de prioridad estricto para decidir cuál usar.

#### 2. **Ejemplo:**

Imagina que tienes estos dos archivos:

1.  `src/pages/posts/crear.astro` (Ruta estática)
2.  `src/pages/posts/[slug].astro` (Ruta dinámica)

Si un usuario visita la URL `/posts/crear`:

- **¿Qué ruta gana?** Gana `crear.astro`.
- **¿Por qué?** Porque las rutas estáticas (nombres de archivo fijos) siempre tienen prioridad sobre las rutas dinámicas (`[slug]`).

#### 3. **Desarrollo:**

No necesitas memorizar todas las reglas, pero la idea general es: **las rutas más específicas ganan**.

- Las rutas estáticas (`/posts/crear`) son más específicas que las dinámicas (`/posts/[slug]`).
- Las rutas dinámicas con parámetros nombrados (`/posts/[slug]`) son más específicas que las rutas "rest" (`/posts/[...slug]`).

Saber esto te ayuda a diagnosticar por qué una página no se muestra como esperas cuando tienes rutas que podrían entrar en conflicto.

🔵 **Específico**: Solo te preocuparás por esto cuando construyas sistemas de rutas complejos. Para la mayoría de los sitios, el comportamiento es intuitivo y no requiere atención.

---

## L - Paginación 🟡

#### 1. **Introducción:**

Astro te ofrece una función `paginate()` para dividir fácilmente grandes conjuntos de datos (como cientos de artículos de blog) en múltiples páginas numeradas.

#### 2. **Ejemplo:**

```javascript
// En src/pages/astronautas/[page].astro
---
import { astronautas } from '../../data'; // Imagina que esto es un array con 100 astronautas

export function getStaticPaths({ paginate }) {
  // paginate() crea las páginas por ti.
  // Le pasas los datos y cuántos elementos quieres por página.
  return paginate(astronautas, { pageSize: 10 });
  // Esto generará /astronautas/1, /astronautas/2, ..., /astronautas/10
}

// En `Astro.props` recibes un objeto `page` con todo lo necesario.
const { page } = Astro.props;
---

<h1>Página {page.currentPage} de Astronautas</h1>
<ul>
  <!-- page.data contiene solo los 10 astronautas de esta página -->
  {page.data.map(astronauta => <li>{astronauta.nombre}</li>)}
</ul>

<!-- Y `page.url` tiene enlaces útiles para la navegación -->
{page.url.prev && <a href={page.url.prev}>&laquo; Anterior</a>}
{page.url.next && <a href={page.url.next}>Siguiente &raquo;</a>}
```

**Explicación del ejemplo:**
La función `paginate` es una maravilla. La usas dentro de `getStaticPaths` y ella se encarga de todo:

1.  Calcula cuántas páginas se necesitan.
2.  Crea las rutas para cada página (`/astronautas/1`, `/astronautas/2`, etc.).
3.  "Corta" tu array de datos y entrega a cada página solo la porción que le corresponde.
4.  Te da un objeto `page` con información útil como la página actual, el total de páginas y las URLs para los botones "Anterior" y "Siguiente".

#### 3. **Desarrollo:**

La paginación es un requisito común en blogs, tiendas, galerías y cualquier sitio que muestre listas largas de contenido. La herramienta `paginate()` de Astro te ahorra una cantidad enorme de trabajo manual y código repetitivo.

🟡 **Importante**: Si tu sitio va a tener un blog o un catálogo de productos, la paginación es una característica que casi con toda seguridad necesitarás implementar.

---

## M - Excluir Páginas de la Construcción 🟡

#### 1. **Introducción:**

Puedes evitar que Astro convierta un archivo o una carpeta entera en una página web simplemente anteponiendo un guion bajo `_` a su nombre.

#### 2. **Ejemplo:**

```
# Estructura de archivos en src/pages/
- index.astro             # ✅ Se convierte en tusitio.com/
- about.astro             # ✅ Se convierte en tusitio.com/about
- _mi-borrador.astro      # ❌ Se ignora. No se crea ninguna página.
- components/
  - _Boton.astro          # ❌ Se ignora. Es un componente, no una página.
- utils/
  - _helpers.js           # ❌ Se ignora. Es un archivo de utilidades.
```

**Explicación del ejemplo:**
Cualquier archivo o carpeta que comience con `_` es invisible para el sistema de enrutamiento de Astro. No se procesará como una página y no se incluirá en el sitio final.

#### 3. **Desarrollo:**

Esto es increíblemente útil. Te permite organizar tu proyecto de manera lógica, colocando componentes (`_Boton.astro`) o archivos de ayuda (`_helpers.js`) justo al lado de las páginas que los utilizan, sin el riesgo de que Astro los convierta accidentalmente en páginas web accesibles. También es perfecto para dejar páginas en borrador (`_mi-borrador.astro`) mientras trabajas en ellas.

🟡 **Importante**: Esta es una práctica muy común y recomendada para mantener tus proyectos de Astro limpios y bien organizados. ¡Úsala sin miedo
