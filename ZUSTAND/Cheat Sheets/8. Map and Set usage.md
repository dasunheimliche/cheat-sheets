## A - Usando `Map` y `Set` en Zustand: Â¡EnvuÃ©lvelos!

#### 1. **DefiniciÃ³n:**

Cuando quieras usar `Map` o `Set` dentro de tu store de Zustand, Â¡tienes que ponerlos dentro de un objeto! Zustand necesita que estÃ©n dentro de un objeto para poder detectar y manejar sus cambios correctamente, especialmente si quieres que esos cambios se reflejen en tus componentes de React. ğŸ

#### 2. **Ejemplo:**

```typescript
import { create } from "zustand";

const useFooBar = create(() => ({ foo: new Map(), bar: new Set() }));
```

**ExplicaciÃ³n del ejemplo:**
En lugar de hacer algo como `create(() => new Map())` o `create(() => new Set())`, creamos un objeto que _contiene_ nuestro `Map` y `Set`. AquÃ­, `foo` es nuestro `Map` y `bar` es nuestro `Set`, Â¡ambos dentro de un objeto que Zustand puede manejar! ğŸ“¦

#### 3. **Notas o advertencias:**

- **Â¿Por quÃ© un objeto?** Zustand estÃ¡ diseÃ±ado para rastrear cambios en objetos. Al envolver `Map` y `Set` en un objeto, le damos a Zustand algo que puede observar y de lo que puede hacer un seguimiento. Â¡Es como darle a Zustand un "contenedor" para que pueda hacer su magia! âœ¨

## B - Actualizando `Map` y `Set` para React: Â¡Llama a `setState`!

#### 1. **DefiniciÃ³n:**

Si modificas un `Map` o `Set` dentro de tu store y quieres que esos cambios se vean en tus componentes de React que usan ese store, Â¡necesitas usar `setState`! `setState` es la forma que tiene Zustand de decirle a React: "Â¡Oye, el estado ha cambiado, actualiza los componentes que necesiten saberlo!". ğŸ“¢

#### 2. **Ejemplo:**

```typescript
import { create } from "zustand";

const useFooBar = create(() => ({ foo: new Map(), bar: new Set() }));

function doSomething() {
  // ... haciendo algo ...

  useFooBar.setState((prev) => ({
    foo: new Map(prev.foo).set("newKey", "newValue"),
    bar: new Set(prev.bar).add("newKey"),
  }));
}
```

**ExplicaciÃ³n del ejemplo:**
Dentro de `doSomething`, cuando queremos actualizar `foo` y `bar`, no los modificamos directamente. En lugar de eso, llamamos a `useFooBar.setState(...)`. Dentro de `setState`, recibimos el estado `prev` anterior, y devolvemos un _nuevo_ objeto de estado con los `Map` y `Set` actualizados. Â¡Esta es la clave para que React se entere de los cambios! ğŸ”‘

#### 3. **Notas o advertencias:**

- **Inmutabilidad: Â¡Crea nuevos `Map` y `Set`!** FÃ­jate en `new Map(prev.foo).set(...)` y `new Set(prev.bar).add(...)`. Estamos creando _nuevas_ instancias de `Map` y `Set` a partir de las anteriores, y luego aÃ±adiendo los nuevos valores. Â¡Esto es muy importante! React y Zustand funcionan mejor cuando tratas los estados como inmutables y creas nuevos objetos/colecciones en lugar de modificar los existentes. ğŸ”„
- **`setState` es el "despertador" de React:** Llamar a `setState` es como darle un "toque de atenciÃ³n" a React. Le dices: "Â¡Algo ha cambiado en el store, revisa si necesitas actualizar algo en la interfaz!". â°
