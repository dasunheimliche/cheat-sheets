## A - Reseteando el Estado de un Ãšnico Store

#### 1. **DefiniciÃ³n:**

La forma mÃ¡s sencilla de resetear el estado de un store de Zustand es definir un **estado inicial** y una funciÃ³n **`reset`** dentro de la definiciÃ³n de tu store. Esta funciÃ³n `reset` simplemente vuelve a establecer el estado del store a su valor inicial. Â¡Es como presionar el botÃ³n de "reinicio"! âª

#### 2. **Ejemplo:**

```typescript
import { create } from "zustand";

// Define tipos para el estado y las acciones por separado
type State = {
  salmon: number;
  tuna: number;
};

type Actions = {
  addSalmon: (qty: number) => void;
  addTuna: (qty: number) => void;
  reset: () => void; // Â¡AcciÃ³n para resetear!
};

// Define el estado inicial
const initialState: State = {
  salmon: 0,
  tuna: 0,
};

// Crea el store
const useSlice = create<State & Actions>()((set, get) => ({
  ...initialState, // Usa el estado inicial aquÃ­
  addSalmon: (qty: number) => {
    set({ salmon: get().salmon + qty });
  },
  addTuna: (qty: number) => {
    set({ tuna: get().tuna + qty });
  },
  reset: () => {
    set(initialState); // Â¡FunciÃ³n reset que usa el estado inicial!
  },
}));
```

**ExplicaciÃ³n del ejemplo:**

- **`initialState`:** Definimos una constante `initialState` que guarda el valor inicial de nuestro estado (`salmon: 0, tuna: 0`).
- **`reset: () => { set(initialState); }`:** AÃ±adimos una funciÃ³n `reset` a nuestro store. Cuando llamas a `reset()`, usamos `set(initialState)` para establecer el estado del store directamente al valor de `initialState`. Â¡AsÃ­ de fÃ¡cil! âœ¨

#### 3. **Notas o advertencias:**

- **Estado inicial centralizado:** Definir `initialState` por separado hace que sea muy claro cuÃ¡l es el estado inicial de tu store y facilita la funciÃ³n `reset`. Â¡Es una buena prÃ¡ctica para la organizaciÃ³n! ğŸ—‚ï¸
- **Llama a `useSlice.getState().reset()`:** Para resetear el estado, simplemente obtÃ©n la funciÃ³n `reset` del store usando `useSlice.getState().reset()` y llÃ¡mala. Â¡Tu store volverÃ¡ a su estado original! ğŸª„

## B - Reseteando MÃºltiples Stores a la Vez

#### 1. **DefiniciÃ³n:**

Si tienes mÃºltiples stores de Zustand y quieres resetearlos todos juntos (por ejemplo, al hacer pruebas o al cerrar sesiÃ³n en una aplicaciÃ³n), puedes crear una funciÃ³n `create` personalizada que rastree todos los stores y te permita resetearlos todos con una sola llamada. Â¡Es como tener un botÃ³n de "resetear todo" para tus stores! ğŸ’£

#### 2. **Ejemplo:**

```typescript
import type { StateCreator } from "zustand";
import { create as actualCreate } from "zustand";

const storeResetFns = new Set<() => void>(); // Guarda funciones de reset aquÃ­

const resetAllStores = () => {
  storeResetFns.forEach((resetFn) => {
    resetFn(); // Llama a la funciÃ³n reset de cada store
  });
};

export const create = (<T>() => {
  // Â¡Sobreescribe la funciÃ³n `create`!
  return (stateCreator: StateCreator<T>) => {
    const store = actualCreate(stateCreator); // Usa la funciÃ³n `create` original de Zustand
    const initialState = store.getInitialState();
    storeResetFns.add(() => {
      // AÃ±ade una funciÃ³n reset para este store al Set
      store.setState(initialState, true); // `true` para reemplazar el estado completamente
    });
    return store;
  };
}) as typeof actualCreate; // Â¡Asegura que nuestro `create` personalizado tenga el mismo tipo que el original!
```

**ExplicaciÃ³n del ejemplo:**

- **`storeResetFns = new Set<() => void>()`:** Creamos un `Set` llamado `storeResetFns` para guardar las funciones de reset de cada store que creemos con nuestro `create` personalizado. Un `Set` es Ãºtil porque solo guarda valores Ãºnicos y facilita iterar sobre ellos. ğŸ§°
- **`resetAllStores = () => { ... }`:** Esta funciÃ³n itera sobre todas las funciones de reset guardadas en `storeResetFns` y las llama. Â¡Esto resetea todos los stores a la vez! ğŸ’¥
- **`export const create = (<T>() => { ... }) as typeof actualCreate;`:** AquÃ­ "sobreescribimos" la funciÃ³n `create` de Zustand con nuestra propia versiÃ³n personalizada.
  - Dentro de nuestro `create` personalizado, llamamos a la funciÃ³n `create` _original_ de Zustand (`actualCreate`) para crear el store normalmente.
  - Obtenemos el estado inicial del store con `store.getInitialState()`.
  - AÃ±adimos una nueva funciÃ³n de reset al `storeResetFns`. Esta funciÃ³n, cuando se llama, usa `store.setState(initialState, true)` para resetear el estado de _este_ store especÃ­fico a su estado inicial. El argumento `true` en `setState` es importante: le dice a Zustand que _reemplace_ el estado completamente, en lugar de hacer un "merge" superficial.
  - Devolvemos el store creado.
  - `as typeof actualCreate` asegura que nuestro `create` personalizado tenga exactamente el mismo tipo que la funciÃ³n `create` original de Zustand, Â¡para que TypeScript no se queje! ğŸ›¡ï¸

#### 3. **Notas o advertencias:**

- **Sobreescribiendo `create`:** Este patrÃ³n "sobreescribe" la funciÃ³n `create` de Zustand. Esto significa que en los archivos donde importes este `create` personalizado, Â¡estarÃ¡s usando _tu_ versiÃ³n, no la original de Zustand! AsegÃºrate de entender las implicaciones de esto. âš ï¸
- **`storeResetFns` guarda las funciones reset:** El `Set` `storeResetFns` es la clave para rastrear y resetear todos los stores. Cada vez que usas tu `create` personalizado, se aÃ±ade una nueva funciÃ³n reset a este `Set`. ğŸ”‘
- **Llama a `resetAllStores()`:** Para resetear _todos_ los stores a la vez, simplemente llama a la funciÃ³n `resetAllStores()`. Â¡Todos los stores creados con tu `create` personalizado volverÃ¡n a su estado inicial! ğŸª„
