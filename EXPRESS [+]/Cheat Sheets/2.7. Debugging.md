## A - `DEBUG=express:*`: El Interruptor General de Luz 游리

#### 1. **Introducci칩n:**

Este comando es como encender todas las luces de un edificio para ver qu칠 est치 pasando en cada habitaci칩n y pasillo; activa un flujo detallado de mensajes internos de Express.

#### 2. **Ejemplo:**

Imagina que tu aplicaci칩n se llama `index.js`. Para ver _todo_ lo que Express hace por dentro, abres tu terminal y escribes:

**En Mac o Linux:**

```bash
$ DEBUG=express:* node index.js
```

**En Windows (usando PowerShell):**

```powershell
> $env:DEBUG = "express:*"; node index.js
```

**Explicaci칩n del ejemplo:**
Al ejecutar esto, tu consola se llenar치 de vida. Ver치s algo como:

```
  express:router:route new / +0ms
  express:router:layer new / +1ms
  express:router:route get / +1ms
  express:application compile etag weak +1ms
  ... (muchos m치s logs)
```

- **`DEBUG=express:*`**: Esto es una **variable de entorno**. No te asustes por el nombre. Es simplemente una instrucci칩n que le das a tu sistema _antes_ de ejecutar tu programa. Le dices: "Oye, activa todos (`*`) los mensajes de depuraci칩n que pertenezcan al grupo `express`".
- **`node index.js`**: Este es el comando que ya conoces para iniciar tu aplicaci칩n.
- **El resultado**: Cada l칤nea te dice qu칠 parte de Express (`express:router`, `express:application`) est치 haciendo algo, qu칠 es ese algo (`new route`, `compile etag`), y cu치nto tiempo pas칩 desde el 칰ltimo mensaje (`+1ms`). 춰Es un diario 칤ntimo de tu app!

#### 3. **Desarrollo**:

Usar `DEBUG=express:*` es tu primer instinto cuando algo no funciona y no sabes por qu칠. 쯋na ruta no responde? 쯋n middleware parece no ejecutarse? Este comando te mostrar치 si Express est치 siquiera registrando la ruta o ejecutando el middleware en el orden que esperas. Es ruidoso, s칤, pero es el punto de partida m치s completo.

游리 **Importante**: Es fundamental para el diagn칩stico inicial. Aunque la cantidad de informaci칩n puede ser abrumadora al principio, aprender a leerla te da superpoderes para entender el flujo interno de Express. No tienes que entender cada l칤nea, pero s칤 buscar las que se relacionan con tu problema (por ejemplo, buscando el nombre de tu ruta).

---

## B - Depuraci칩n Espec칤fica: Apuntando con un L치ser 游리

#### 1. **Introducci칩n:**

En lugar de encender todas las luces del edificio (como en el punto A), esto es como usar una linterna para iluminar solo una habitaci칩n espec칤fica, reduciendo el ruido y enfoc치ndote en el 치rea del problema.

#### 2. **Ejemplo:**

Si sospechas que tu problema est치 en c칩mo se manejan las rutas (el problema m치s com칰n), puedes aislar los logs para ver solo la actividad del router.

**En Mac, Linux o Windows:**

```bash
# Para ver solo los logs del router
$ DEBUG=express:router node index.js

# Para ver solo los logs del ciclo de vida de la aplicaci칩n (inicio, configuraci칩n)
$ DEBUG=express:application node index.js
```

**Explicaci칩n del ejemplo:**
Al usar `DEBUG=express:router`, la avalancha de logs se convierte en un informe manejable y centrado exclusivamente en las rutas:

```
  express:router dispatching GET /users/profile +4h
  express:router query  : /users/profile +2ms
  express:router router  : /users/profile +2ms
```

Ves claramente que el `router` est치 despachando (`dispatching`) una petici칩n `GET` a la ruta `/users/profile`. 춰Mucho m치s limpio!

#### 3. **Desarrollo**:

La belleza de esto radica en su precisi칩n. Cuando ya tienes una pista de d칩nde puede estar el fallo, cambias el `*` (que significa "todo") por el nombre espec칤fico del m칩dulo que te interesa (`router`, `application`, etc.). Esto te ahorra tiempo y te evita tener que buscar una aguja en un pajar.

游리 **Importante**: Esta es la evoluci칩n natural del debugging. Empiezas con el general (`express:*`) para tener una visi칩n amplia y, una vez que tienes una hip칩tesis, te vuelves espec칤fico para confirmarla. Dominar esto te hace un depurador mucho m치s eficiente.

---

## C - Depurando tu App Generada: El Canal Privado de tu App 游리

#### 1. **Introducci칩n:**

Si creaste tu aplicaci칩n usando el `express-generator`, esta ya viene con su propio "canal" de depuraci칩n para que puedas emitir tus propios mensajes de diagn칩stico.

#### 2. **Ejemplo:**

Supongamos que usaste el comando `express mi-app-genial`. El generador crea una estructura de proyecto para ti. Para ver los mensajes de depuraci칩n de _esa aplicaci칩n en particular_, har칤as lo siguiente:

```bash
$ DEBUG=mi-app-genial:* node ./bin/www
```

**Explicaci칩n del ejemplo:**

- **`DEBUG=mi-app-genial:*`**: F칤jate que aqu칤 no usamos `express:*`. Usamos el nombre que le diste a tu aplicaci칩n. Esto activa los mensajes que el propio c칩digo de `mi-app-genial` (o t칰 mismo) haya definido.
- **`node ./bin/www`**: En las apps generadas, el punto de entrada no suele ser `index.js`, sino este archivo `www` dentro de la carpeta `bin`.

#### 3. **Desarrollo**:

**춰Cuidado con esta confusi칩n!** Es la m치s com칰n de todas.

- `DEBUG=express:*` te muestra los secretos **del framework Express**.
- `DEBUG=nombre-de-tu-app:*` te muestra los secretos **de tu propio c칩digo**.

El generador de Express usa una librer칤a llamada `debug` (la misma que usa Express por debajo) para configurar esto por ti. Esto te permite a침adir tus propias "balizas" de depuraci칩n en tu c칩digo y activarlas o desactivarlas a voluntad desde la terminal, sin tener que llenar tu c칩digo de `console.log()` que luego tienes que borrar.

游리 **Importante**: Si usas el generador de Express, esto es crucial. Te permite separar los problemas del framework de los problemas de tu propia l칩gica de negocio.

---

## D - Depuraci칩n M칰ltiple: Escuchando Varias Conversaciones a la Vez 游리

#### 1. **Introducci칩n:**

Puedes combinar m칰ltiples "canales" de depuraci칩n en un solo comando para obtener una visi칩n completa de c칩mo interact칰an las diferentes partes de tu sistema.

#### 2. **Ejemplo:**

Quieres ver los logs del router de Express Y los logs de tu propia aplicaci칩n (`mi-app-genial`) al mismo tiempo.

```bash
# 춰OJO! Separados por coma, SIN ESPACIOS.
$ DEBUG=express:router,mi-app-genial:* node ./bin/www
```

**Explicaci칩n del ejemplo:**
La salida de la consola ahora mezclar치 los mensajes de ambas fuentes, usualmente con colores diferentes si tu terminal lo soporta, permiti칠ndote seguir una petici칩n desde que entra al router de Express hasta que es procesada por tu c칩digo.

```
  express:router dispatching GET / +1s
  mi-app-genial:database Conectando a la base de datos... +2ms
  express:router dispatching GET /users +5ms
  mi-app-genial:user Se encontr칩 el usuario 'Ana' +12ms
```

#### 3. **Desarrollo**:

Esto es incre칤blemente poderoso para depurar flujos complejos. Puedes ver la cadena de eventos completa. La regla de oro aqu칤 es la sintaxis: **los nombres de los canales se separan por comas, sin ning칰n espacio entre ellos**. Si pones un espacio, es muy probable que no funcione como esperas. 춰Te lo digo porque es un error en el que todos hemos ca칤do!

游리 **Importante**: Es una t칠cnica de nivel intermedio que se vuelve indispensable cuando las aplicaciones crecen en complejidad. Te permite correlacionar eventos entre el framework, tu c칩digo y otras librer칤as.

---

## E - Variables Avanzadas (`DEBUG_*`): Ajustando tu Microscopio 游댯

#### 1. **Introducci칩n:**

Adem치s de activar los mensajes, puedes usar otras variables de entorno para personalizar _c칩mo_ se muestran esos mensajes en tu consola.

#### 2. **Ejemplo:**

Estas variables se usan en combinaci칩n con la variable `DEBUG` principal.

| Variable            | Prop칩sito explicado de forma sencilla                                                                                                                                                       |
| :------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `DEBUG_COLORS`      | 쯈uieres que los logs usen colores para diferenciarse? Pon esto en `true`. Si te molestan, ponlo en `false`.                                                                                |
| `DEBUG_DEPTH`       | Si un log muestra un objeto (ej: `{ a: { b: { c: 1 } } }`), esto controla qu칠 tan "profundo" se muestra. Por defecto, es bajo. Aum칠ntalo a `5` o `10` para ver todos los detalles anidados. |
| `DEBUG_SHOW_HIDDEN` | Algunos objetos tienen propiedades "secretas" que no se muestran normalmente. Activa esto (`true`) para revelarlas. 춰Para cuando necesitas ser un verdadero detective!                      |
| `DEBUG_FD`          | **(S칰per avanzado)** Por defecto, los logs se escriben en la salida de error de la consola. Esto te permite redirigirlos a un archivo. Rara vez lo necesitar치s.                             |

**Ejemplo de uso combinado:**

```bash
# Activa los logs del router, sin colores, y mostrando objetos hasta 5 niveles de profundidad
$ DEBUG=express:router DEBUG_COLORS=false DEBUG_DEPTH=5 node index.js
```

#### 3. **Desarrollo**:

No necesitas memorizar esto. Solo necesitas saber que existe. El 99% del tiempo, `DEBUG` ser치 suficiente. Pero para ese 1% de casos en los que un objeto es demasiado complejo y no se muestra completo en el log, recordar `DEBUG_DEPTH` puede ser un salvavidas.

游댯 **Espec칤fico**: Estas son herramientas de precisi칩n para situaciones particulares. No son para el d칤a a d칤a, pero conocer su existencia te convierte en un desarrollador con m치s recursos. Son como los accesorios especiales de una navaja suiza: no los usas siempre, pero cuando los necesitas, te salvan el d칤a.
