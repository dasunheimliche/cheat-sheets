## A - Basic Usage of v-model on Components

**Definición:** v-model en componentes permite crear un enlace bidireccional entre un valor en el componente padre y un valor en el componente hijo. Es una forma abreviada de sincronizar datos entre componentes.

**Ejemplo:**

```Vue
// Componente hijo (Child.vue)
<script setup>
const model = defineModel();

function update() {
  model.value++;
}
</script>

<template>
  <div>Parent bound v-model is: {{ model }}</div>
  <button @click="update">Increment</button>
</template>
```

```Vue
// Componente padre (Parent.vue)
<template>
  <Child v-model="countModel" />
</template>
<script setup>
import { ref } from 'vue';
import Child from './Child.vue';
const countModel = ref(0);
</script>
```

(En este ejemplo, el componente Child usa defineModel() para crear un enlace bidireccional con countModel en el componente padre. Cuando el botón en Child se hace clic, el valor de countModel en el padre se actualiza.)

## B - defineModel() Under the Hood

**Definición:** defineModel() es una macro que simplifica la creación de enlaces bidireccionales. Internamente, crea un prop llamado modelValue y emite un evento llamado update:modelValue.

**Ejemplo:**

```Vue
El ejemplo anterior con defineModel() es equivalente a:

// Componente hijo (Child.vue) - Pre Vue 3.4
<script setup>
const props = defineProps(['modelValue']);
const emit = defineEmits(['update:modelValue']);
</script>

<template>
  <input
    :value="props.modelValue"
    @input="emit('update:modelValue', $event.target.value)"
  />
</template>
```

```Vue
// Componente padre (Parent.vue) - Pre Vue 3.4
<template>
  <Child
    :modelValue="countModel"
    @update:modelValue="$event => (countModel = $event)"
  />
</template>
<script setup>
import { ref } from 'vue';
import Child from './Child.vue';
const countModel = ref(0);
</script>
```

(Este ejemplo muestra cómo se implementaría el mismo enlace bidireccional sin usar defineModel(). defineModel() simplifica este proceso.)

## C - v-model Arguments

**Definición:** v-model puede aceptar argumentos para enlazar diferentes props y eventos en un mismo componente.

**Ejemplo:**

```Vue
// Componente hijo (MyComponent.vue)
<script setup>
const title = defineModel('title');
</script>

<template>
  <input type="text" v-model="title" />
</template>
```

```Vue
// Componente padre
<template>
  <MyComponent v-model:title="bookTitle" />
</template>
<script setup>
import { ref } from 'vue';
import MyComponent from './MyComponent.vue';
const bookTitle = ref('');
</script>
```

(En este ejemplo, v-model:title enlaza el prop title del componente MyComponent con la variable bookTitle en el componente padre.)

## D - Multiple v-model Bindings

**Definición:** Se pueden crear múltiples enlaces v-model en un mismo componente, cada uno enlazado a un prop diferente.

**Ejemplo:**

```Vue
// Componente hijo (UserName.vue)
<script setup>
const firstName = defineModel('firstName');
const lastName = defineModel('lastName');
</script>

<template>
  <input type="text" v-model="firstName" />
  <input type="text" v-model="lastName" />
</template>
```

```Vue
// Componente padre
<template>
  <UserName
    v-model:first-name="first"
    v-model:last-name="last"
  />
</template>
<script setup>
import { ref } from 'vue';
import UserName from './UserName.vue';
const first = ref('');
const last = ref('');
</script>
```

(Aquí, v-model:first-name y v-model:last-name enlazan los props firstName y lastName del componente UserName con las variables first y last en el componente padre.)

## E - Handling v-model Modifiers

**Definición:** Los modificadores de v-model (como .trim, .number, .lazy) también se pueden usar en componentes personalizados. Se puede acceder a estos modificadores en el componente hijo usando defineModel().

**Ejemplo:**

```Vue
// Componente hijo (MyComponent.vue)
<script setup>
const [model, modifiers] = defineModel({
  set(value) {
    if (modifiers.capitalize) {
      return value.charAt(0).toUpperCase() + value.slice(1);
    }
    return value;
  }
});
</script>

<template>
  <input type="text" v-model="model" />
</template>
```

```Vue
// Componente padre
<template>
  <MyComponent v-model.capitalize="myText" />
</template>
<script setup>
import { ref } from 'vue';
import MyComponent from './MyComponent.vue';
const myText = ref('');
</script>
```

(En este ejemplo, el modificador .capitalize se usa en el componente padre. El componente hijo usa la función set de defineModel() para capitalizar la primera letra del valor.)

## F - Modifiers for v-model with Arguments

**Definición:** Los modificadores también se pueden usar con v-model que tienen argumentos.

**Ejemplo:**

```Vue
// Componente hijo (UserName.vue)
<script setup>
const [firstName, firstNameModifiers] = defineModel('firstName');
const [lastName, lastNameModifiers] = defineModel('lastName');
</script>

<template>
  <input type="text" v-model="firstName" />
  <input type="text" v-model="lastName" />
</template>
```

```Vue
// Componente padre
<template>
  <UserName
    v-model:first-name.capitalize="first"
    v-model:last-name.uppercase="last"
  />
</template>
<script setup>
import { ref } from 'vue';
import UserName from './UserName.vue';
const first = ref('');
const last = ref('');
</script>
```

(Aquí, v-model:first-name.capitalize y v-model:last-name.uppercase usan modificadores en diferentes enlaces v-model.)

## G - Prop Options with defineModel

**Definición:** Se pueden pasar opciones de prop a defineModel para configurar el comportamiento del prop subyacente.

**Ejemplo:**

```JavaScript
// Haciendo el v-model obligatorio
const model = defineModel({ required: true });

// Proporcionando un valor por defecto
const model = defineModel({ default: 0 });
```

(En este ejemplo, se muestra cómo hacer que el prop v-model sea obligatorio o cómo proporcionar un valor por defecto.)

## H - Default Value and Desynchronization

**Definición:** Si se usa un valor por defecto en defineModel y no se proporciona ningún valor desde el componente padre, puede ocurrir una desincronización entre los componentes.

**Ejemplo:**

```JavaScript
// Componente hijo
const model = defineModel({ default: 1 });

// Componente padre
const myRef = ref();
```

```Html
<Child v-model="myRef"></Child>
```

(En este caso, el model del hijo tendrá el valor 1, mientras que myRef del padre será undefined, lo que puede causar problemas.)
