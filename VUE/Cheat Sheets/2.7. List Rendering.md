## A - v-for

**Definición:** `v-for` es una directiva en Vue.js que te permite renderizar listas de elementos dinámicamente, iterando sobre un array o un objeto. Es como un "molde flexible" para crear estructuras repetitivas. Almacenamos los valores iterados en alias o variables de nuestro componente. Piensa que `v-for` crea dinámicamente y de forma elegante múltiples etiquetas HTML basadas en una fuente de datos.
**Ejemplo:**

```html
<li v-for="tarea in tareas">{{ tarea.text }}</li>
```

**Descripción del ejemplo:** Si `tareas` es un array de objetos (como `{ text: 'Hacer la compra' }` y `{ text: 'Lavar el coche' }`), la directiva `v-for` crea dinámicamente una etiqueta `<li>` por cada tarea, y mostrando su texto. El alias `tarea` almacena cada objeto `text` que el ciclo v-for analiza, uno tras otro.

## B - Alias (ítem, index)

**Definición:** Al usar `v-for` puedes dar "apodos" a cada elemento que está siendo recorrido del array. Además del alias para el item del array, existe otro segundo alias opcional, para el indice actual de la iteración (index). Esto te permite acceder tanto al valor del ítem como a su posición en la lista. Piensa que cada elemento visitado por v-for lleva asociado su numero de visita que queda registrado en `index`, lo que aumenta el poderío de `v-for`.
**Ejemplo:**

```html
<li v-for="(fruta, index) in frutas">{{index}}- {{ fruta }}</li>
```

**Descripción del ejemplo:** En este caso, para el array `frutas` ('manzana', 'plátano', 'pera'), el alias `fruta` va iterando a través de las `frutas` a la vez que `index` va enumerando su índice, de tal manera que veremos 0 - manzana, 1 - plátano, 2 - pera. Es como etiquetar cada elemento y su número de lista, a la vez.

## C - v-for con objetos

**Definición:** `v-for` también puede iterar a través de las propiedades de un objeto, visitándolos como parejas `key` : `value`. De ese modo los nombres (o `key`s ) de las propiedades, son visibles también en el `template`, lo que permite mostrar los nombres de las propiedades a la vez que sus contenidos, mediante sus alias definidos en la estructura `v-for`. El órden de la iteración corresponderá al órden dado por la funcion de Javascript `Object.values()`. Es como "desempaquetar" las propiedades de un objeto y poder trabajarlas, en tiempo real.
**Ejemplo:**

```html
<li v-for="(valor, llave) in libro">{{llave}}: {{ valor }}</li>
```

**Descripción del ejemplo:** En el objeto libro: ` {titulo : "El Quijote", autor : "Cervantes"}`. la directiva `v-for` creará una etiqueta `<li>` por cada propiedad, mostrando primero el nombre de la propiedad con su alias `llave` (`"titulo"`), un `:`, y su valor con alias `valor` (`"El Quijote"`). Para el siguiente par sería `"autor"`: `"Cervantes"`. `v-for` hace que los objetos se muestren dinámicamente, de una manera más comprensible en nuestra vista.

## D - v-for con Rango

**Definición:** La directiva `v-for` te permite realizar un ciclo numérico repitiendo un determinado template. Solo tendrás que dar un valor entero como entrada a la iteración; el template repetirá su lógica la misma cantidad de veces que indica el número dado en la iteración; lo que es especialmente útil si no quieres utilizar arrays para el ciclo y en situaciones donde el número de repeticiones se obtiene dinámicamente, y es numérico.
**Ejemplo:**

```html
<span v-for="numero in 5"> {{ numero }}</span>
```

**Descripción del ejemplo:** Este ejemplo creará una serie de 5 elementos `<span>`, mostrando `1`, `2`, `3`, `4`, y `5`. Nótese como `v-for` empezará a iterar siempre desde 1 y no desde 0 , con su alias (en este caso, `numero`). Esto crea patrones numerados repetitivos, como numeraciones o índices, de modo facil y sencillo.

## E - v-for en `<template>`

**Definición:** Cuando necesites iterar un bloque HTML completo, usando v-for sobre varios nodos simultaneamente (etiquetas, atributos,etc) , la solución ideal es envolverlo con una etiqueta `template`, de manera similar a como ocurría con la directiva `v-if`, usando una etiqueta `<template>`. De esta manera, `<template>` agrupará un grupo de elementos anidados que serán iterados juntos sin introducir elementos HTML extras o envoltorios innecesarios en el resultado final del DOM.
**Ejemplo:**

```html
<ul>
  <template v-for="usuario in usuarios">
    <li>{{ usuario.nombre}}</li>
    <li class="separador">---------</li>
  </template>
</ul>
```

**Descripción del ejemplo:** La directiva `v-for` itera sobre el array `usuarios` creando una lista de elementos `<li>` , por cada usuario, que incorporan la información (`nombre`), seguidos cada uno por un separador `<li class="separador">`.
Este caso no hubiera sido posible sin el template, debido al caracter lineal de la iteración de `v-for`. Al agrupar los nodos a iterar, permite aumentar las funcionalidades y flexibilidad de los bloques que queremos iterar de un mismo array, haciendo más eficiente el renderizado de código, limpio, eficiente y versátil.

## F - v-for con v-if

**Definición:** Aunque es posible técnicamente combinar `v-for` y `v-if` en una misma etiqueta HTML, no es lo recomendable debido a la prioridad implícita en la ejecución de cada una de estas directivas. Vue procesa el `v-if` primero, por lo tanto la condicion del `v-if` se evalúa independientemente de cada ítem, que solo existe cuando v-for es ejecutado. Se suele resolver usando `<template>`, encapsulando todo v-for dentro de este elemento, al que se le asignaría v-if de modo global, lo que, como hemos dicho antes, nos evitará código duplicado y errores conceptuales. Se prefiere computar valores o crear funciones para el procesado y visualizacion de datos. Es una mala práctica de cocina que suele llevar al uso indiscriminado de cucharas cuando ya has filtrado o selecionado tus ingredientes con anterioridad.

**Ejemplo:**

(No recomendable: este ejemplo es solo ilustrativo para evitar su mal uso):

```html
<li
  v-for="producto in productos"
  :key="producto.id"
  v-if="producto.precio > 10"
>
  {{producto.nombre}}
</li>
```

**Descripción del ejemplo:** Aunque esta directiva funciona, se evalúa v-if tras v-for. `v-for` intentaría renderizar primero todos los productos y despues de ello, `v-if` ocultaría o eliminaría aquellos elementos cuyo `producto.precio` no fuera mayor que 10. Para evitarlo, es preferible generar una nueva lista con propiedades calculadas o realizar un filtrado usando metodos en nuestro componente (y no con directivas de control en el HTML), para despues utilizar dicha lista filtrada en `v-for`, lo que conlleva un codigo más limpio, eficaz y comprensible (especialmente, en la resolución de bugs), y de mejor mantenibilidad.

## G - Mantener estado con key

**Definición:** La directiva `key`, es un atributo especial en v-for, necesario cuando el array de v-for cambia de forma que sus items (e indices) también lo hacen y cuando en él se usan elementos internos con "estado propio" (como los componentes y atributos `input`). Sin él Vue, aplicaría una optimizacion con un renderizado parcial basado en parcheo de la posición. Al indicarle una `key` unica e inmutable a Vue por cada nodo renderizado de nuestro template en el ciclo `v-for`, conseguimos que las relaciones entre cada elemento de datos y la etiqueta renderizada sean explicitas y uno a uno, con la ventaja de que, si esta posicion del item se moviera en el array original, Vue será capaz de reconocer que ese elemento ahora está en la posición correcta y con su estado interno guardado para evitar un renderizado parcial con problemas e inconsistencias. Si la `key` es redundante e igual en muchos elementos, Vue asumirá la situación, pero de manera menos eficiente. La `key` es como una "etiqueta identificativa de estado" para un elemento iterado que ayuda al correcto renderizado de cambios complejos y que guarda relación con la fuente de datos.
**Ejemplo:**

```html
<div v-for="item in lista" :key="item.id">
  <input type="text" :value="item.texto" />
</div>
```

**Descripción del ejemplo:** Si `lista` cambia (se añade un nuevo `item` ó `item` cambia de posición en `lista`), la `key`, como atributo único e inmutable de cada uno de ellos, asegurará que cada caja de texto (`<input>`) está asociado a su `item`, en su correcta posición del array. Y no habrá errores en el cambio en pantalla. Así pues , aunque los `items` del array cambien o reordenen, la directiva `key` hace que Vue pueda identificarlos, optimizando el renderizado del DOM. El `item.id`, o valor identificador único, hace este "linkeo" posible en el rendimiento de nuestra aplicacion. Este `item.id`, habitualmente es el id en una base de datos.

## H - v-for con componentes

**Definición:** Cuando utilizas la directiva `v-for` con componentes, estas iterando (y renderizando) una serie de elementos de la interfaz gráfica con comportamiento, funcionalidad y atributos propios. Debemos pasar información adicional del bucle (index, propiedades), mediante atributos `props` que el componente interno debe de saber procesar; `v-for` no se ocupará de hacerlo, pues es tarea exclusiva del programador indicarle, a través de props de manera explícita que es lo que quieres que se le envíe de cada una de las iteraciones. Así conseguimos, desacoplar la logica `v-for` con la lógica del propio componente.
**Ejemplo:**

```html
<MiComponente
  v-for="(dato,index) in datos"
  :key="dato.id"
  :dato="dato"
  :index="index"
/>
```

**Descripción del ejemplo:** Aquí por cada `dato` de la variable `datos`, se crea un elemento de tipo `<MiComponente>`, donde la información asociada con cada ciclo está enviada en forma de propiedades (`props`). Los valores del `v-for` que alimentan estas `props`, son (`dato` ) y `index` de manera individual por componente (donde `key` debe ser siempre único y referirse a la fuente de datos en `v-for`). Es como conectar los "cables" adecuados de los componentes en cada iteración del array original que alimenta el ciclo.

## I - Detección de cambios en Arrays

**Definición:** Vue es capaz de detectar ciertos cambios (inserciones, eliminaciones, ordenamientos), utilizando para ellos ciertos métodos internos de arrays reactivos, lo que significa que cuando realizas alguno de los métodos siguientes sobre una fuente de datos declarada con Vue, el `template` correspondiente donde este sea utilizado se va a actualizar para reflejar los nuevos datos: `.push()`, `.pop()`, `.shift()`, `.unshift()`, `.splice()`, `.sort()`, `.reverse()`. Al manipular reactivamente los datos de esta forma , `Vue` siempre actualiza la interfaz por ti de manera automática , sin realizar el complejo trabajo manual sobre el DOM (con código javascript o Jquery). Por el contrario, otros métodos como `filter()` , `concat()`, ó `slice()`, no alteran el array original y devuelven una copia con el resultado final, en ese caso has de reasignar de nuevo tu array a dicha copia de respuesta.

**Ejemplo:**

```html
<button @click="frutas.push('Kiwi')">Add kiwi</button>
<li v-for="fruta in frutas" :key="fruta">{{ fruta }}</li>
```

```javascript
const frutas = ref(["manzana", "platano"]);
```

**Descripción del ejemplo:** La interfaz de usuario actualiza, añadiendo el texto `"kiwi" ` a la lista en tiempo real, ya que `push()` altera el array de forma reactiva. Si se utilizara, por el contrario `frutas.filter((f)=>f.lenght > 4)`, no sucederia nada , si antes no hubieras hecho `frutas =  frutas.filter((f)=>f.lenght > 4)` reasignando la fuente reactiva con su resultado nuevo de `filter`.

## J - Visualización de resultados filtrados u ordenados

**Definición:** Es normal desear filtrar un array (lista de datos ) u ordenar datos sin cambiar la información del array original. Para ello debemos utilizar el sistema de `Computed properties`, que actuaran como arrays virtualizados en la capa de presentacion visual del HTML; Estos computed retornan el valor o resultado que necesita el `v-for` de nuestra plantilla en su iteracion. Siempre utilizando un enfoque funcional (declarativo), sin la mutación o alteración directa de la fuente reactiva de origen, lo que garantiza que si las acciones realizadas sobre ellos tuvieran un bug, la información reactiva original, siempre estaría sana y salvo. Esta acción de creación y procesamiento para la visualización en v-for se debe realizar en `computed properties`, o también en funciones, como medida higienica.
**Ejemplo:**

```html
<li v-for="producto in productosFiltrados">{{ producto.nombre}}</li>
```

```javascript
const productos = ref([
  { nombre: "pera", precio: 2 },
  { nombre: "manzana", precio: 3 },
  { nombre: "naranja", precio: 1 },
]);

const productosFiltrados = computed(() => {
  return productos.filter((prod) => prod.precio > 2);
});
```

**Descripción del ejemplo:** En este caso `productosFiltrados` realiza el filtro dinámico usando la propiedad de `precio` (mayor que 2). La propiedad calculada filtrará sólo productos `pera` y `manzana`, mostrando el template del v-for solo con productos filtrados y evitando cambiar el array original `productos`, al ser gestionado todo a través de computed. Todo ello garantizando un renderizado actualizado y reactivo. Por el contrario , una accion tipo `.reverse()` y `.sort()` sí harían alteración del array, razón por la cual, hay que tener siempre la precaución de no realizar alteraciones inplace en la computación y usar la "spread" operation de javascript , realizando `[... miArray].sort()` o `[... miArray].reverse()`.
